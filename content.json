{"meta":{"title":"å¢¨å¤œ","subtitle":null,"description":null,"author":"inkn","url":"inknight.cn"},"pages":[{"title":"about","date":"2018-12-29T13:15:42.000Z","updated":"2018-12-29T13:21:17.235Z","comments":true,"path":"about/index.html","permalink":"inknight.cn/about/index.html","excerpt":"","text":"æ­£åœ¨å­¦å‰ç«¯çš„èœé¸ŸğŸ’¦"},{"title":"tags","date":"2018-12-29T13:32:12.000Z","updated":"2018-12-31T14:20:02.378Z","comments":true,"path":"tags/index.html","permalink":"inknight.cn/tags/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-12-29T13:33:05.000Z","updated":"2018-12-31T14:19:57.307Z","comments":true,"path":"categories/index.html","permalink":"inknight.cn/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"Webpackå¿«é€Ÿä¸Šæ‰‹","slug":"webpackå¿«é€Ÿä¸Šæ‰‹","date":"2019-05-07T12:43:08.000Z","updated":"2019-05-15T00:57:46.620Z","comments":true,"path":"2019/05/07/webpackå¿«é€Ÿä¸Šæ‰‹/","link":"","permalink":"inknight.cn/2019/05/07/webpackå¿«é€Ÿä¸Šæ‰‹/","excerpt":"ä»€ä¹ˆæ˜¯ Webpack ï¼Ÿwebpack æ˜¯ä¸€ä¸ªé™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå¤„ç†æ¨¡å—ä¾èµ–ç”Ÿæˆæµè§ˆå™¨å¯æ‰§è¡Œçš„ä»£ç ã€‚ å¿«é€Ÿå¼€å§‹","text":"ä»€ä¹ˆæ˜¯ Webpack ï¼Ÿwebpack æ˜¯ä¸€ä¸ªé™æ€æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå¤„ç†æ¨¡å—ä¾èµ–ç”Ÿæˆæµè§ˆå™¨å¯æ‰§è¡Œçš„ä»£ç ã€‚ å¿«é€Ÿå¼€å§‹ 1.å»ºç«‹å·¥ç¨‹æ–‡ä»¶å¤¹ï¼Œåˆå§‹åŒ–npm init -y æœ¬åœ°å®‰è£… webpack npm install webpack webpack-cli -D è°ƒæ•´ package.jsonç§»é™¤ main å…¥å£é˜²æ­¢æ„å¤–å‘å¸ƒä»£ç ï¼Œæ·»åŠ  private ç¡®ä¿å®‰è£…åŒ…æ˜¯ç§æœ‰çš„ã€‚ // package.json&#123; \"name\": \"webpack-demo\", \"version\": \"1.0.0\", \"description\": \"\",+ \"private\": true,- \"main\": \"index.js\", \"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\" &#125;, \"keywords\": [], \"author\": \"\", \"license\": \"ISC\", \"devDependencies\": &#123; \"webpack\": \"^4.30.0\", \"webpack-cli\": \"^3.3.2\" &#125;&#125; åœ¨å·¥ç¨‹ç›®å½•å»ºç«‹ä»¥ä¸‹æ–‡ä»¶ /src index.js index.css /dist index.html å®‰è£…å¯¹åº” loader å¤„ç† css npm install css-loader style-loader -D é…ç½® webpack.config.js const path = require('path')module.exports = &#123; mode: 'development', // æ¨¡å¼ | production(é»˜è®¤) | none entry: &#123; // å…¥å£ index: path.resolve(__dirname, 'src/index.js') &#125;, output: &#123; // å‡ºå£ path: path.resolve(__dirname, 'dist'), filename: 'bundle.js' &#125;, module: &#123; rules: [ &#123; test: /\\.css$/, use: ['style-loader', 'css-loader'] // æ³¨æ„é¡ºåºï¼Œä»åå¾€å‰ &#125; ] &#125;&#125; åœ¨ index.js ä¸­å¼•å…¥ index.css import './index.css'Â·Â·Â· åœ¨ index.html ä¸­å¼•å…¥æ‰“åŒ…ç”Ÿæˆçš„ bundle.js &lt;html&gt; &lt;head&gt; &lt;title&gt;webpack-demo&lt;/title&gt; &lt;meta charset=&quot;utf-8&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;script src=&quot;./bundle.js&quot;&gt;&lt;/script&gt; &lt;body&gt;&lt;/html&gt; åœ¨å·¥ç¨‹ç›®å½•ä½¿ç”¨å‘½ä»¤æ‰“åŒ… webpack å¯æ‰“å¼€ /dist/index.html æŸ¥çœ‹ç»“æœ Webpack æ ¸å¿ƒæ¦‚å¿µModeæ¨¡å¼å¯ä»¥é€šè¿‡é…ç½® mode è¿›è¡Œé…ç½®ï¼Œç”¨äºå‘ŠçŸ¥ webpack ä½¿ç”¨ç›¸åº”ç¯å¢ƒçš„å†…ç½®ä¼˜åŒ–ã€‚ å¯é€‰å€¼: development å¼€å‘ç¯å¢ƒ production ç”Ÿäº§ç¯å¢ƒ none Entryå…¥å£æŒ‡ç¤º webpack åº”ä»å“ªä¸ªæ¨¡å—å¼€å§‹ç€æ‰‹ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚ é…ç½®æ–¹æ³•ï¼šentry: string|Array&lt;string&gt;module.exports = &#123; mode: 'development', entry: path.resolve(__dirname, 'src/index.js') &#125; å¯¹è±¡è¯­æ³•é…ç½®:module.exports = &#123; mode: 'development', entry: &#123; index: path.resolve(__dirname, 'src/index.js') &#125;&#125; Outputæˆ‘ä»¬å®šä¹‰çš„ã€Œå…¥å£ã€æ˜¯ webpack æ‰“åŒ…æ—¶çš„ç¨‹åºå…¥å£ï¼Œè€Œæœ€ç»ˆç¼–è¯‘æ„å»ºåï¼ŒçœŸæ­£è¢«æµè§ˆå™¨åŠ è½½çš„èµ„æºæ–‡ä»¶åˆ™æ˜¯ã€Œå‡ºå£ã€æ–‡ä»¶ï¼Œå‡ºå£é…ç½® webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œå’ŒæŒ‡å®š bundles çš„åå­—ï¼Œé»˜è®¤ä½ç½®æ˜¯ ./distã€‚ é…ç½®æ–¹æ³•ï¼šconst path = require('path')module.exports = &#123; mode: 'development', entry: path.resolve(__dirname, 'src/index.js'), output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'bundule.js' &#125;&#125; å¦‚æœé…ç½®äº†å¤šå…¥å£ï¼Œåˆ™è¾“å‡ºå¤šä¸ª bundleï¼š const path = require('path')module.exports = &#123; mode: 'development', entry: &#123; app: path.resolve(__dirname, 'src/app.js'), vendor: path.resolve(__dirname, 'src/vendor.js') &#125;, output: &#123; path: path.resolve(__dirname, 'dist'), filename: '[name].js' &#125;&#125; ä»¥ä¸Šé…ç½®ä¼šå°† app.js å’Œ vendor.js è¾“å‡ºåˆ° ./dist/ ç›®å½•ä¸‹ï¼Œ Loaderloader ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚webpack æœ¬èº«åªè®¤è¯† js å’Œ json æ–‡ä»¶ï¼Œå¦‚æœè¦å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶å°±éœ€è¦ä½¿ç”¨å¯¹åº”çš„ loaderã€‚ loader é…ç½®åœ¨ module å±æ€§çš„ rules æ•°ç»„ä¸­ï¼Œå› ä¸º webpack æŠŠæ‰€æœ‰æ–‡ä»¶éƒ½çœ‹æˆä¸€ä¸ªä¸ªæ¨¡å—ï¼Œè€Œ loader æ­£æ˜¯ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚ é…ç½® loader ä¸¤ä¸ªç›®æ ‡ï¼š test: ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ ‡å¿—å¸¦å“ªäº›åç¼€çš„æ–‡ä»¶éœ€è¦è¢«å¤„ç†ã€‚ use: æŒ‡å®š loader å¤„ç†æ»¡è¶³ test æ¡ä»¶çš„æ–‡ä»¶ å¯é€‰å‚æ•°ï¼š include/exclude: æ­£åˆ™ï¼Œæ‰‹åŠ¨æŒ‡å®šå¿…é¡»å¤„ç†çš„æ–‡ä»¶å¤¹æˆ–å±è”½ä¸éœ€è¦å¤„ç†çš„æ–‡ä»¶å¤¹ const path = require('path')module.exports = &#123; mode: 'development', entry: path.resolve(__dirname, 'src/index.js'), output: &#123; path: path.resolve(__dirname, 'dist'), filename: 'bundle.js' &#125;, module: &#123; rules:[ &#123; test: /\\.css$/, use: ['style-loader', 'css-loader'] &#125; ] &#125;&#125; è¯¥é…ç½®æŒ‡å®šäº†æ‰€æœ‰å…¥å£ä¾èµ–çš„ css æ–‡ä»¶ï¼Œéƒ½ä¼šå…ˆç»è¿‡ css-loader å¤„ç†ï¼Œå†é€šè¿‡ style-loader è½¬æ¢æˆ html ä¸Š &lt;style&gt; æ ‡ç­¾ã€‚ Pluginsloader ç”¨äºè½¬æ¢é JavaScript ç±»å‹çš„æ–‡ä»¶ï¼Œè€Œæ’ä»¶åˆ™æ˜¯ç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ‰“åŒ…ä¼˜åŒ–ã€å‹ç¼©ã€é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ç­‰ç­‰ã€‚ä½¿ç”¨æ’ä»¶ï¼Œå…ˆ npm å®‰è£…ï¼Œå†åœ¨é…ç½®æ–‡ä»¶ä¸­å¼•å…¥ï¼Œæœ€åå°†å…¶å®ä¾‹ä¼ é€’ç»™ plugins æ•°ç»„å±æ€§ã€‚ const webpack = require('webpack')module.exports = &#123; // other code plugins: [ new webpack.optimize.UglifyJsPlugin() ]&#125; æ­å»ºå¼€å‘ç¯å¢ƒ å¼€å‘ç¯å¢ƒè®²ç©¶è°ƒè¯•ã€æµ‹è¯•ï¼Œå¸Œæœ›æ–‡ä»¶æ˜¯æœªå‹ç¼©ä¸æœªæ··æ·†çš„ã€‚ ä½¿ç”¨ source map è¿›è¡Œè°ƒè¯•ä½¿ç”¨ webpack å¯¹æºä»£ç è¿›è¡Œæ‰“åŒ…åï¼Œä¼šå¯¹æºä»£ç è¿›è¡Œå‹ç¼©ã€ç²¾ç®€ã€ç”šè‡³å˜é‡åæ›¿æ¢ï¼Œåœ¨æµè§ˆå™¨ä¸­æ— æ³•å¯¹ä»£ç è¿›è¡Œè°ƒè¯•ï¼Œè€Œä½¿ç”¨ sourse map åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨çœ‹åˆ°æºä»£ç ï¼Œè¿›è€Œå¯ä»¥è¿›è¡Œè°ƒè¯•ã€‚ ä½¿ç”¨ source map:åœ¨é…ç½®ä¸­æ·»åŠ  devtool å±æ€§ï¼Œèµ‹å€¼ä¸º source-map æˆ–è€… inline-source-map å³å¯ï¼Œåè€…æŠ¥é”™ä¿¡æ¯æ›´åŠ å…·ä½“ï¼Œä¼šæŒ‡ç¤ºä»£ç çš„å…·ä½“é”™è¯¯ä½ç½®ï¼Œè€Œ source-map ä¸ä¼šã€‚ module.exports = &#123; // other code devtool: 'source-map'&#125; ä½¿ç”¨ webpack-dev-serveræ¯æ¬¡å†™å®Œä»£ç ï¼Œè¿˜è¦åˆ‡åˆ°æ§åˆ¶å°ï¼Œè¿è¡Œæ‰“åŒ…å‘½ä»¤æ˜¯ä»¶å¾ˆæµªè´¹æ—¶é—´çš„äº‹æƒ…ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨åˆ° webpack-dev-server ä½¿ç”¨æ–¹æ³•ï¼š â‘  å®‰è£… webpack-dev-server npm install webpack-dev-server -D â‘¡ ä¿®æ”¹ webpack.config.js é…ç½®ï¼Œæ·»åŠ  devServer å±æ€§ï¼š module.exports = &#123; // other code module.exports = &#123; devServer: &#123; contentBase: './dist' // é™æ€æœåŠ¡çš„å†…å®¹ç›®å½•åœ°å€ // è®¿é—® http://localhost:8080 ä¼šæ˜ å°„æˆå·¥ç¨‹ç›®å½•ä¸‹çš„ dist æ–‡ä»¶å¤¹ï¼ˆwebpack-dev-server è®¿é—®çš„æ˜¯å†…å­˜ä¸­çš„æ–‡ä»¶ï¼Œæ­¤æ—¶æ–‡ä»¶å¹¶æœªçœŸæ­£è¾“å‡ºåˆ° dist ç›®å½•ä¸‹ï¼‰ &#125; &#125;&#125; â‘¢ åœ¨ package.json çš„ scripts å±æ€§ä¸­æ·»åŠ å‘½ä»¤ï¼š &#123; // other code \"scripts\": &#123; \"dev\": \"webpack-dev-server --open\" &#125;&#125; â‘£ è¿è¡Œå‘½ä»¤ npm run dev å¯ä»¥çœ‹åˆ°å½“ä¿®æ”¹æ–‡ä»¶åï¼Œæµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ã€‚ æ­¤å¤–ï¼Œwebpack-dev-server è¿˜æœ‰å…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚å¼€å‘æœåŠ¡å™¨çš„ç«¯å£ã€çƒ­æ›´æ–°æ¨¡å¼ç­‰ç­‰ï¼Œå¯ä»¥å‚è€ƒ Webpack æ­å»ºç”Ÿäº§ç¯å¢ƒ å°½é‡å‡å°‘æ„å»ºåŒ…çš„ä½“ç§¯ã€‚ é…ç½® optimizationåœ¨ webpack@4 ä¹‹å‰ï¼Œæƒ³åšæ„å»ºä¼˜åŒ–ï¼Œéœ€å¼•å…¥ä¸å°‘æ’ä»¶ã€‚webpack@4 å†…ç½®äº†å¸¸ç”¨çš„æ’ä»¶ï¼Œå¹¶å°†å…¶é…ç½®åŒ–ï¼Œä¸»è¦æ”¶æ•›åœ¨ optimization è¿™ä¸ªé…ç½®é¡¹ä¸­ã€‚å…¶ä¸»è¦é…ç½®æœ‰: minimizeå½“ mode é…ç½®ä¸º production æ—¶ï¼Œminimize é»˜è®¤ä¸º trueã€‚è‹¥å°†å…¶è®¾ä¸º false ï¼Œåˆ™å–æ¶ˆå¼•å…¥ uglifyjs-webpack-plugin minimizeré…ç½®æ‰§è¡Œä»£ç å‹ç¼©çš„å·¥å…·ï¼Œé»˜è®¤ä¸º uglifyjs-webpack-pluginï¼Œå¦‚éœ€è¦æ›¿æ¢æˆå…¶ä»–çš„æˆ–æ–°å¢ä»£ç å‹ç¼©æ’ä»¶ï¼Œå¯ä»¥æ‰‹åŠ¨è¦†ç›–ï¼šconst OptimizeCSSAssetsPlugin = require(\"optimize-css-assets-webpack-plugin\");const UglifyJsPlugin = require(\"uglifyjs-webpack-plugin\");module.exports = &#123; // other code optimization: &#123; minimizer: [ new UglifyJsPlugin(&#123; cache: true, parallel: true, // å¤šè¿›ç¨‹å‹ç¼© sourceMap: true &#125;), new OptimizeCSSAssetsPlugin(&#123;&#125;) // ä¼˜åŒ–å‹ç¼©css ] &#125;&#125;","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"Webpack","slug":"Webpack","permalink":"inknight.cn/tags/Webpack/"},{"name":"é¡¹ç›®æ„å»º","slug":"é¡¹ç›®æ„å»º","permalink":"inknight.cn/tags/é¡¹ç›®æ„å»º/"}]},{"title":"è°ˆè°ˆAJAX","slug":"ajax","date":"2019-04-07T08:02:21.000Z","updated":"2019-05-24T09:32:06.931Z","comments":true,"path":"2019/04/07/ajax/","link":"","permalink":"inknight.cn/2019/04/07/ajax/","excerpt":"AJAX æ˜¯ä»€ä¹ˆï¼ŸAJAX å…¨ç§°æ˜¯ Asynchronous JavaScript and XML ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯å¼‚æ­¥çš„ JavaScript å’Œ XMLã€‚Ajax æ˜¯ä¸€ç§å¼‚æ­¥è¯·æ±‚æ•°æ®çš„ Web å¼€å‘æŠ€æœ¯ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æé«˜ç”¨æˆ·ä½“éªŒã€‚Ajax å¯ä»¥åœ¨æµè§ˆå™¨ä¸åˆ·æ–°çš„æƒ…å†µä¸‹å»æ›´æ–°é¡µé¢çš„ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚è¡¨å•éªŒè¯ã€æœç´¢æ¡†çš„ä¸‹æ‹‰æç¤ºç­‰ç­‰ã€‚Ajax è¯·æ±‚è·å–çš„æ˜¯æ•°æ®è€Œä¸æ˜¯ HTML æ–‡æ¡£ï¼Œæ‰€ä»¥èŠ‚çœäº†ç½‘ç»œçš„å¸¦å®½ã€‚","text":"AJAX æ˜¯ä»€ä¹ˆï¼ŸAJAX å…¨ç§°æ˜¯ Asynchronous JavaScript and XML ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯å¼‚æ­¥çš„ JavaScript å’Œ XMLã€‚Ajax æ˜¯ä¸€ç§å¼‚æ­¥è¯·æ±‚æ•°æ®çš„ Web å¼€å‘æŠ€æœ¯ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†æé«˜ç”¨æˆ·ä½“éªŒã€‚Ajax å¯ä»¥åœ¨æµè§ˆå™¨ä¸åˆ·æ–°çš„æƒ…å†µä¸‹å»æ›´æ–°é¡µé¢çš„ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚è¡¨å•éªŒè¯ã€æœç´¢æ¡†çš„ä¸‹æ‹‰æç¤ºç­‰ç­‰ã€‚Ajax è¯·æ±‚è·å–çš„æ˜¯æ•°æ®è€Œä¸æ˜¯ HTML æ–‡æ¡£ï¼Œæ‰€ä»¥èŠ‚çœäº†ç½‘ç»œçš„å¸¦å®½ã€‚ AJAX åŸç†Ajax çš„æ ¸å¿ƒå°±æ˜¯é€šè¿‡æµè§ˆå™¨æä¾›çš„ XMLHttpRequest å¯¹åƒå‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ã€‚ åˆ›å»º XMLHttpRequest å¯¹è±¡var xhr = new XMLHttpRequest() ä½†æ˜¯è¿™æ ·å¹¶ä¸å…¼å®¹ IE7 ä»¥ä¸‹ã€‚å…¼å®¹å†™æ³•ï¼š function getXHR() &#123; var xhr = null; if(window.XMLHttpRequest) &#123; xhr = new XMLHttpRequest() &#125;else &#123; try &#123; xhr = new ActiveXObject('Msxml2.XMLHTTP') &#125; catch() &#123; try &#123; xhr = new ActiveXObject('Microsoft.XMLHTTP') &#125; catch() &#123; alert(\"æµè§ˆå™¨ä¸æ”¯æŒ Ajax !\") &#125; &#125; &#125;&#125; å‘æœåŠ¡å™¨å‘é€è¯·æ±‚åˆ†ä¸¤æ­¥å…ˆ open å† send: 1. xhr.open(method, url, isAsync)2. xhr.send(str) // post è¯·æ±‚ä¼šåœ¨è¿™å°†å‚æ•°ä¼ å…¥ method: è¯·æ±‚ç±»å‹ï¼ŒGET æˆ– POST url: è¯·æ±‚åœ°å€ isAsync: æ˜¯å¦å¼‚æ­¥è¯·æ±‚ æ³¨æ„ï¼šPOST è¯·æ±‚ä¸€å®šè¦è®¾ç½®è¯·æ±‚å¤´çš„ Content-type xhr.open('POST', 'http://a.com', true)xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded') å¤„ç†è¯·æ±‚åˆ°çš„æ•°æ®xhr.onreadystatechange = function() &#123; if(xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; document.getElementById('myDiv').innerHTML = xhr.responseText &#125;&#125; readyState: åªè¯»å±æ€§, readyStateå±æ€§è®°å½•äº†ajaxè°ƒç”¨è¿‡ç¨‹ä¸­æ‰€æœ‰å¯èƒ½çš„çŠ¶æ€ã€‚æœ‰ 0~4 äº”ä¸ªçŠ¶æ€ï¼š 0: æœªåˆå§‹åŒ–ï¼Œå°šæœªè°ƒç”¨ open æ–¹æ³• 1ï¼šå¯åŠ¨ï¼Œå·²ç»è°ƒç”¨ open æ–¹æ³• 2ï¼šå‘é€ï¼Œå·²ç»è°ƒç”¨ send æ–¹æ³• 3ï¼šæ¥æ”¶ï¼Œå·²æ¥æ”¶åˆ°ç›¸åº”å¤´ï¼Œè¿˜åœ¨æ¥æ”¶ç›¸åº”å†…å®¹ 4ï¼šå®Œæˆï¼Œå·²æ¥æ”¶åˆ°å…¨éƒ¨ç›¸åº”æ•°æ® onreadystatechange: onreadystatechange äº‹ä»¶å›è°ƒæ–¹æ³•åœ¨ readyState çŠ¶æ€æ”¹å˜æ—¶è§¦å‘ã€‚","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"}]},{"title":"æ·±æµ…æ‹·è´","slug":"æ·±æµ…æ‹·è´","date":"2019-04-03T02:16:51.000Z","updated":"2019-04-07T00:25:38.100Z","comments":true,"path":"2019/04/03/æ·±æµ…æ‹·è´/","link":"","permalink":"inknight.cn/2019/04/03/æ·±æµ…æ‹·è´/","excerpt":"å¯¹è±¡çš„èµ‹å€¼æ“ä½œå…¶å®æ˜¯å¯¹åœ°å€çš„å¤åˆ¶ï¼Œè€Œæ‹·è´å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ç„¶åæŠŠåŸå¯¹è±¡çš„å±æ€§å¤åˆ¶åˆ°è¿™ä¸ªæ–°å¯¹è±¡ä¸­ã€‚ å¤šä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¼šå¯¼è‡´ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«çš„æƒ…å†µå‡ºç°ã€‚","text":"å¯¹è±¡çš„èµ‹å€¼æ“ä½œå…¶å®æ˜¯å¯¹åœ°å€çš„å¤åˆ¶ï¼Œè€Œæ‹·è´å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ç„¶åæŠŠåŸå¯¹è±¡çš„å±æ€§å¤åˆ¶åˆ°è¿™ä¸ªæ–°å¯¹è±¡ä¸­ã€‚ å¤šä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¼šå¯¼è‡´ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«çš„æƒ…å†µå‡ºç°ã€‚ var a = &#123; age: 1&#125;var b = ab.age = 2console.log(a.age) // 2 æµ…æ‹·è´ æŠŠå¯¹è±¡ä¸­çš„å±æ€§å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸­ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªå±æ€§æ˜¯å¯¹è±¡ï¼Œå¤åˆ¶çš„æ˜¯åœ°å€ã€‚ å®ç°å¾ˆç®€å•ï¼Œå°±æ˜¯éå†å¯¹è±¡ï¼Œç„¶åæŠŠå¯¹è±¡è‡ªèº«çš„å±æ€§å’Œå±æ€§å€¼éƒ½å¯¹åº”çš„æ”¾åœ¨æ–°å¯¹è±¡ä¸Šã€‚function shallowClone(obj) &#123; // å¦‚æœä¼ å…¥å‚æ•°çš„ä¸æ˜¯å¯¹è±¡ï¼Œå°±è¿”å›ä¼ å…¥çš„å‚æ•° if(typeof obj !=='object' || obj === null) return obj // obj æ˜¯æ•°ç»„çš„è¯ï¼Œè¿”å›çš„æ–°å¯¹è±¡ä¹Ÿåº”æ˜¯æ•°ç»„ var newObj = Array.isArray(obj) ? [] : &#123;&#125; for(var key in obj) &#123; if(obj.hasOwnProperty(key)) &#123; newObj[key] = obj[key] &#125; &#125; return newObj&#125;var a = &#123;age: 1, foo:&#123;x:100&#125;&#125;var b = shallowClone(a)a.age = 2a.foo.x = 200console.log(b.age) // 1console.log(b.foo) // &#123;x: 200&#125; å¸¸è§çš„æµ…æ‹·è´æ‹·è´æ•°ç»„ slice() var arr = ['old', 1, 2, 3]var newArr = arr.slice()newArr[0] = 'new'console.log(arr) // [\"old\", 1, 2, 3]console.log(newArr) // [\"new\", 1, 2, 3] concat() var newArr = arr.concat() Object.assign() æµ…æ‹·è´å¯¹è±¡ Object.assing(target, [obj1,obj2...])å°†æ‰€æœ‰å¯æšä¸¾å±æ€§çš„å€¼ä»ä¸€ä¸ªæˆ–å¤šä¸ªæºå¯¹è±¡å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡ä¸­ï¼Œè¿”å›ç›®æ ‡å¯¹è±¡ var a = &#123;name: 'å¼ ä¸‰'&#125;var b = &#123;age: 20&#125;var p = Object.assign(&#123;&#125;, a, b)console.log(p) // &#123;name: \"å¼ ä¸‰\", age: 20&#125;a.name = 'æå››'b.age = 30console.log(p) // &#123;name: \"å¼ ä¸‰\", age: 20&#125; å±•å¼€è¿ç®—ç¬¦è¿›è¡Œæµ…æ‹·è´var a = &#123;age:1&#125;var b = &#123;...a&#125;a.age = 2console.log(b.age) // 1 æ·±æ‹·è´ æŠŠå¯¹è±¡ä¸­çš„å±æ€§å¤åˆ¶åˆ°æ–°å¯¹è±¡ä¸­ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªå±æ€§æ˜¯å¯¹è±¡ï¼Œå¤åˆ¶çš„æ˜¯æ˜¯å¯¹è±¡è€Œä¸æ˜¯åœ°å€ã€‚ æ‹·è´çš„æ—¶å€™åˆ¤æ–­ä¸€ä¸‹å±æ€§å€¼çš„ç±»å‹ï¼Œå¦‚æœæ˜¯å¯¹è±¡ï¼Œé€’å½’è°ƒç”¨æ·±æ‹·è´å‡½æ•° function deepClone(obj) &#123; if(!isObj(obj)) throw new Error('éå¯¹è±¡') var newObj = Array.isArray(obj) ? [] : &#123;&#125; for( var key in obj) &#123; if(obj.hasOwnProperty(key)) &#123; newObj[key] = isObj(obj[key]) ? deepClone(obj[key]) : obj[key] &#125; &#125; return newObj function isObj(o) &#123; return (typeof o === 'object' || typeof o === 'function') &amp;&amp; o !== null &#125;&#125;var a = &#123;age: 1, foo:&#123;x:100&#125;&#125;var b = deepClone(a)a.age = 2a.foo.x = 200console.log(b.age) // 1console.log(b.foo) // &#123;x: 100&#125; å¸¸è§æ·±æ‹·è´å…ˆåºåˆ—åŒ–æˆå­—ç¬¦ä¸²å†ååºåˆ—åŒ–æˆä¸ºæ–°å¯¹è±¡ JSON.parse(JSON.stringify(object)) è¿™ä¸ªæ–¹æ³•ç®€å•ç²—æš´ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹é€‚ç”¨ var p = &#123; name: 'å¼ ä¸‰', age: 20, jobs: &#123; name: 'ç¨‹åºçŒ¿', city: 'åŒ—äº¬' &#125;&#125;var p2 = JSON.parse(JSON.stringify(p))p2.jobs.city = 'æ·±åœ³'console.log(p.jobs.city) // åŒ—äº¬ ä½†æ˜¯è¯¥æ–¹æ³•ä¹Ÿæ˜¯æœ‰å±€é™æ€§çš„ï¼š å¿½ç•¥ undefined å¿½ç•¥ symbol å¿½ç•¥å‡½æ•° åŒ…å«å¾ªç¯å¼•ç”¨çš„å¯¹è±¡æ‰§è¡Œ JSON.stringify() ä¼šå‡ºé”™ var bar = &#123; a: undefined, b: Symbol('bb'), c: function()&#123;console.log('this is a')&#125;, d: 'd'&#125;var bar2 = JSON.parse(JSON.stringify(bar))console.log(bar2) // &#123;d: \"d\"&#125; å‡½æ•°åº“lodash è¯¥å‡½æ•°åº“æä¾›äº† cloneDeep æ–¹æ³•å®ç°æ·±æ‹·è´ æ·±æ‹·è´å®ç°å…¶å®å¾ˆå›°éš¾çš„ï¼Œéœ€è¦è€ƒè™‘å¾ˆå¤šè¾¹ç•Œé—®é¢˜ï¼Œæ¯”å¦‚åŸå‹é“¾å¦‚ä½•å¤„ç†ã€Dom å…ƒç´ çš„å¤„ç†ã€‚å®é™…å¼€å‘è€…å¦‚æœç¡®å®šè¦ç”¨æ·±æ‹·è´ï¼Œå¯ä»¥ä½¿ç”¨ lodash åº“var _ = require(&apos;lodash&apos;)var obj = &#123; a: 1, b: &#123;foo: function()&#125;&#125;var obj2 = _.cloneDeep(obj) æ€»ç»“ æµ…æ‹·è´å°±æ˜¯åœ¨æ‹·è´å¯¹è±¡å±æ€§æ—¶ï¼Œå±æ€§å€¼ä¹Ÿæ˜¯å¯¹è±¡çš„è¯ï¼Œæ‹·è´çš„åªæ˜¯å¼•ç”¨ï¼Œè€Œæ·±æ‹·è´æ‹·è´çš„æ˜¯å¯¹è±¡ã€‚ æ·±æ‹·è´ä¼šç”¨åˆ°é€’å½’ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œèƒ½ä¸ç”¨åˆ™ä¸ç”¨ã€‚","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"}]},{"title":"æ‰‹æ’•ä»£ç -JavaScript","slug":"æ‰‹æ’•ä»£ç -JavaScript","date":"2019-03-29T01:06:17.000Z","updated":"2019-05-15T01:11:26.355Z","comments":true,"path":"2019/03/29/æ‰‹æ’•ä»£ç -JavaScript/","link":"","permalink":"inknight.cn/2019/03/29/æ‰‹æ’•ä»£ç -JavaScript/","excerpt":"call æ›´æ”¹å‡½æ•°çš„ this æŒ‡å‘å¹¶æ‰§è¡Œå‡½æ•°å¹¶å°†ç»“æœè¿”å›ã€‚","text":"call æ›´æ”¹å‡½æ•°çš„ this æŒ‡å‘å¹¶æ‰§è¡Œå‡½æ•°å¹¶å°†ç»“æœè¿”å›ã€‚ Function.prototype.myCall = function(context) &#123; var context = context || window context.fn = this var args = [] for(var i = 1; i &lt; arguments.length; i++) &#123; args.push('arguments[' + i + ']') &#125; var result = eval('context.fn(' + args + ')') delete context.fn return result&#125; åˆ†æï¼š é¦–å…ˆ context ä½œä¸ºå¯é€‰å‚æ•°ï¼Œå¦‚æœä¸ä¼ æˆ–ä¼  null ï¼Œé»˜è®¤ä¸Šä¸‹æ–‡ä¸º window ç„¶åç»™ä¸Šä¸‹æ–‡ context æ·»åŠ æ–¹æ³• fn ï¼Œfn å°±æ˜¯è¦æ‰§è¡Œçš„å‡½æ•°ï¼Œè°è°ƒç”¨äº† call() , fn å°±æ˜¯è°ã€‚ æ‰€ä»¥ context.fn = this call è¿˜å¯ä»¥ä¼ å…¥å¤šä¸ªå‚æ•°ä½œä¸ºè°ƒç”¨çš„å‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥é€šè¿‡ arguments å¯¹è±¡è·å–å‡½æ•°çš„å‚æ•°ã€‚ æœ€åè°ƒç”¨å‡½æ•°ä¿å­˜è¿”å›å€¼ï¼Œåˆ é™¤ç»™å¯¹è±¡æ·»åŠ çš„ fn ï¼Œå°†ç»“æœè¿”å›ã€‚ æ ¸å¿ƒå°±æ˜¯ï¼Œé€šè¿‡å°†å‡½æ•°æ·»åŠ åˆ°å¯¹è±¡ä¸Šï¼Œç„¶åé€šè¿‡å¯¹è±¡è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œä»è€Œä½¿å‡½æ•°ä¸­çš„ this æŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚ æ›´ç®€æ´çš„å†™æ³•ï¼š Function.prototype.myCall = function(context, ...rest) &#123; var context = context || window context.fn = this var result = context.fn(...rest) delete context.fn return result&#125; apply apply å®ç°ä¸ call ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºå¯¹å‚æ•°çš„å¤„ç† Function.prototype.myApply = function(context, arr) &#123; var context = context || window context.fn = this var result if(!arr) &#123; result = context.fn() &#125; else &#123; var args = [] for(var i = 0; i &lt; arr.length; i++) &#123; args.push('arr[' + i + ']') &#125; result = eval('context.fn(' + args + ')') &#125; delete context.fn return result&#125; ç®€æ´ï¼šFunction.prototype.myApply = function(context, arr) &#123; var context = context || window context.fn = this var res = arr ? context.fn(...arr) : context.fn() delete context.fn return res&#125; bind åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ”¹å˜äº† this çš„å‡½æ•°ã€‚å¹¶åœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œä¼šå°†åœ¨è°ƒç”¨ bind æ—¶ç»™å®šçš„å‚æ•°åˆ—è¡¨ä½œä¸ºåŸå‡½æ•°çš„å‚æ•°åºåˆ—çš„å‰è‹¥å¹²é¡¹ã€‚ ä¸¾ä¸ªä¾‹å­ï¼šfunction foo(name,age) &#123; console.log('name:' + name + 'age:' + age)&#125;var f = foo.bind(null,'å¼ ä¸‰')f(20) // name:å¼ ä¸‰age:20 å®ç°ï¼šFunction.prototype.myBind = function(context) &#123; var self = this var args = [].slice.call(arguments, 1) function F() &#123; var args2 = [].slice.call(arguments) var arglist = args.concat(args2) return self.apply(this instanceof F ? this: context, arglist) &#125; F.prototype = Object.create(self.prototype) return F&#125; bind è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢è¿”å›äº† åŸå‡½æ•°.apply() å®ç°æ”¹å˜ this ã€‚ å¦‚æœ bind è¿”å›çš„æ–°å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°æ‰§è¡Œæ—¶(new å‡½æ•°)ï¼Œthis ä¸èƒ½æ”¹æˆä¼ å…¥çš„ context ï¼Œthis åº”è¯¥æ˜¯å£°æ˜çš„å˜é‡ã€‚ bind() ä¼ å…¥çš„é™¤ context çš„åç»­å‚æ•°ï¼Œå…ˆå­˜èµ·æ¥ï¼Œåœ¨è°ƒç”¨ç”± bind è¿”å›çš„æ–°å‡½æ•°æ—¶ ï¼Œå‘ apply() ä¼ å…¥ç”±åŸæ¥å­˜çš„å‚æ•°å’Œæ–°ä¼ å…¥çš„å‚æ•°ç»„æˆçš„æ•°ç»„(æ³¨æ„é¡ºåº)ã€‚ ç®€æ´ï¼š Function.prototype.myBind = function(context, ...rest) &#123; var self = this function F() &#123; return self.apply(this instanceof F ? this : context,rest.concat(...arguments)) &#125; F.prototype = Object.create(self.prototype) return F&#125; new new è¿ç®—ç¬¦åˆ›å»ºäº†ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰ç±»å‹çš„å®ä¾‹ åœ¨æ‰§è¡Œ new æ„é€ å‡½æ•°() æ—¶ï¼Œå‘ç”Ÿäº†ï¼š ç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ å°†å¯¹è±¡çš„åŸå‹å¼•ç”¨(__proto__)æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹ ç»‘å®š this ä¸ºè¯¥å¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„å†…å®¹ å¦‚æœå‡½æ•°æ‰§è¡Œçš„è¿”å›å€¼æ˜¯å¯¹è±¡ï¼Œå°±è¿”å›è¿™ä¸ªå¯¹è±¡ï¼Œå¦åˆ™è¿”å›ä¹‹å‰åˆ›å»ºçš„æ–°å¯¹è±¡ function myNew() &#123; var constructor = [].shift.call(arguments) var obj = Object.create(constructor.prototype) var res = constructor.apply(obj, arguments) return res instanceof Object ? res: obj&#125; ç®€æ´ï¼š function myNew(constructor, ...rest) &#123; let obj = Object.create(constructor.prototype) let res = constructor.apply(obj, rest) return res instanceof Object ? res : obj&#125; instanceof é€šå¸¸èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„ç±»å‹ï¼ŒåŸç†æ˜¯åˆ¤æ–­æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡æ˜¯å¦èƒ½åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸Š function myInstanceof(obj, fn) &#123; let prototype = fn.prototype let objProto = Object.getPrototypeOf(obj) while(true) &#123; if(objProto == null) return false if(objProto === prototype) return true objProto = Object.getPrototypeOf(objProto) &#125;&#125; è·å¾—æ„é€ å‡½æ•°çš„åŸå‹ è·å¾—å®ä¾‹å¯¹è±¡çš„åŸå‹ åˆ¤æ–­æ„é€ å‡½æ•°çš„åŸå‹æ˜¯å¦å°±æ˜¯å®ä¾‹å¯¹è±¡çš„åŸå‹ï¼Œå¦‚æœæ˜¯å°±è¿”å› true ï¼Œä¸æ˜¯å°±è®©å®ä¾‹å¯¹è±¡çš„åŸå‹æŒ‡å‘è‡ªèº«çš„åŸå‹ç»§ç»­åˆ¤æ–­ï¼Œç›´åˆ°å®ä¾‹å¯¹è±¡çš„åŸå‹ä¸º nullï¼Œè¿”å› false","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"},{"name":"è¿›é˜¶","slug":"è¿›é˜¶","permalink":"inknight.cn/tags/è¿›é˜¶/"}]},{"title":"ES6 ç³»åˆ— (ä¸Š)","slug":"ES6ä¸Š","date":"2019-03-28T12:23:17.000Z","updated":"2019-05-09T00:53:31.458Z","comments":true,"path":"2019/03/28/ES6ä¸Š/","link":"","permalink":"inknight.cn/2019/03/28/ES6ä¸Š/","excerpt":"Symbol Symbol æ˜¯ ES6 ä¸­æ–°å¢çš„ä¸€ç§åŸå§‹ç±»å‹ã€‚","text":"Symbol Symbol æ˜¯ ES6 ä¸­æ–°å¢çš„ä¸€ç§åŸå§‹ç±»å‹ã€‚ var s1 = Symbol('s')var s2 = Symbol('s')console.log(s1 == s2) // falseconsole.log(typeof s1) // 'symbol' Symbol ç±»å‹é€šè¿‡è°ƒç”¨ Symbol() å‡½æ•°ç”Ÿæˆï¼Œæ¯ä¸€ä¸ª Symbol ç±»å‹çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå³ä½¿åœ¨è°ƒç”¨ Symbol() æ—¶ä¼ å…¥çš„å‚æ•°ç›¸åŒï¼Œè¿”å›çš„å€¼å¹¶ä¸åŒã€‚ Symbol ç±»å‹èƒ½è½¬æ¢æˆå¸ƒå°”å€¼(true)æˆ–å­—ç¬¦ä¸²ï¼Œä½†ä¸èƒ½è½¬åŒ–æˆæ•°å­— Symbol ç±»å‹ä½œä¸ºå¯¹è±¡çš„ key å¯ä»¥ç§æœ‰åŒ–å±æ€§ æ™®é€šé—­åŒ…æ–¹å¼åˆ›å»ºæœ‰ç§æœ‰å±æ€§çš„æ„é€ å‡½æ•°:var Person = (function() &#123; // ç§æœ‰å±æ€§ var _gender function P(name, gender) &#123; this.name = name _gender = gender &#125; P.prototype.getGender = function() &#123; return _gender &#125; P.prototype.setGender = function(n) &#123; _gender = n &#125; return P &#125;)() var p = new Person('å¼ ä¸‰', 'ç”·') console.log(p) // P &#123;name: \"å¼ ä¸‰\"&#125; console.log(p.getGender()) // ç”· p.setGender('å¥³') console.log(p.getGender()) // å¥³ Symbol + é—­åŒ…å®ç°ç§æœ‰åŒ–å±æ€§ï¼švar Person = (function() &#123; var _gender = Symbol('gender') function P(name, gender) &#123; this.name = name this[_gender] = gender &#125; P.prototype.getGender = function() &#123; return this[_gender] &#125; P.prototype.setGender = function(n) &#123; this[_gender] = n &#125; return P&#125;)()var p = new Person('å¼ ä¸‰', 'ç”·')console.log(p[Symbol('gender')]) // undefinedconsole.log(p.getGender()) // ç”·p.setGender('å¥³')console.log(p.getGender()) // å¥³ ä½¿ç”¨ Symbol + é—­åŒ…çš„æ–¹å¼ç§æœ‰åŒ–å±æ€§ä¼šå®‰å…¨ã€‚ä»…ä½¿ç”¨é—­åŒ…ä¼šå‡ºé—®é¢˜ï¼Œ_gender å±æ€§åªæœ‰ä¸€ä¸ªï¼Œæ‰€æœ‰ Person å®ä¾‹ä¼šå…±ç”¨åŒä¸€ä¸ªã€‚ letã€constvar çš„ç‰¹ç‚¹ æ”¯æŒå˜é‡å£°æ˜é¢„è§£æ ä¸æ”¯æŒå—çº§ä½œç”¨åŸŸ å¯ä»¥é‡å¤å£°æ˜ console.log(a) // undefined&#123; var a = 1&#125;console.log(a) // 1var a = 2console.log(a) // 2 letã€const çš„ç‰¹ç‚¹ ä¸æ”¯æŒå˜é‡å£°æ˜é¢„è§£æ (å…ˆå£°æ˜åä½¿ç”¨) æ”¯æŒå—çº§ä½œç”¨åŸŸ ä¸èƒ½é‡å¤å£°æ˜ (æš‚æ—¶æ€§æ­»åŒº) &#123; console.log(a) // Uncaught ReferenceError: a is not defined let a = 1 const b = 2&#125;console.log(b) // Uncaught ReferenceError: b is not definedlet c let c = 3 // Uncaught SyntaxError: Identifier 'c' has already been declared ä¸æ”¯æŒå˜é‡é¢„è§£æå’Œä¸æ”¯æŒå˜é‡çš„é‡å¤å£°æ˜å¤§å¤§åœ°æé«˜äº†æ•°æ®ä½¿ç”¨çš„å®‰å…¨æ€§ã€‚æ‰€ä»¥ var èƒ½ä¸ç”¨åˆ™ä¸ç”¨ã€‚ åœ¨å®é™…å¼€å‘ä¸­è¿™ç§æ–¹æ³•åœ¨æ—¥ç›Šæ™®åŠï¼šé»˜è®¤ä½¿ç”¨ constï¼Œåªæœ‰å½“ç¡®å®éœ€è¦æ”¹å˜å˜é‡çš„å€¼çš„æ—¶å€™æ‰ä½¿ç”¨ letã€‚å› ä¸ºå¤§éƒ¨åˆ†çš„å˜é‡çš„å€¼åœ¨åˆå§‹åŒ–åä¸åº”å†æ”¹å˜ã€‚ const å¸¸é‡ å£°æ˜æ—¶å°±å¿…é¡»åˆå§‹åŒ– åˆè¯†åŒ–åå°±ä¸èƒ½æ”¹å˜ const a // Uncaught SyntaxError: Missing initializer in const declarationconst b = 1b = 2 // Uncaught TypeError: Assignment to constant variable. const åœ¨å­˜å¯¹è±¡çš„æ—¶å€™ï¼Œå­˜çš„æ˜¯å¯¹è±¡çš„å¼•ç”¨(åœ°å€)ï¼Œå¼•ç”¨ä¸èƒ½æ”¹å˜ï¼Œä½†å¯¹è±¡çš„å†…å®¹å´å¯ä»¥ã€‚ const p = &#123; name: 'å¼ ä¸‰', age: 20&#125;p.age = 21console.log(p.age) // 21 å¦‚æœæƒ³è®©å¯¹è±¡çš„å±æ€§ä¹Ÿä¸èƒ½æ”¹å˜ï¼Œå¯ä»¥ä½¿ç”¨ Object.freeze() æ–¹æ³•å†»ç»“å¯¹è±¡çš„ä¸€å±‚å±æ€§ const p = Object.freeze(&#123; name: 'å¼ ä¸‰', age: 20&#125;)console.log(Object.isFrozen(p)) // truep.age = 21 console.log(p.age) // 20 ä½†æ˜¯å¦‚æœå¯¹è±¡ä¸­è¿˜æœ‰å¯¹è±¡ï¼Œå°±ä¸è¡Œäº†ï¼Œåªèƒ½é€’å½’å†»ç»“ã€‚ è§£æ„èµ‹å€¼ æŒ‰ç…§ä¸€å®šæ¨¡å¼ï¼Œä»æ•°ç»„å’Œå¯¹è±¡ä¸­æå–å€¼ï¼Œå¹¶å¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚ æ•°ç»„è§£æ„ é¡ºåºå¯¹åº” let [a, b, c] = [1, 2, 3]let [d, , e] = [4, 5, 6]console.log(a, b, c, d, e) // 1 2 3 4 6 äº¤æ¢æ•°å­—ï¼šlet a = 1let b = 2;[a, b] = [b, a]console.log(a, b) // 2 1a = a ^ bb = a ^ ba = a ^ b console.log(a, b) // 1 2a = a + bb = a - ba = a - bconsole.log(a, b) // 2 1 å­—ç¬¦ä¸²è§£æ„ å’Œæ•°ç»„ä¸€æ ·let [char1, char2, char3] = 'abcd'console.log(char1, char2, char3) // a b c å¯¹è±¡è§£æ„ å˜é‡åè¦ä¸ key å¯¹åº” æ— é¡ºåº let &#123;a, b, c&#125; = &#123;a: 'aa', b: 'bb'&#125;console.log(a, b, c) // aa bb undefined åˆ«ååœ¨å¯¹è±¡è§£æ„ä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰å˜é‡å let &#123;a: name, b: age&#125; = &#123;a: 'å¼ ä¸‰', b: 20&#125;console.log(name, age) // å¼ ä¸‰ 20console.log(a) // Uncaught ReferenceError: a is not defined å¤šé‡è§£æ„let &#123;foo: [a, b]&#125; = &#123;foo:[1, 2], bar: 'bbb'&#125;console.log(a, b) // 1 2 å±•å¼€è¿ç®—ç¬¦ â€¦ æŠŠæ•°ç»„æˆ–å¯¹è±¡å±•å¼€æˆå‚æ•°åºåˆ— [â€˜aâ€™, â€˜bâ€™, â€˜câ€™] â€”&gt; â€˜aâ€™, â€˜bâ€™, â€˜câ€™{height: 100, width: 200} â€”&gt; height:100, width: 200 åœ¨è°ƒç”¨å‡½æ•°ä¼ å‚æ—¶ï¼Œå¯ä»¥å°†ä¼ å…¥çš„æ•°ç»„è½¬æ¢æˆå‚æ•°åºåˆ— console.log(Math.max(1, 2, 3)) // 3var arr = [1, 2, 3]console.log(Math.max(...arr)) // 3// =&gt; Math.max(arr[0], arr[1], arr[2]) æ•°ç»„ã€å¯¹è±¡åˆå¹¶ var arr1 = [1, 2, 3]var arr2 = ['a','b']var arr3 = [...arr1, ...arr2]console.log(arr3) // [1, 2, 3, \"a\", \"b\"]var obj1 = &#123;width: 100, height: 200&#125;var obj2 = &#123;top: 123, width: 200&#125;var obj3 = &#123;...obj1, ...obj2&#125;console.log(obj3) // &#123;width: 200, height: 200, top: 123&#125;var obj4 = &#123;...arr1, ...obj1&#125;console.log(obj4) // &#123;0: 1, 1: 2, 2: 3, width: 100, height: 200&#125;var arr4 = [...arr1, ...obj1] // Uncaught TypeError: obj1 is not iterable å°†ä»»æ„å¯è¿­ä»£å¯¹è±¡è½¬æ¢æˆæ•°ç»„ var str = 'abcde'var arr1 = [...str]console.log(arr1) // [\"a\", \"b\", \"c\", \"d\", \"e\"] æ¨¡æ¿å­—ç¬¦ä¸² ä¿æŒå†…å®¹æ ¼å¼ var str = ` &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;/ul&gt;`console.log(str)/* &lt;ul&gt; &lt;li&gt;&lt;/li&gt; &lt;/ul&gt;*/ å˜é‡è¡¨è¾¾å¼è§£æ ${ } var a = 1var str = `&lt;p&gt;$&#123;a + 123&#125;&lt;p&gt;`console.log(str) // &lt;p&gt;124&lt;p&gt; å­—é¢é‡è¯­æ³•æ‰©å±•å±æ€§åˆå§‹å€¼ç®€å†™ å­—é¢é‡é›†åˆä¸­å¦‚æœé”®å’Œå€¼åç§°ç›¸åŒï¼Œå¯ä»¥åªå†™é”®ã€‚ function createPerson(name, age) &#123; return &#123; name: name, age: age &#125;&#125;// ç®€å†™:function createPerson(name, age) &#123; return &#123; name, age &#125;&#125; å¯¹è±¡æ–¹æ³•çš„ç®€å†™ å¯ä»¥çœç•¥ : å’Œ function å…³é”®å­— var person = &#123; name: 'nick', sayName: function() &#123; console.log(this.name) &#125;&#125;// ç®€å†™ï¼švar person = &#123; name: 'nick', sayName() &#123; console.log(this.name) &#125;&#125; è¿­ä»£å™¨ åœ¨æ ‡å‡† for å¾ªç¯ä¸­ï¼Œé€šè¿‡å®šä¹‰ç´¢å¼•å˜é‡æ¥è¿½è¸ªå½“å‰å…ƒç´ ï¼Œå¾ˆç®€å•ï¼Œä½†æ˜¯ï¼Œå½“æ¶‰åŠåˆ°å¤šé‡ for å¾ªç¯åµŒå¥—æ—¶ï¼Œä»£ç å¤æ‚åº¦å¢å¤§ï¼Œå®¹æ˜“å‡ºé”™ï¼ˆè¯¯ç”¨å…¶ä»–å¾ªç¯çš„ç´¢å¼•å˜é‡ï¼‰ã€‚è¿­ä»£å™¨çš„å‡ºç°æ—¨åœ¨æ¶ˆé™¤è¿™ç§å¤æ‚æ€§ã€‚ ä»€ä¹ˆæ˜¯è¿­ä»£å™¨è¿­ä»£å™¨å°±æ˜¯ä¸€ä¸ªå…·æœ‰ next() æ–¹æ³•çš„å¯¹è±¡ï¼Œæ¯æ¬¡è°ƒç”¨ next() éƒ½ä¼šè¿”å›ä¸€ä¸ªç»“æœå¯¹è±¡ï¼Œç»“æœå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§ï¼Œ value è¡¨ç¤ºå½“å‰å€¼ï¼Œdone è¡¨ç¤ºéå†æ˜¯å¦ç»“æŸã€‚ æ ¹æ®ä¸Šé¢çš„è§„åˆ™ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè¿­ä»£å™¨çš„å·¥å‚ï¼š function createIterator(items)&#123; var i = 0 return &#123; next() &#123; var done = i &gt;= items.length var value = !done ? items[i++] : undefined return &#123; value, done &#125; &#125; &#125;&#125;var iterator = createIterator([1, 2, 'bar'])console.log(iterator.next()) // &#123;value: 1, done: false&#125;console.log(iterator.next()) // &#123;value: 2, done: false&#125;console.log(iterator.next()) // &#123;value: \"bar\", done: false&#125; for of é™¤äº†è¿­ä»£å™¨ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå¯ä»¥éå†è¿­ä»£å™¨å¯¹è±¡çš„æ–¹å¼ï¼ŒES6 æä¾›äº† for (var value of iterator) è¯­å¥ã€‚ æˆ‘ä»¬å…ˆè¯•ç€éå†å‰é¢è‡ªå·±å†™çš„è¿­ä»£å™¨å¯¹è±¡ï¼š var iterator = createIterator([1, 2, 'bar'])for (var value of iterator) &#123; console.log(value)&#125;// Uncaught TypeError: iterator is not iterable æˆ‘ä»¬å†™çš„è¿­ä»£å™¨å¯¹è±¡ç«Ÿç„¶ä¸èƒ½è¢«è¿­ä»£!?? å…¶å®æˆ‘ä»¬è¿˜å·®ä¸€æ­¥ï¼Œå› ä¸º for(A of B) è¯­å¥å…¶å®æ˜¯é€šè¿‡è°ƒç”¨å¯¹è±¡ B çš„ Symbol.iterator æ–¹æ³•æ¥è·å–è¿­ä»£å™¨ï¼Œéšåè°ƒç”¨è¿­ä»£å™¨çš„ next() æ–¹æ³•ï¼Œå°†å…¶è¿”å›çš„ç»“æœå¯¹è±¡çš„ value å±æ€§èµ‹ç»™å˜é‡ Aã€‚ æ‰€ä»¥ï¼š var b = &#123;&#125;b[Symbol.iterator] = function() &#123; return createIterator([1, 2, 'bar'])&#125;for (var a of b) &#123; console.log(a)&#125;// 1// 2// bar é»˜è®¤å¯è¿­ä»£å¯¹è±¡æˆ‘ä»¬è¯•è¯•ç›´æ¥ç”¨ for of éå†æ•°ç»„ var arr = ['a', 'b', 'c']for (var v of arr) &#123; console.log(arr)&#125;// a// b// c å°½ç®¡æˆ‘ä»¬æ²¡æœ‰æ‰‹åŠ¨å»æ·»åŠ  arr çš„ â€˜Symbol.iteratorâ€™ å±æ€§ï¼Œä½†æ˜¯è¿˜æ˜¯å¯ä»¥éå†ï¼Œè¿™æ˜¯å› ä¸º ES6 ä¸ºæ•°ç»„é»˜è®¤éƒ¨ç½²äº† Symbol.iterator ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é‡å†™è¿™ä¸ªæ–¹æ³•ã€‚ var arr = ['a', 'b', 'c']arr[Symbol.iterator] = function() &#123; return createIterator(['aa', 'bb', 'cc'])&#125;for (var v of arr) &#123; console.log(v)&#125;// aa// bb// cc é™¤äº†æ•°ç»„å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ•°æ®ç»“æ„é»˜è®¤éƒ¨ç½²äº† Symbol.iterator å±æ€§ã€‚ é»˜è®¤å¯ä»¥è¿­ä»£çš„å¯¹è±¡ï¼š æ•°ç»„ å­—ç¬¦ä¸² Set Map ç±»æ•°ç»„å¯¹è±¡ï¼Œå¦‚ argumentsï¼ŒDOM é‡Œçš„ NodeList Generator å¯¹è±¡ ç®­å¤´å‡½æ•°(å‚æ•°) =&gt; {å‡½æ•°ä½“}// åªæœ‰ä¸€ä¸ªå‚æ•°å¯ä»¥ä¸å†™ ()x =&gt; &#123;console.log(x)&#125;// å‡½æ•°ä½“ä¸­åªæœ‰ä¸€æ¡è¯­å¥å¯ä»¥ä¸å†™ &#123;&#125; ï¼Œè¯¥æ¡è¯­å¥çš„ç»“æœä¼šä½œä¸ºå‡½æ•°çš„è¿”å›å€¼var foo = x =&gt; x*xconsole.log(foo(2)) // 4 å†…éƒ¨ä¸ç»‘å®š this ï¼Œè®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„ this ã€‚ä¹Ÿå°±æ˜¯è¯´ç®­å¤´å‡½æ•°ä¸­çš„ this åœ¨ç®­å¤´å‡½æ•°å®šä¹‰æ—¶å°±å·²ç»ç¡®å®šäº†ã€‚ å†…éƒ¨æ²¡ç”± arguments ä¸èƒ½ä½œä¸ºæ„é€ å‡½æ•° ä¸èƒ½ä½œä¸ºç”Ÿæˆå™¨å‡½æ•° Seté›†åˆï¼šç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ï¼Œå¹¶ä¸”æ— åºã€‚Set() æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡åˆå§‹åŒ–é»˜è®¤å€¼ æ•°ç»„å»é‡ï¼š var arr = [1, 2, 3, 1, 2]arr = [...new Set(arr)]console.log(arr) // [1, 2, 3] Mapæ˜ å°„ï¼šç±»ä¼¼äºå¯¹è±¡ï¼Œä½†æ˜¯ key å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å€¼ï¼Œè€Œä¸ä»…ä»…å±€é™äºå­—ç¬¦ä¸²ã€‚ WeakMapç±»ä¼¼ Map ï¼Œä½† key å¿…é¡»æ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹ key è¿™ä¸ªå¯¹è±¡æ˜¯å¼±å¼•ç”¨çš„(GC æœºåˆ¶ä¼šå›æ”¶åªæœ‰å¼±å¼•ç”¨æˆ–æ²¡æœ‰å¼•ç”¨çš„å¯¹è±¡)ã€‚ å¯ä»¥ä¼˜åŒ–ç±»ä¸­ç§æœ‰åŒ–å±æ€§ä½¿ç”¨ Map é€ æˆçš„å¼ºå¼•ç”¨ä¸èƒ½é‡Šæ”¾é—®é¢˜ã€‚ classclass Person &#123; constructor(name, age) &#123; this.name = name this.age = age &#125; sayHi() &#123; console.log(this.name + ': Hi~') &#125;&#125;var p = new Person('å¼ ä¸‰', 23)console.log(p) // Person &#123;name: \"å¼ ä¸‰\", age: 23&#125;p.sayHi() // å¼ ä¸‰: Hi~ class çš„ç»§æ‰¿å†™æ³•ï¼š class Student extends Person &#123; constructor(name, gender) &#123; super(name) // å­ç±»æœ‰ constructor å°±å¿…é¡»è¦æœ‰ super() ä¸ç„¶æŠ¥é”™ this.gender = gender &#125;&#125;var s = new Student('å°æ˜', 'ç”·')console.log(s) // Student &#123;name: \"å°æ˜\", age: undefined, gender: \"ç”·\"&#125;s.sayHi() // å°æ˜: Hi~","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"},{"name":"ECMAScript6","slug":"ECMAScript6","permalink":"inknight.cn/tags/ECMAScript6/"}]},{"title":"this æŒ‡å‘","slug":"this","date":"2019-03-21T02:31:44.000Z","updated":"2019-05-10T01:01:15.290Z","comments":true,"path":"2019/03/21/this/","link":"","permalink":"inknight.cn/2019/03/21/this/","excerpt":"this çš„æŒ‡å‘ï¼Œapplyã€bindã€call ä¸€èµ·æå®š~","text":"this çš„æŒ‡å‘ï¼Œapplyã€bindã€call ä¸€èµ·æå®š~ thisthis æ˜¯åœ¨æ‰§è¡Œå‡½æ•°æ—¶ï¼Œåˆ›å»ºçš„ä¸Šä¸‹æ–‡å¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒä»£è¡¨è¯¥å‡½æ•°çš„è°ƒç”¨è€…ã€‚æ‰€ä»¥ this ä¸€èˆ¬æ˜¯åœ¨å‡½æ•°æ‰§è¡Œæ—¶ç¡®å®šçš„ã€‚ this æŒ‡å‘çš„æ˜¯è°ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¯·è®°ä½ â€œè°è°ƒç”¨æˆ‘ï¼Œæˆ‘å°±ä»£è¡¨è°â€œã€‚è°è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä¸­çš„ this å°±æŒ‡å‘è°ã€‚ var name = 'window'function foo() &#123; var name = 'foo' console.log(this.name)&#125;foo() // 'window' æ‰§è¡Œ foo() ç›¸å½“äºæ‰§è¡Œ window.foo()(éä¸¥æ ¼æ¨¡å¼) ä¹Ÿå°±æ˜¯ window è°ƒç”¨äº† foo å‡½æ•°ï¼Œæ‰€ä»¥ foo å‡½æ•°ä½“å†…çš„ this æŒ‡å‘çš„å°±æ˜¯ window å¯¹è±¡ã€‚å½“ç„¶å¦‚æœæ˜¯åœ¨ Node.js ç¯å¢ƒä¸‹ï¼Œä¸Šè¿° this æŒ‡å‘çš„å°±æ˜¯ globle å¯¹è±¡äº†ã€‚ åŒ¿åå‡½æ•°ä¸­çš„ this ä¹Ÿæ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡çš„ã€‚ å†çœ‹ä¸ªä¾‹å­ï¼švar name = 'window'var a = &#123; name: 'a', foo: function() &#123; console.log(this.name) &#125;&#125;a.foo() // 'a'var foo2 = a.foofoo2() // 'window' æ”¹å˜ this çš„æŒ‡å‘new å®ä¾‹åŒ–å¯¹è±¡ã€‚new è¿ç®—ç¬¦åšäº†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå°†æ„é€ å‡½æ•°çš„ this æŒ‡å‘è¯¥å¯¹è±¡ï¼Œæ‰§è¡Œæ„é€ å‡½æ•°ä»£ç ï¼Œå¦‚æœå‡½æ•°æ‰§è¡Œç»“æœè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå°±å°†è¿™ä¸ªå¯¹è±¡è¿”å›ï¼Œå¦åˆ™è¿”å›åˆ›å»ºçš„å¯¹è±¡ã€‚ function User(name) &#123; this.name = name&#125;var a = new User('å°a') _this = thisvar name = 'window'var a = &#123; name: 'a', foo: function() &#123; setTimeout(function() &#123; console.log(this.name) &#125;, 0) &#125;, foo2: function() &#123; var _this = this setTimeout(function()&#123; console.log(_this.name) &#125;, 0) &#125;&#125;a.foo() // 'window'a.foo2() // 'a' applyã€callã€bindapply ä¸ call å·®ä¸å¤šï¼Œä¸»è¦æ˜¯ä¼ å‚ä¸åŒï¼Œéƒ½æ˜¯å°† this æ”¹å˜å¹¶æ‰§è¡Œå‡½æ•°ï¼Œè€Œ bind æ˜¯å°†å‡½æ•°è¿”å›ä½†æ²¡æ‰§è¡Œã€‚ var name = 'window'var a = &#123; name: 'a', foo: function(x, y) &#123; console.log(this.name + x + y) &#125;&#125;a.foo.call(this, 1, 2) // 'window12'a.foo.apply(this, [1, 2]) // 'window12'var foo2 = a.foo.bind(this, 1, 2)foo2() // 'window12' ç®­å¤´å‡½æ•°ç®­å¤´å‡½æ•°ä¸ç»‘å®š thisï¼Œæ²¡æœ‰è‡ªå·±çš„ this ï¼Œå¿…é¡»é€šè¿‡ä½œç”¨åŸŸé“¾å†³å®šå…¶å€¼ã€‚ä¹Ÿå°±æ˜¯ç®­å¤´å‡½æ•°ä¸­çš„ this å°±æ˜¯çˆ¶çº§ä½œç”¨åŸŸä¸­çš„ this var name = 'window'var a = &#123; name: 'a', foo: () =&gt; &#123; console.log(this.name) &#125;, foo2: function() &#123; setTimeout(()=&gt;&#123; console.log(this.name) &#125;, 0) &#125;&#125;a.foo() // 'window'a.foo2() // 'a'","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"}]},{"title":"JavaScriptä¸­çš„ä½œç”¨åŸŸã€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸é—­åŒ…","slug":"JavaScriptä¸­çš„ä½œç”¨åŸŸä¸é—­åŒ…","date":"2019-03-18T00:34:44.000Z","updated":"2019-04-10T02:41:02.478Z","comments":true,"path":"2019/03/18/JavaScriptä¸­çš„ä½œç”¨åŸŸä¸é—­åŒ…/","link":"","permalink":"inknight.cn/2019/03/18/JavaScriptä¸­çš„ä½œç”¨åŸŸä¸é—­åŒ…/","excerpt":"JavaScript ä»£ç çš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œä»£ç ç¼–è¯‘é˜¶æ®µä¸ä»£ç æ‰§è¡Œé˜¶æ®µã€‚ç¼–è¯‘é˜¶æ®µç”±ç¼–è¯‘å™¨å®Œæˆï¼Œå°†ä»£ç ç¿»è¯‘æˆå¯æ‰§è¡Œä»£ç ï¼Œè¿™ä¸ªé˜¶æ®µä½œç”¨åŸŸè§„åˆ™ä¼šç¡®å®šã€‚æ‰§è¡Œé˜¶æ®µç”±å¼•æ“å®Œæˆï¼Œä¸»è¦ä»»åŠ¡æ˜¯æ‰§è¡Œå¯æ‰§è¡Œä»£ç ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡åœ¨è¿™ä¸ªé˜¶æ®µåˆ›å»ºã€‚","text":"JavaScript ä»£ç çš„æ•´ä¸ªæ‰§è¡Œè¿‡ç¨‹ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œä»£ç ç¼–è¯‘é˜¶æ®µä¸ä»£ç æ‰§è¡Œé˜¶æ®µã€‚ç¼–è¯‘é˜¶æ®µç”±ç¼–è¯‘å™¨å®Œæˆï¼Œå°†ä»£ç ç¿»è¯‘æˆå¯æ‰§è¡Œä»£ç ï¼Œè¿™ä¸ªé˜¶æ®µä½œç”¨åŸŸè§„åˆ™ä¼šç¡®å®šã€‚æ‰§è¡Œé˜¶æ®µç”±å¼•æ“å®Œæˆï¼Œä¸»è¦ä»»åŠ¡æ˜¯æ‰§è¡Œå¯æ‰§è¡Œä»£ç ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡åœ¨è¿™ä¸ªé˜¶æ®µåˆ›å»ºã€‚ ä½œç”¨åŸŸ (Scope)ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸä½œç”¨åŸŸæ˜¯å®šä¹‰å˜é‡çš„åŒºåŸŸã€‚ å®ƒè§„å®šäº†æ‰§è¡Œä»£ç æ—¶æŸ¥æ‰¾å˜é‡çš„èŒƒå›´ï¼Œä¹Ÿå°±æ˜¯å˜é‡çš„ä½œç”¨èŒƒå›´ã€‚ JavaScript é‡‡ç”¨è¯æ³•ä½œç”¨åŸŸ(lexical scoping)ï¼Œä¹Ÿå°±æ˜¯é™æ€ä½œç”¨åŸŸã€‚ å› ä¸º JavaScript é‡‡ç”¨çš„æ˜¯è¯æ³•ä½œç”¨åŸŸï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ã€‚ var a = 1function foo1() &#123; console.log(a)&#125;function foo2() &#123; var a = 2 foo1()&#125;foo2() // 1 åœ¨ JavaScript ä¸­æ— å—çº§ä½œç”¨åŸŸ(ä¸€å¯¹å„¿ { } åŒ…å«çš„åŒºåŸŸ )ï¼Œåªæœ‰å…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸã€‚ if (true) &#123; var name = 'abc'&#125;console.log(name) // 'abc' åŒä¸€ä¸ªé¡µé¢ä¸­æ‰€æœ‰çš„ &lt;script&gt; æ ‡ç­¾ä¸­çš„æ²¡åœ¨å‡½æ•°ä½“å†…çš„å˜é‡ï¼Œéƒ½åœ¨åŒä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸä¸­ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡ (Execution context)ä»€ä¹ˆæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ æ‰§è¡Œä¸Šä¸‹æ–‡å¯ä»¥æŠ½è±¡æˆä¸€ä¸ªå¯¹è±¡ï¼Œå½“ä¸€ä¸ªå‡½æ•°æ‰§è¡Œæ—¶å°±ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œéƒ½æœ‰ä¸‰ä¸ªå±æ€§ï¼š å˜é‡å¯¹è±¡(Variable object, VO) ä½œç”¨åŸŸé“¾(Scope chain) this æ—¢ç„¶æ¯æ‰§è¡Œä¸€ä¸ªå‡½æ•°å°±ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å†™çš„å‡½æ•°å¯ä¸æ­¢ä¸€ä¸ªï¼Œé‚£ä¹ˆå¦‚ä½•ç®¡ç†ä¼—å¤šçš„ä¸Šä¸‹æ–‡å‘¢ï¼Ÿ JavaScript å¼•æ“åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(Execution context stack, ECS) æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ JavaScript å¼•æ“åœ¨æ‰§è¡Œä»£ç æ—¶ï¼Œæœ€å…ˆé‡åˆ°çš„æ˜¯å…¨å±€ä»£ç ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡(globalContext)å¹¶å°†ä¹‹å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(ECS)ä¸­ï¼Œå½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•°ä¸Šä¸‹æ–‡å¹¶å‹å…¥ ECS ä¸­ã€‚å‡½æ•°æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¸Šä¸‹æ–‡ä¼šå‡ºæ ˆå¹¶è¢«æ¸…ç†ã€‚å½“æ•´ä¸ªç¨‹åºæ‰§è¡Œå®Œæ¯•æ—¶ï¼ŒglobalContext ä¹Ÿä¼šå‡ºæ ˆå¹¶è¢«æ¸…ç†ã€‚ çœ‹ä¸€ä¸ªä¾‹å­ï¼š function fun1() &#123; fun2()&#125;function fun2() &#123; console.log('fun2')&#125;fun1() å½“ JavaScript å¼•æ“æ‰§è¡Œä»£ç æ—¶ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡(globalContext) å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(ECS)ä¸­ã€‚ å½“æ‰§è¡Œåˆ° fun1() æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªå‡½æ•°ä¸Šä¸‹æ–‡(EC_fun1)å¹¶å‹å…¥æ ˆä¸­ã€‚ ç„¶åæ‰§è¡Œ fun1 å‡½æ•°ä½“é‡Œçš„ fun2()ï¼Œåˆ›å»º EC_fun2å¹¶å‹å…¥æ ˆä¸­ã€‚ æ‰§è¡Œ fun2 å‡½æ•°é‡Œçš„ console.log() å‡½æ•°ï¼Œåˆ›å»º EC_consolelog å‹å…¥æ ˆä¸­ã€‚ ç„¶å console.log æ‰§è¡Œå®Œæ¯•ï¼ŒEC_consolelog å‡ºæ ˆå¹¶é”€æ¯ã€‚ ç„¶å fun2 æ‰§è¡Œå®Œæ¯•ï¼ŒEC_fun2 å‡ºæ ˆå¹¶é”€æ¯ã€‚ fun1 æ‰§è¡Œå®Œæ¯•ï¼ŒEC_fun1 å‡ºæ ˆå¹¶é”€æ¯ã€‚ å˜é‡å¯¹è±¡ (Variable object, VO) å˜é‡å¯¹è±¡æ˜¯ä¸æ‰§è¡Œä¸Šä¸‹æ–‡ç›¸å…³çš„æ•°æ®ä½œç”¨åŸŸï¼Œå®ƒå­˜å‚¨äº†åœ¨è¯¥ä¸Šä¸‹æ–‡å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜ã€‚å˜é‡å¯¹è±¡æ˜¯åœ¨åˆ›å»ºå‡½æ•°ä¸Šä¸‹æ–‡æ—¶åˆ›å»ºçš„ï¼Œå®ƒé€šè¿‡å‡½æ•°çš„ arguments å±æ€§åˆè¯†åŒ–ã€‚ å˜é‡å¯¹è±¡åŒ…æ‹¬ï¼š å‡½æ•°çš„æ‰€æœ‰å½¢å‚(å¦‚æœæ˜¯å‡½æ•°ä¸Šä¸‹æ–‡) ç”±åç§°å’Œå¯¹åº”å€¼ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡(VO)çš„å±æ€§ å‡½æ•°å£°æ˜ ç”±åç§°å’Œå¯¹åº”å€¼(å‡½æ•°å¯¹è±¡)ç»„æˆä¸€ä¸ªå˜é‡å¯¹è±¡(VO)çš„å±æ€§ å¦‚æœ VO å·²å­˜åœ¨ç›¸åŒçš„åç§°å±æ€§ï¼Œåˆ™æ›¿æ¢è¿™ä¸ªå±æ€§ å˜é‡å£°æ˜ ç”±åç§°å’Œ undefined ç»„æˆä¸€ä¸ª VO çš„å±æ€§ å¦‚æœåç§°å’Œå·²ç»å£°æ˜çš„å½¢å‚æˆ–å‡½æ•°ç›¸åŒï¼Œå˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²å­˜åœ¨çš„è¿™ç±»å±æ€§ ä¸¾ä¸ªä¾‹å­ï¼š function foo(a) &#123; var b = 2 var a = 10 function c() &#123;&#125; var d = function() &#123;&#125;&#125;foo(11) åœ¨æ‰§è¡Œ foo(11)æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ­¤æ—¶æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ—¶ï¼š VO = &#123; arguments: &#123; 0: 11, length: 1 &#125;, a: 11, b: undefined, c: reference to function c() &#123;&#125;, d: undefined&#125; å…¨å±€å¯¹è±¡ å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡å°±æ˜¯å…¨å±€å¯¹è±¡ã€‚ å…¨å±€ä¸Šä¸‹æ–‡çš„ this æŒ‡å‘çš„æ˜¯å…¨å±€å¯¹è±¡ã€‚ åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹å…¨å±€å¯¹è±¡æ˜¯ window ï¼ŒNode.js ç¯å¢ƒä¸‹å…¨å±€å¯¹è±¡æ˜¯ global ã€‚ æ´»åŠ¨å¯¹è±¡ (Activation objectï¼ŒAO)æ´»åŠ¨å¯¹è±¡ä¸å˜é‡å¯¹è±¡å…¶å®æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œåªæœ‰å½“è¿›å…¥ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­(è¿™ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡å¤„åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„æ ˆé¡¶)ï¼Œè¿™ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡(VO)æ‰ä¼šè¢«æ¿€æ´»ï¼Œæ­¤æ—¶è¿™ä¸ªå˜é‡å¯¹è±¡å«åšæ´»åŠ¨å¯¹è±¡(AO)ã€‚åªæœ‰æ´»åŠ¨å¯¹è±¡ä¸Šçš„å„ç§å±æ€§æ‰èƒ½è¢«è®¿é—®ã€‚ ä½œç”¨åŸŸé“¾ (Scope chain) å½“æŸ¥æ‰¾å˜é‡æ—¶ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡(ä¹Ÿæ˜¯æ´»åŠ¨å¯¹è±¡)ä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±ä¼šä»çˆ¶çº§(è¯æ³•å±‚é¢ä¸Šçš„çˆ¶çº§)æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­æŸ¥æ‰¾ï¼Œä¸€ç›´æ‰¾åˆ°å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡(ä¹Ÿæ˜¯å…¨å±€å¯¹è±¡)ã€‚è¿™æ ·ç”±å¤šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ„æˆçš„é“¾è¡¨å°±å«åšä½œç”¨åŸŸé“¾ã€‚ å‡½æ•°å®šä¹‰æ—¶ï¼Œæœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§ [[scope]] ä¿å­˜äº†æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡ã€‚å½“å‡½æ•°æ‰§è¡Œæ—¶ä¼šåˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸé“¾ï¼Œè¿™ä¸ªä½œç”¨åŸŸé“¾åŒ…å«äº†å‡½æ•°çš„ [[scope]] å±æ€§å’Œæ‰§è¡Œä¸Šä¸‹æ–‡çš„æ´»åŠ¨å¯¹è±¡(AO)ã€‚ var a = 1var b = 1function foo() &#123; var b = 2 return a + b&#125;foo() // 3 æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š foo å‡½æ•°è¢«åˆ›å»ºï¼Œfoo ä¼šå°†çˆ¶å˜é‡å¯¹è±¡(å…¶å®æ˜¯å½“å‰æ´»åŠ¨å¯¹è±¡ä¹Ÿæ˜¯å…¨å±€å¯¹è±¡)ä¿å­˜åœ¨ [[scope]] å±æ€§ä¸­ã€‚ foo.[[scope]] = [globalContext.VO] æ‰§è¡Œ foo å‡½æ•°ï¼Œåˆ›å»º foo å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å¹¶å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ(ECS)ä¸­ã€‚ ECS = [ fooContext, globalContext] foo å‡½æ•°å¹¶ä¸ç«‹åˆ»æ‰§è¡Œï¼Œéœ€è¦ä¸€äº›å‡†å¤‡å·¥ä½œï¼Œç¬¬ä¸€æ­¥ï¼šå¤åˆ¶å‡½æ•°çš„ [[scope]] å±æ€§åˆ°åˆ›å»ºçš„ä½œç”¨åŸŸé“¾(Scope)ä¸­ fooContext = &#123; Scope: foo.[[scope]]&#125; ç¬¬äºŒæ­¥ï¼šåˆ›å»ºæ´»åŠ¨å¯¹è±¡å¹¶ç”¨å‡½æ•°çš„ arguments å±æ€§åˆå§‹åŒ– fooContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125;, b: undefined &#125;, Scope: [ foo.[[scope]] ]&#125; ç¬¬ä¸‰æ­¥ï¼šå°†æ´»åŠ¨å¯¹è±¡å‹å…¥ ä½œç”¨åŸŸé“¾é¡¶ç«¯ fooContext = &#123; AO: &#123; arguments: &#123; length: 0 &#125;, b: undefined &#125;, Scope: [ AO, foo.[[scope]] ]&#125; å‡†å¤‡å·¥ä½œåšå®Œï¼Œå¼€å§‹æ‰§è¡Œ foo å‡½æ•°é‡Œçš„ä»£ç ï¼Œæ›´æ–° AO çš„å±æ€§å€¼ AO:&#123; arguments: &#123; length: 0 &#125;, b: 2&#125; foo æ‰§è¡Œå®Œæ¯•ï¼Œfoo å‡½æ•°ä¸Šä¸‹æ–‡å‡ºæ ˆå¹¶é”€æ¯ ECS = [ globalContext ] é—­åŒ…ä»€ä¹ˆæ˜¯é—­åŒ…MDN å¯¹é—­åŒ…çš„å®šä¹‰ä¸ºï¼š é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®è‡ªç”±å˜é‡çš„å‡½æ•°ã€‚ é‚£ä»€ä¹ˆæ˜¯è‡ªç”±å˜é‡å‘¢ï¼Ÿ è‡ªç”±å˜é‡æ˜¯æŒ‡åœ¨å‡½æ•°ä¸­ä½¿ç”¨çš„å˜é‡ï¼Œä½†æ—¢ä¸æ˜¯å‡½æ•°å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°å±€éƒ¨å˜é‡ã€‚ è‡ªç”±å˜é‡å…¶å®æ˜¯æŒ‡å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ä¸­éæ´»åŠ¨å¯¹è±¡çš„é‚£éƒ¨åˆ†å±æ€§(ä¹Ÿå°±æ˜¯å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡ å‡½æ•°.[[scope]]) æ‰€ä»¥åœ¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ä¸­ã€‹æ˜¯è¿™æ ·æè¿°çš„ï¼š é—­åŒ…æ˜¯æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡çš„å‡½æ•°ã€‚ var a = 1function foo() &#123; console.log(a)&#125;foo() foo å‡½æ•°å¯ä»¥è®¿é—®å˜é‡aï¼Œä½† a æ—¢ä¸æ˜¯å‡½æ•°å‚æ•°ä¹Ÿä¸æ˜¯å‡½æ•°çš„å±€éƒ¨å˜é‡ï¼Œa å°±æ˜¯è‡ªç”±å˜é‡ã€‚é‚£ä¹ˆï¼Œfoo å‡½æ•°å°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚ åˆ°è¿™é‡Œï¼Œä½ æˆ–è®¸ä¼šæœ‰ç–‘é—® è¿™æ€ä¹ˆå’Œæˆ‘ä»¬å¹³æ—¶çŸ¥é“çš„é—­åŒ…ä¸æ˜¯åŒä¸€ä¸ªï¼Œä¸æ˜¯ä»€ä¹ˆå‡½æ•°ä¸­åµŒå¥—ä¸€ä¸ªå‡½æ•°ï¼Œé‡Œé¢çš„å‡½æ•°æ‰æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œè¿™é‡Œæ€ä¹ˆæ²¡æœ‰åµŒå¥—å‡½æ•°äº†ï¼Ÿ å…¶å®æ˜¯ç«™çš„è§’åº¦ä¸åŒï¼š ä»ç†è®ºè§’åº¦ï¼šæ‰€æœ‰å‡½æ•°éƒ½æ˜¯é—­åŒ…ã€‚å› ä¸ºä»–ä»¬éƒ½åœ¨åˆ›å»ºæ—¶å°±å°†ä¸Šå±‚æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ•°æ®ä¿å­˜èµ·æ¥äº†(å‡½æ•°çš„ [[scope]] å±æ€§)ã€‚æ‰€ä»¥åœ¨å‡½æ•°ä¸­å¯ä»¥ä½œç”¨åŸŸé“¾è®¿é—®åˆ°å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è®¿é—®è‡ªç”±å˜é‡ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚ ä»å®é™…è§’åº¦ï¼šä»¥ä¸‹æ‰æ˜¯é—­åŒ…ï¼š å³ä½¿åˆ›å»ºå®ƒçš„ä¸Šä¸‹æ–‡å·²ç»é”€æ¯ï¼Œä½†å®ƒä¾ç„¶å­˜åœ¨(æ¯”å¦‚ï¼Œå†…éƒ¨å‡½æ•°ä»çˆ¶å‡½æ•°ä¸­è¿”å›) åœ¨ä»£ç ä¸­å¼•ç”¨äº†è‡ªç”±å˜é‡ ä¸¾ä¸ªä¾‹å­ï¼šfunction foo() &#123; var a = 0 return function add() &#123; console.log(a++) &#125;&#125;var add1 = foo()var add2 = foo()add1() // 0add1() // 1add1() // 2add2() // 0add2() // 1 foo() å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œfooå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å·²ç»è¢«é”€æ¯ï¼Œé‚£ä¹ˆä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ä¸­çš„ a å˜é‡åº”è¯¥ä¹Ÿè¢«é”€æ¯äº†å•Šï¼Œé—®å•¥è¿˜èƒ½è®¿é—®åˆ°ï¼Ÿ å› ä¸º add å‡½æ•°åœ¨å®šä¹‰æ—¶å°±å­˜åœ¨ä¸€ä¸ª [[scope]] å±æ€§ï¼Œå®ƒä¿å­˜äº† foo å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼Œåœ¨æ‰§è¡Œ add å‡½æ•°æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡é“¾å¹¶å°† add.[[scope]] å¤åˆ¶åˆ°è¯¥æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸé“¾ä¸­ï¼Œæ‰€ä»¥åœ¨ add å‡½æ•°ä¸­å¯ä»¥é€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—®åˆ° a å±æ€§ã€‚ ä½ å¯èƒ½è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆ add1() å’Œ add2() è®¿é—®çš„ä¸æ˜¯åŒä¸€ä¸ª a ï¼Ÿå› ä¸ºæ¯æ‰§è¡Œä¸€æ¬¡å‡½æ•°å°±ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥æ‰§è¡Œ add1 = foo() å’Œ add2 = foo() äº§ç”Ÿçš„æ˜¯ä¸åŒçš„æ‰§è¡Œä¸Šä¸‹æ–‡(å¯¹è±¡)ï¼Œä»–ä»¬çš„ a å±æ€§å½“ç„¶ä¸åŒäº†ã€‚ é—­åŒ…çš„é¢è¯•é¢˜ ç»å…¸é¢è¯•é¢˜ï¼Œä½¿ç”¨é—­åŒ…è§£å†³ for å¾ªç¯ä¸­ var å¼‚æ­¥æ‰“å° i å€¼çš„é—®é¢˜ for (var i = 0; i &lt; 5 ; i++) &#123; setTimeout(function foo() &#123; console.log(i) &#125;,1000 * i)&#125; ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœæ˜¯ï¼š5 5 5 5 5ã€‚ è¿™é‡Œé¢æ¶‰åŠåˆ°äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œè¿™é‡Œå°±ä¸å¤šèµ˜è¿°ï¼Œç®€å•çš„è¯´å°±æ˜¯ç­‰ for å¾ªç¯ç»“æŸåï¼Œæ‰å¼€å§‹ä¾æ¬¡æ‰§è¡Œè¿™å‡ ä¸ª setTimeout() é‡Œé¢çš„ foo å‡½æ•°ã€‚ JS æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ­¤æ—¶çš„ i å€¼ä¸º 5 ï¼Œconsole.log(i) è®¿é—®çš„å°±æ˜¯å…¨å±€å˜é‡ i ï¼Œæ‰€ä»¥æ‰“å° 5ã€‚ æˆ‘ä»¬è¦åšå°±æ˜¯ä½¿ç”¨é—­åŒ…çš„ç‰¹æ€§ï¼Œè®© console.log(i) è®¿é—®çš„ä¸æ˜¯å…¨å±€å˜é‡ i for (var i = 0; i &lt; 5 ; i++) &#123; ;(function(i) &#123; setTimeout(function foo() &#123; console.log(i) &#125;,1000 * i) &#125;)(i)&#125; æˆ–è€…è¿™æ ·ï¼šfor (var i = 0; i &lt; 5 ; i++) &#123; setTimeout((function foo(i) &#123; return function() &#123; console.log(i) &#125; &#125;)(i),1000 * i)&#125; ä¹Ÿå¯ä»¥ä½¿ç”¨ ES6 ä¸­çš„ let æ¢æ‰ varï¼Œä½¿å¾— for å¾ªç¯ä¸­ i æˆä¸ºä¸€ä¸ªå—çº§ä½œç”¨åŸŸçš„æœ¬åœ°å˜é‡ã€‚ for (let i = 0; i &lt; 5 ; i++) &#123; setTimeout(function foo() &#123; console.log(i) &#125;,1000 * i)&#125; é—­åŒ…çš„ä¼˜ç¼ºç‚¹é—­åŒ…å¯ä»¥åˆ›å»ºç§æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ var singel = (function () &#123; // ç§æœ‰å±æ€§ï¼Œå¤–éƒ¨è®¿é—®ä¸åˆ° var age = 20 function foo() &#123; console.log('foo') &#125; return &#123; // å…¬æœ‰å±æ€§ name: 'Tom', getAge: function() &#123; return age &#125;, setAge: function(n) &#123; age = n &#125; &#125;&#125;)()console.log(singel.age) // undefinedsingel.foo() // Uncaught TypeError: singel.foo is not a functionconsole.log(singel.getAge()) // 20singel.setAge(10) console.log(singel.getAge()) // 10 å•ä¾‹ï¼šæŒ‡çš„æ˜¯åªæœ‰ä¸€ä¸ªå®ä¾‹çš„å¯¹è±¡ã€‚JavaScript ä¸€èˆ¬ä»¥å­—é¢é‡çš„æ–¹å¼æ¥åˆ›å»ºå•ä¾‹ã€‚ åŒ¿åå‡½æ•°æœ€å¤§çš„ç”¨é€”å°±æ˜¯åˆ›å»ºé—­åŒ…ã€‚å¹¶ä¸”è¿˜å¯ä»¥æ„å»ºå‘½åç©ºé—´ï¼Œå‡å°‘å…¨å±€å˜é‡çš„æ±¡æŸ“ã€‚ é€šè¿‡åŒ¿åå‡½æ•°å®ç°ä¸€ä¸ªé—­åŒ…è®¡æ•°å™¨ï¼švar numberCounter = (function() &#123; var num = 0 return function() &#123; return ++num &#125;&#125;)() é—­åŒ…çš„ç¼ºé™·ï¼š é—­åŒ…æ‰€è®¿é—®çš„è‡ªç”±å˜é‡ä¼šå¸¸é©»å†…å­˜å¢å¤§å†…å­˜çš„ä½¿ç”¨é‡ï¼Œå› æ­¤é—­åŒ…æ»¥ç”¨ä¼šé€ æˆç½‘é¡µæ€§èƒ½é—®é¢˜ã€‚åœ¨è€ç‰ˆæœ¬æµè§ˆå™¨ä¸­ç”±äºåƒåœ¾å›æ”¶æœ‰é—®é¢˜å¯¼è‡´å†…å­˜æ³„æ¼ã€‚æ­£å¸¸ä½¿ç”¨é—­åŒ…ä¸ä¼šå¯¼è‡´å†…å­˜æ³„æ¼ã€‚ æ€»ç»“ ä½œç”¨åŸŸæ˜¯å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œè§„å®šäº†å˜é‡çš„è®¿é—®èŒƒå›´ï¼Œå®ƒåœ¨å‡½æ•°å®šä¹‰æ—¶ç¡®å®šã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåœ¨å‡½æ•°æ‰§è¡Œæ—¶åˆ›å»ºï¼Œå®ƒæœ‰å˜é‡å¯¹è±¡ã€ä½œç”¨åŸŸé“¾ã€this ä¸‰ä¸ªå±æ€§ã€‚ å‡½æ•°æ‰§è¡Œæ—¶ï¼Œå˜é‡å¯¹è±¡é€šè¿‡å‡½æ•°çš„ arguments å±æ€§åˆå§‹åŒ–ï¼Œå®ƒåŒ…å«å‡½æ•°çš„å‚æ•°ã€å‡½æ•°ä½“é‡Œå£°æ˜çš„å˜é‡ã€‚ å‡½æ•°æ‰§è¡Œæ—¶ï¼Œä½œç”¨åŸŸé“¾æ˜¯ç”±å‡½æ•°çš„ [[scope]] å±æ€§ä¸­çš„å˜é‡ + æ´»åŠ¨å¯¹è±¡ä¸­çš„å˜é‡ç»„æˆçš„ã€‚ é—­åŒ…æ˜¯è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡çš„å‡½æ•°ã€‚ é—­åŒ…å¯ä»¥åˆ›å»ºç§æœ‰å±æ€§å’Œæ–¹æ³•ã€‚ é—­åŒ…æ»¥ç”¨ä¼šå½±å“é¡µé¢æ€§èƒ½ã€‚","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"}]},{"title":"é›†é½ JavaScript ä¸­çš„ç»§æ‰¿æ–¹å¼","slug":"JavaScriptä¸­çš„ç»§æ‰¿","date":"2019-03-11T01:25:39.000Z","updated":"2019-05-14T01:24:03.635Z","comments":true,"path":"2019/03/11/JavaScriptä¸­çš„ç»§æ‰¿/","link":"","permalink":"inknight.cn/2019/03/11/JavaScriptä¸­çš„ç»§æ‰¿/","excerpt":"JavaScript ä¸­çš„ç»§æ‰¿æ˜¯ä»¥åŸå‹ä¸ºåŸºç¡€çš„ï¼Œæ‰€ä»¥é¦–å…ˆè¦å¼„æ˜ç™½åŸå‹ï¼Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€ŒJavaScript ä¸­çš„åŸå‹åŸæ¥æ˜¯è¿™æ ·çš„ã€é‡Œåº”è¯¥ä¼šæœ‰æ‰€è·ã€‚ ç»§æ‰¿æ˜¯ä»€ä¹ˆåœ¨ä¼ ç»Ÿé¢å‘å¯¹è±¡è¯­è¨€( c++, c#, javaâ€¦ )ä¸­ï¼Œç»§æ‰¿æ˜¯ï¼šä½¿ç”¨å·²å­˜åœ¨çš„ç±»ä½œä¸ºåŸºç¡€å»ºç«‹æ–°çš„ç±»çš„æŠ€æœ¯ã€‚æˆ‘ä»¬æŠŠå·²å­˜åœ¨çš„ç±»ç§°ä¹‹ä¸ºçˆ¶ç±»ï¼Œæ–°çš„ç±»ç§°ä¹‹ä¸ºå­ç±»ã€‚ç»§æ‰¿å¯ä»¥ä½¿å¾—å­ç±»å…·æœ‰çˆ¶ç±»çš„å„ç§å±æ€§å’Œæ–¹æ³•ï¼Œå› æ­¤å¯ä»¥é¿å…å†™é‡å¤ä»£ç æé«˜å¼€å‘æ•ˆç‡ã€‚","text":"JavaScript ä¸­çš„ç»§æ‰¿æ˜¯ä»¥åŸå‹ä¸ºåŸºç¡€çš„ï¼Œæ‰€ä»¥é¦–å…ˆè¦å¼„æ˜ç™½åŸå‹ï¼Œåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€ŒJavaScript ä¸­çš„åŸå‹åŸæ¥æ˜¯è¿™æ ·çš„ã€é‡Œåº”è¯¥ä¼šæœ‰æ‰€è·ã€‚ ç»§æ‰¿æ˜¯ä»€ä¹ˆåœ¨ä¼ ç»Ÿé¢å‘å¯¹è±¡è¯­è¨€( c++, c#, javaâ€¦ )ä¸­ï¼Œç»§æ‰¿æ˜¯ï¼šä½¿ç”¨å·²å­˜åœ¨çš„ç±»ä½œä¸ºåŸºç¡€å»ºç«‹æ–°çš„ç±»çš„æŠ€æœ¯ã€‚æˆ‘ä»¬æŠŠå·²å­˜åœ¨çš„ç±»ç§°ä¹‹ä¸ºçˆ¶ç±»ï¼Œæ–°çš„ç±»ç§°ä¹‹ä¸ºå­ç±»ã€‚ç»§æ‰¿å¯ä»¥ä½¿å¾—å­ç±»å…·æœ‰çˆ¶ç±»çš„å„ç§å±æ€§å’Œæ–¹æ³•ï¼Œå› æ­¤å¯ä»¥é¿å…å†™é‡å¤ä»£ç æé«˜å¼€å‘æ•ˆç‡ã€‚ è€Œåœ¨ JavaScript ä¸­æ˜¯æ²¡æœ‰ç±»è¿™ä¸€æ¦‚å¿µçš„ï¼Œä½†ä¸‡ç‰©çš†å¯¹è±¡ï¼ˆé™¤åŸå§‹ç±»å‹ï¼‰ï¼Œæˆ‘ä»¬ç”¨æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä»£è¡¨çˆ¶ç±»å¯¹è±¡ï¼Œæ„é€ å‡½æ•°ä½œä¸ºå­ç±»ã€‚é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„å®ä¾‹å¯¹è±¡(å­ç±»å®ä¾‹)å¯ä»¥é€šè¿‡ __proto__ è®¿é—®åˆ°çˆ¶ç±»ä¸­çš„æ–¹æ³•å’Œå±æ€§ï¼ŒåŒæ ·å®ç°ç»§æ‰¿æœºåˆ¶ã€‚ ç»§æ‰¿çš„æ–¹å¼ ç”±äº JavaScript çš„çµæ´»ï¼Œæ‰€ä»¥å®ç°ç»§æ‰¿çš„æ–¹å¼ä¹Ÿæ˜¯æœ‰å¾ˆå¤šç§çš„ï¼Œæˆ‘ä»¬å…ˆä»ç®€å•çš„å¼€å§‹ã€‚ åŸå‹é“¾ç»§æ‰¿ åŸå‹é“¾ç»§æ‰¿é¡¾åæ€ä¹‰å°±æ˜¯ä½¿ç”¨åŸå‹é“¾å®ç°ç»§æ‰¿ï¼Œæ ¸å¿ƒä¸€å¥è¯ï¼šç”¨çˆ¶ç±»çš„å®ä¾‹æ¥å……å½“å­ç±»çš„åŸå‹å¯¹è±¡ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼š function Animal(name) &#123; this.name = name // åŠ¨æ€ç±»å‹æ¨¡å¼ åˆ©ç”¨åŸå‹å…±äº«æ–¹æ³• if(this.eat !== 'function') &#123; Animal.prototype.eat = function() &#123; console.log('åƒ') &#125; &#125;&#125;function Dog(age) &#123; this.age = age&#125;// ç”¨çˆ¶ç±»çš„å®ä¾‹æ¥å……å½“å­ç±»çš„åŸå‹å¯¹è±¡Dog.prototype = new Animal('åŠ¨ç‰©')var d = new Dog(3)console.log(d.age) // 3console.log(d.name) // 'åŠ¨ç‰©'d.eat() // 'åƒ' åœ¨æµè§ˆå™¨æ§åˆ¶å°é‡Œï¼š ç”»å›¾åˆ†æä¸€æ³¢ï¼š ä½†æ˜¯åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œæˆ‘ä»¬ä¸èƒ½åœ¨å®ä¾‹ Dog å­ç±»æ—¶ä¼ é€’ name å‚æ•°çš„å€¼ã€‚ä¸èƒ½æ›´æ”¹çˆ¶ç±»çš„ name å±æ€§å€¼ã€‚å¦‚æœåŠ ä¸€æ¡ d.name = &#39;ç‹—&#39;é‚£ä¹ˆå­ç±»å±æ€§ name ä¼šå±è”½çˆ¶ç±»å±æ€§ name ï¼š æ‰€ä»¥è¿™ç§æ–¹å¼èƒ½å¤Ÿå¾ˆå¥½ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸­çš„æ–¹æ³•(æ–¹æ³•ä¸€èˆ¬ä¸ä¼šå»ä¿®æ”¹å®ƒ)ï¼Œä½†æ˜¯ä¸èƒ½å¾ˆå¥½ç»§æ‰¿çˆ¶ç±»çš„å±æ€§(å±æ€§ä¿®æ”¹ä¼šå˜æˆç»™å­ç±»å®ä¾‹èµ‹æ–°çš„å±æ€§å€¼)ã€‚ æ€»ç»“ç¼ºç‚¹ï¼šå­ç±»åœ¨æ„å»ºå®ä¾‹çš„æ—¶å€™ä¸èƒ½å‘çˆ¶ç±»ä¼ é€’å‚æ•°ï¼Œå¯¼è‡´ä¸èƒ½å¾ˆå¥½çš„ç»§æ‰¿çˆ¶ç±»çš„å±æ€§ã€‚ å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å€Ÿç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•(ä½¿ç”¨ call() æˆ– apply()) function Animal(name) &#123; this.name = name // åŠ¨æ€ç±»å‹æ¨¡å¼ åˆ©ç”¨åŸå‹å…±äº«æ–¹æ³• if(this.eat !== 'function') &#123; Animal.prototype.eat = function() &#123; console.log('åƒ') &#125; &#125;&#125;function Dog(name,age) &#123; // å€Ÿç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° Animal.call(this,name) /* å€Ÿç”¨æ„é€ å‡½æ•°Animal ç›¸å½“äºæ‰§è¡Œäº†ä»¥ä¸‹æ“ä½œï¼š this.name = name Animal.prototype.eat = function() &#123; console.log('åƒ') &#125; */ this.age = age&#125;var d = new Dog('å“ˆå£«å¥‡', 2)console.log(d.name) // 'å“ˆå£«å¥‡'console.log(d.age) // 2d.eat() // Uncaught TypeError: d.eat is not a function æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼š è¿™ç§æ–¹å¼ä¸ä¸Šç§æ–¹å¼æ°å¥½ç›¸åã€‚å­ç±»ä¸ä¼šç»§æ‰¿çˆ¶ç±»åŸå‹ä¸­çš„ä»»ä½•å±æ€§å’Œæ–¹æ³•(å³çˆ¶ç±»çš„åŸå‹ä¸ä¼šè¢«å…±äº«)ï¼Œä½†æ˜¯å®ƒå¯ä»¥åœ¨æ„å»ºå®ä¾‹æ—¶å‘çˆ¶ç±»ä¼ å‚ï¼Œå°†çˆ¶ç±»æœ¬èº«çš„å±æ€§å¸¦åˆ°å­ç±»å®ä¾‹æœ¬èº«ä¸Šã€‚ ç»„åˆç»§æ‰¿ åŸå‹é“¾ç»§æ‰¿ + å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿åŒå‰‘åˆç’§ï¼Œæ˜¯ JavaScript ä¸­æœ€å¸¸ç”¨çš„ç»§æ‰¿æ–¹å¼ã€‚ function Animal(name) &#123; this.name = name // åŠ¨æ€ç±»å‹æ¨¡å¼ åˆ©ç”¨åŸå‹å…±äº«æ–¹æ³• if(this.eat !== 'function') &#123; Animal.prototype.eat = function() &#123; console.log('åƒ') &#125; &#125;&#125;function Dog(name,age) &#123; // 1.å€Ÿç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° Animal.call(this,name) // ç¬¬ä¸€æ¬¡è°ƒç”¨ Animal this.age = age&#125;// 2.ç”¨çˆ¶ç±»å®ä¾‹å……å½“å­ç±»åŸå‹Dog.prototype = new Animal('åŠ¨ç‰©') // ç¬¬äºŒæ¬¡è°ƒç”¨ AnimalDog.prototype.constructor = Dog // æ‰‹åŠ¨æŒ‡æ˜æ„é€ å‡½æ•°var d = new Dog('å“ˆå£«å¥‡', 2)console.log(d.name) // 'å“ˆå£«å¥‡'console.log(d.age) // 2d.eat() // 'åƒ' æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼š è¿™ç§æ–¹æ³•èåˆäº†ä¸Šä¸¤ç§çš„ä¼˜ç‚¹ï¼Œä½†è¿˜æ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œç”±äºè°ƒç”¨äº†ä¸¤æ¬¡ Animal() å‡½æ•°ï¼Œå¯¼è‡´å¯¹è±¡ d æœ¬èº«å’ŒåŸå‹ä¸Šéƒ½æœ‰ name å±æ€§ï¼ŒåŸå‹ä¸Šçš„ name å±æ€§æ˜¯å¤šä½™çš„ï¼Œè¿™æ ·æ—¢æµªè´¹æ€§èƒ½åˆæµªè´¹å†…å­˜ã€‚ åŸå‹å¼ç»§æ‰¿ æ˜¯ ES5 ä¸­ Object.creat() çš„æ¨¡æ‹Ÿå®ç°ï¼Œå°†ä¼ å…¥çš„å¯¹è±¡ï¼Œä½œä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ï¼Œå¹¶æŠŠè¿™ä¸ªå¯¹è±¡è¿”å›ã€‚ function createObj(o) &#123; function F() &#123;&#125; F.prototype = o return new F()&#125;// çˆ¶ç±»å¯¹è±¡var animal = &#123; name:'åŠ¨ç‰©',eat: function() &#123; console.log('åƒ') &#125;&#125;// å­ç±»å¯¹è±¡var dog = createObj(animal)// ç­‰åŒäº var dog = Object.create(animal)dog.age = 1console.log(dog.name) // 'åŠ¨ç‰©'console.log(do.age) // 1dog.eat() // 'åƒ' æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼š è¿™ç§æ–¹å¼å’ŒåŸå‹é“¾ç»§æ‰¿çš„ä¼˜ç¼ºç‚¹ç›¸åŒï¼Œä¸èƒ½å‘çˆ¶ç±»ä¼ é€’å‚æ•°ã€‚ å¯„ç”Ÿå¼ç»§æ‰¿ åˆ©ç”¨åŸå‹å¼ç»§æ‰¿ + å·¥å‚æ¨¡å¼æ¥å°è£…å­ç±»åˆ›å»ºçš„è¿‡ç¨‹ï¼Œåœ¨åˆ›å»ºè¿‡ç¨‹ä¸­å¢å¼ºäº†å­ç±»å¯¹è±¡(æ·»åŠ äº†å±æ€§æ–¹æ³•)ã€‚ function createDog(o,age) &#123; // Object.create(o) &lt;===&gt; createObj(o) åŸå‹å¼ç»§æ‰¿ var dog = Object.create(o) dog.age = age dog.bark = function() &#123; console.log('â”—|ï½€Oâ€²|â”› å—·~~') &#125; return dog&#125;// çˆ¶ç±»å¯¹è±¡var animal = &#123; name:'åŠ¨ç‰©',eat: function() &#123; console.log('åƒ') &#125;&#125;// å­ç±»å¯¹è±¡var dog = createDog(animal,2)console.log(dog.name) // 'åŠ¨ç‰©'console.log(dog.age) // 2dog.bark() // 'â”—|ï½€Oâ€²|â”› å—·~~'dog.eat() // 'åƒ' æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼š è¿™ç§æ–¹å¼ï¼Œæ¯æ¬¡åˆ›å»ºä¸€æ¬¡å¯¹è±¡ï¼Œå°±ä¼šåˆ›å»ºä¸€è¾¹ bark() æ–¹æ³•ã€‚ å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿ + å¯„ç”Ÿå¼ç»§æ‰¿ï¼Œè¿™ç§æ–¹å¼æ˜¯è§£å†³äº†ç»„åˆç»§æ‰¿çš„é—®é¢˜(è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»çš„æ„é€ å‡½æ•°)ï¼Œå®ƒæ˜¯æœ€ä½³çš„ç»§æ‰¿æ–¹å¼ã€‚ function Animal(name) &#123; this.name = name // åŠ¨æ€ç±»å‹æ¨¡å¼ åˆ©ç”¨åŸå‹å…±äº«æ–¹æ³• if(this.eat !== 'function') &#123; Animal.prototype.eat = function() &#123; console.log('åƒ') &#125; &#125;&#125;function Dog(name,age) &#123; // å€Ÿç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° Animal.call(this,name) this.age = age&#125;/* å…³é”®éƒ¨åˆ†: ä¼˜åŒ–æ‰ new Animal()ï¼Œé—´æ¥çš„è®© Dog.prototype è®¿é—®åˆ° Animal.prototype */// è¿™é‡Œç”¨ Object.create(åŸå‹, æ„é€ å™¨)å–ä»£å¯„ç”Ÿå¼ç»§æ‰¿ createDog(åŸå‹, æ„é€ å™¨)ï¼Œå†™èµ·æ¥æ›´ç®€å•ã€‚Dog.prototype = Object.create(Animal.prototype, &#123;constructor: &#123; value: Dog, enumerable: false, // æšä¸¾æ—¶ä¸å¯è§ writable: true, // å¯è¢«èµ‹å€¼è¿ç®—æ”¹å˜ configurable: true //å¯ä»¥è¢«æ”¹å˜å¹¶ä¸”ä»å¯¹åº”å¯¹è±¡ä¸­åˆ é™¤ã€‚ &#125;&#125;)var d = new Dog('å“ˆå£«å¥‡', 3)console.log(d.name) // 'å“ˆå£«å¥‡'console.log(d.age) // '3'd.eat() // 'åƒ' æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼š ECMAScript 5 é€šè¿‡æ–°å¢ Object.create()æ–¹æ³•è§„èŒƒåŒ–äº†åŸå‹å¼ç»§æ‰¿å’Œå¯„ç”Ÿå¼ç»§æ‰¿ã€‚è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°:ä¸€ä¸ªç”¨ä½œæ–°å¯¹è±¡åŸå‹çš„å¯¹è±¡å’Œä¸€ä¸ªå¯é€‰çš„ä¸ºæ–°å¯¹è±¡å®šä¹‰é¢å¤–å±æ€§çš„å¯¹è±¡ã€‚ è¿™ç§æ–¹å¼é«˜æ•ˆä½“ç°åœ¨å®ƒåªè°ƒç”¨äº†ä¸€æ¬¡ Animal æ„é€ å‡½æ•°ï¼Œå› æ­¤èˆå¼ƒäº†åœ¨ Animal ä¸Šå¤šä½™çš„ä¸éœ€è¦çš„å±æ€§ã€‚ class è¯­æ³•ç³– åœ¨ JavaScript ä¸­å¹¶æ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œä½†åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ class å†™å‡ºç±»ä¼¼ä¼ ç»Ÿé¢å‘å¯¹è±¡è¯­è¨€çš„ç±»çš„å£°æ˜å’Œç»§æ‰¿ã€‚ä½†æ˜¯æœ¬è´¨ä¸Šè¿˜æ˜¯å’Œä»¥å‰æ²¡æœ‰å¤šå¤§åŒºåˆ«ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæ–¹ä¾¿å¼€å‘è€…ä¹¦å†™ã€‚ æ„é€ å‡½æ•° VS class è¯­æ³• class ç»§æ‰¿class Animal &#123; constructor(name) &#123; this.name = name &#125; eat() &#123; console.log('åƒ') &#125;&#125;class Dog extends Animal &#123; constructor(name,age) &#123; // ç›¸å½“äºä¹‹å‰ç»§æ‰¿ä¸­çš„ Animal.call(this, name) super(name) this.age = age &#125; bark() &#123; console.log(this.name + 'ï¼šå—·~~') &#125;&#125;var d = new Dog('å“ˆå£«å¥‡',3)console.log(d.name) // 'å“ˆå£«å¥‡'console.log(d.age) // '3'd.eat() // 'åƒ'd.bark() // 'å“ˆå£«å¥‡ï¼šå—·~~' æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼š class å®ç°ç»§æ‰¿è¦æ³¨æ„ä¸¤ç‚¹ï¼š ä½¿ç”¨ extends å£°æ˜ç»§æ‰¿å“ªä¸ªçˆ¶ç±» åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super() æ€»ç»“ ç»§æ‰¿æ˜¯å­ç±»æ‹¥æœ‰çˆ¶ç±»çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ï¼Œå‡å°‘é‡å¤ä»£ç çš„ä¹¦å†™ é™¤äº†å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿æ–¹å¼ï¼Œå…¶ä»–ç»§æ‰¿æ–¹å¼éƒ½æ˜¯åŸºäºåŸå‹çš„ class æ˜¯ ES6 ä¸­çš„è¯­æ³•ç³–ï¼Œå®ç°ç»§æ‰¿æ—¶è¦ç”¨ extends å£°æ˜ç»§æ‰¿çš„çˆ¶ç±»ï¼Œå­ç±»æ„é€ å‡½æ•°ä¸­è¦å†™ super() æ–¹æ³•","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"}]},{"title":"JavaScript ä¸­çš„åŸå‹åŸæ¥æ˜¯è¿™æ ·çš„","slug":"JavaScriptä¸­çš„åŸå‹","date":"2019-03-08T00:56:54.000Z","updated":"2019-05-14T01:23:35.087Z","comments":true,"path":"2019/03/08/JavaScriptä¸­çš„åŸå‹/","link":"","permalink":"inknight.cn/2019/03/08/JavaScriptä¸­çš„åŸå‹/","excerpt":"ä»€ä¹ˆæ˜¯åŸå‹ åŸå‹å…¶å®å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œåœ¨å£°æ˜å‡½æ•°çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºçš„ã€‚","text":"ä»€ä¹ˆæ˜¯åŸå‹ åŸå‹å…¶å®å°±æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œåœ¨å£°æ˜å‡½æ•°çš„æ—¶å€™è‡ªåŠ¨åˆ›å»ºçš„ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬ç°åœ¨å£°æ˜ä¸€ä¸ªæ„é€ å‡½æ•° A ï¼Œé™¤äº†ä¼šç”³è¯·ä¿å­˜å‡½æ•°çš„å†…å­˜ç©ºé—´ï¼Œè¿˜ä¼šé¢å¤–ç”³è¯·ä¸€ä¸ªå†…å­˜ç©ºé—´ï¼Œç”¨äºå­˜å‚¨æ„é€ å‡½æ•° A çš„åŸå‹å¯¹è±¡ã€‚æ‰€æœ‰å‡½æ•°ä¸­(Function.prototype.bind é™¤å¤–)é»˜è®¤éƒ½æœ‰ä¸€ä¸ª prototype çš„å±æ€§ï¼Œå®ƒä¿å­˜äº†å‡½æ•°çš„åŸå‹å¯¹è±¡çš„åœ°å€(å¼•ç”¨)(ä¹Ÿå°±æ˜¯å®ƒæŒ‡å‘äº†åŸå‹å¯¹è±¡)ã€‚è€Œåœ¨åŸå‹å¯¹è±¡ä¸­é»˜è®¤æœ‰ä¸€ä¸ª constructor å±æ€§å­˜å‚¨äº†æ„é€ å‡½æ•°çš„åœ°å€(å¼•ç”¨)(ä¹Ÿå°±æ˜¯ constructor æŒ‡å‘äº†æ„é€ å‡½æ•°)ã€‚å¦‚æœä¸ç†è§£ä¸Šé¢æ‰€è¯´çš„ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸‹é¢çš„å›¾ï¼š æµè§ˆå™¨æ§åˆ¶å°ä¸­ï¼š _ _proto_ _ ä¸ prototype åˆšå¼€å§‹æ¥è§¦åŸå‹çš„æ—¶å€™è¿™ä¸¤ä¸ªä¸œè¥¿å¾ˆå®¹æ˜“å°±ææ··äº†ã€‚ å…ˆè®°ä½ä»¥ä¸‹ä¸¤ç‚¹ï¼Œå°±å¾ˆå®¹æ˜“å°±åŒºåˆ†äº†ï¼š prototype æ˜¯å‡½æ•°ä¸­æ‰æœ‰çš„å±æ€§ __proto__ æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½æœ‰çš„å±æ€§ æˆ‘ä»¬å·²ç»çŸ¥é“äº†å‡½æ•°ä¸­çš„ prototype å±æ€§æŒ‡å‘çš„æ˜¯å®ƒçš„åŸå‹å¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è±¡ä¸­çš„ __proto__ ä»£è¡¨ä»€ä¹ˆï¼Ÿ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹è±¡ä¸­çš„ __proto__ å±æ€§æ˜¯æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡çš„ï¼Œå³å’Œæ„é€ å‡½æ•°ä¸­çš„ prototype å±æ€§æ‰€æŒ‡å‘çš„å¯¹è±¡æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚ ç”¨ä¸€æ®µç®€å•çš„ä»£ç ï¼šfunction A() &#123;&#125;var a = new A() ä¸Šå›¾çœ‹ç€ä¸å¤Ÿç®€ä¾¿ï¼Œæˆ‘ä»¬ç®€åŒ–ä¸€ä¸‹ï¼š è¿˜æœ‰ä¸€ç‚¹ï¼Œ__proto__ ä¸æ˜¯ä¸€ä¸ªè§„èŒƒå±æ€§ï¼Œie(é™¤äº† ie10) ä¸æ”¯æŒã€‚å¯¹åº”çš„æ ‡å‡†å±æ€§æ˜¯ [[Prototype]] ï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§æˆ‘ä»¬æ²¡æ³•ç›´æ¥è®¿é—®åˆ°ã€‚å¼€å‘è€…å°½é‡ä¸è¦ç”¨è¿™ç§æ–¹å¼å»è®¿é—®ï¼Œå› ä¸ºæ“ä½œä¸æ…ä¼šæ”¹å˜è¿™ä¸ªå¯¹è±¡çš„ç»§æ‰¿åŸå‹é“¾ã€‚ åœ¨ä½¿ç”¨ Object.create(å‚æ•°) æ–¹å¼åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯¹è±¡çš„ __proto__ å±æ€§æŒ‡å‘çš„æ˜¯ä¼ å…¥çš„å‚æ•°ã€‚ åŸå‹é“¾ ç”±äº __proto__ æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½å…·æœ‰çš„å±æ€§ï¼Œè€Œ __proto__ æœ¬èº«æŒ‡å‘çš„åŸå‹(å‡½æ•°.prototype)ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¹Ÿæœ‰ __proto__ å±æ€§ã€‚æ‰€ä»¥è¿™æ ·ä¼šå½¢æˆç”± __proto__ å°†å¯¹è±¡å’ŒåŸå‹è¿èµ·æ¥çš„é“¾æ¡ã€‚è¿™å°±æ˜¯åŸå‹é“¾ã€‚åŸå‹é“¾çš„é¡¶ç«¯æ˜¯ Object.prototypeï¼ˆObject æ˜¯æ‰€æœ‰å¯¹è±¡çš„ç¥–å®—ï¼‰ ï¼ŒObject.prototype.__proto__çš„å€¼ä¸º null ã€‚ è¿˜æ˜¯çœ‹ä¹‹å‰çš„ä»£ç ï¼šfunction A() &#123;&#125;var a = new A() å®ƒçš„åŸå‹é“¾å¦‚ä¸‹ï¼š æ„é€ å‡½æ•° A å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æ‰€æœ‰å‡½æ•°éƒ½æ˜¯ç”± Function å‡½æ•°æ„é€ çš„ã€‚(å£°æ˜å‡½æ•° function A() {} ç­‰ä»·äº var A = new Function()) ã€‚æ‰€ä»¥æ‰€æœ‰å‡½æ•°çš„ __proto__ æŒ‡å‘çš„éƒ½æ˜¯ Function.prototype ã€‚æ›´æ–°ä¸Šå›¾ï¼š Function ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„ __proto__ æŒ‡å‘çš„ä¹Ÿæ˜¯ Functon.prototype å³ Funtion.__proto__ === Function.prototypeã€‚ç»§æ›´æ–°ä¸Šå›¾ï¼š Object åŒæ ·æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥ Object.__proto__ === Function.prototype åˆ°äº†è¿™é‡Œï¼Œæˆ‘ä»¬åº”è¯¥å¯ä»¥çœ‹æ‡‚ä¸‹é¢è¿™å¼ å›¾äº†ï¼š åŸå‹çš„ä½œç”¨ å½“ JS å¼•æ“æŸ¥æ‰¾å¯¹è±¡å±æ€§æ—¶ï¼Œå…ˆæŸ¥æ‰¾å¯¹è±¡æœ¬èº«æ˜¯å¦å­˜åœ¨è¯¥å±æ€§ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œä¼šåœ¨å¯¹è±¡çš„ __proto__ é‡Œæ‰¾ï¼Œè¿˜æ‰¾ä¸åˆ°å°±ä¼šæ²¿ç€åŸå‹é“¾ä¸€ç›´æ‰¾åˆ°åŸå‹é“¾é¡¶ç«¯(Object.prototype) ç›´åˆ°æ‰¾åˆ°å±æ€§ä¸ºæ­¢ï¼Œæœ€ååœ¨åŸå‹é“¾é¡¶ç«¯éƒ½æ²¡æ‰¾åˆ°å°±è¿”å› undefined ã€‚ ç”±äºä¸Šé¢çš„æœºåˆ¶ï¼ŒåŸå‹çš„ä½œç”¨å°±å¾ˆæ˜æ˜¾äº†â€”â€”å…±äº«å±æ€§ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´ã€‚ function Animal() &#123; this.name = 'åŠ¨ç‰©' this.eat = function() &#123; console.log('åœ¨åƒÂ·Â·Â·') &#125;&#125;var a1 = new Animal()var a2 = new Animal()console.log(a1.eat === a2.eat) // false// æ¯ä¸ªå¯¹è±¡çš„ eat æ–¹æ³•ä¸æ˜¯åŒä¸€ä¸ªï¼Œä½†æ–¹æ³•ç±»å®¹ä¸€æ ·ï¼Œæµªè´¹å†…å­˜ ä½¿ç”¨åŸå‹è§£å†³ï¼š function Animal(name) &#123; this.name = 'åŠ¨ç‰©'&#125;Animal.prototype.eat = function() &#123; console.log('åƒ')&#125;var a1 = new Animal()var a2 = new Animal()console.log(a1.eat === a2.eat) //true// a1.eat å’Œ a2.eat éƒ½åŒæ˜¯ä¸€ä¸ªæ–¹æ³•(Animal.prototype.eat) åŸå‹éå¸¸é€‚åˆå°è£…å…±äº«çš„æ–¹æ³•ã€‚ä½†æ˜¯ä¸Šé¢çš„ä»£ç æŠŠæ„é€ å‡½æ•°å’ŒåŸå‹åˆ†å¼€å†™äº†ã€‚å°è£…ä¸åˆ°ä½ã€‚ä½¿ç”¨åŠ¨æ€ç±»å‹æ¨¡å¼è§£å†³ã€‚ function Animal() &#123; this.name = 'åŠ¨ç‰©' /* åˆ¤æ–­ this.eat æ˜¯ä¸æ˜¯ å‡½æ•°ç±»å‹ï¼Œ å¦‚æœä¸æ˜¯ï¼Œåˆ™è¡¨ç¤ºæ˜¯ç¬¬ä¸€æ¬¡åˆ›å»ºå¯¹è±¡æˆ–è€…è°ƒç”¨ Animal å‡½æ•°ï¼Œ ä¼šå°† eat æ·»åŠ åˆ°åŸå‹ä¸­å»ã€‚ å¦‚æœæ˜¯ï¼Œåˆ™è¡¨ç¤ºåŸå‹ä¸­å­˜åœ¨äº† eat æ–¹æ³•ï¼Œä¸éœ€è¦å†æ·»åŠ ã€‚ */ if(typeof this.eat !== 'function') &#123; Animal.prototype.eat = function() &#123; console.log('åƒ') &#125; &#125;&#125;var a = new Animal()a.eat() åŸå‹åŸºäºä¹‹å‰çš„å…±äº«å±æ€§å’Œæ–¹æ³•ï¼Œæ˜¯å®ç° JS ä¸­ç»§æ‰¿çš„åŸºç¡€ã€‚ ä¸åŸå‹æœ‰å…³çš„æ–¹æ³•hasOwnProperty()é€šè¿‡ä¹‹å‰çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“äº†å»è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œä¼šåœ¨åŸå‹é“¾ä¸ŠæŸ¥æ‰¾ã€‚æ‰€ä»¥æˆ‘ä»¬å¹¶ä¸çŸ¥é“è¿™ä¸ªå±æ€§æ¥è‡ªå“ªé‡Œã€‚ hasOwnProperty() æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå¯ä»¥åˆ¤æ–­ä¸€ä¸ªå±æ€§åæ˜¯å¦åœ¨è‡ªå¯¹è±¡æœ¬èº«ä¸Šã€‚ function Animal() &#123;&#125;Animal.prototype.name = 'åŠ¨ç‰©'var a = new Animal()a.age = 3console.log(a.hasOwnProperty('name')) // falseconsole.log(a.hasOwnProperty('age') // true in æ“ä½œç¬¦ in æ“ä½œç¬¦ç”¨è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå±æ€§åèƒ½å¦åœ¨å¯¹è±¡ä¸Šæ‰¾åˆ°ã€‚åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸Šæ‰¾åˆ°ä¹Ÿè¿”å› trueã€‚ function Animal() &#123;&#125;Animal.prototype.name = 'åŠ¨ç‰©'var a = new Animal()a.age = 3console.log('name' in a) // trueconsole.log('age' in a) // trueconsole.log('sex' in a) // false æ€»ç»“ åŸå‹å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå£°æ˜å‡½æ•°å°±ä¼šåˆ›å»ºåŸå‹å¯¹è±¡ prototype åªå­˜åœ¨äºå‡½æ•°ä¸­ æ‰€æœ‰å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª __proto__ å±æ€§ï¼Œå®ƒæŒ‡å‘å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹ åŸå‹ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¹Ÿæœ‰ __proto__ å±æ€§ï¼Œ__proto__ å°†å¯¹è±¡å’ŒåŸå‹è¿æ¥èµ·æ¥ï¼Œå½¢æˆåŸå‹é“¾ Object.prototype æ˜¯åŸå‹é“¾çš„é¡¶ç«¯ è®¿é—®å¯¹è±¡çš„å±æ€§ä¼šæ²¿ç€å¯¹è±¡çš„åŸå‹é“¾æ‰¾ä¸‹å» åŸå‹å¯ä»¥å…±äº«å±æ€§å’Œæ–¹æ³•ï¼Œæ˜¯ç»§æ‰¿çš„åŸºç¡€","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"}]},{"title":"JavaScript ä¸­çš„æ•°æ®ç±»å‹ç±»å‹å’Œç±»å‹è½¬æ¢","slug":"JavaScriptä¸­çš„å˜é‡ç±»å‹å’Œç±»å‹è½¬æ¢","date":"2019-03-05T07:05:09.000Z","updated":"2019-05-15T01:19:50.671Z","comments":true,"path":"2019/03/05/JavaScriptä¸­çš„å˜é‡ç±»å‹å’Œç±»å‹è½¬æ¢/","link":"","permalink":"inknight.cn/2019/03/05/JavaScriptä¸­çš„å˜é‡ç±»å‹å’Œç±»å‹è½¬æ¢/","excerpt":"JavaScript æ˜¯ä¸€ç§å¼±ç±»å‹æˆ–è€…è¯´åŠ¨æ€ç±»å‹è¯­è¨€ã€‚æ‰€ä»¥ä½ ä¸ç”¨æå‰å£°æ˜å˜é‡çš„ç±»å‹ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œç±»å‹ä¼šè¢«è‡ªåŠ¨ç¡®å®šï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ä¿å­˜ä¸åŒç±»å‹çš„æ•°æ®ã€‚","text":"JavaScript æ˜¯ä¸€ç§å¼±ç±»å‹æˆ–è€…è¯´åŠ¨æ€ç±»å‹è¯­è¨€ã€‚æ‰€ä»¥ä½ ä¸ç”¨æå‰å£°æ˜å˜é‡çš„ç±»å‹ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œç±»å‹ä¼šè¢«è‡ªåŠ¨ç¡®å®šï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªå˜é‡ä¿å­˜ä¸åŒç±»å‹çš„æ•°æ®ã€‚ æ•°æ®ç±»å‹åŸå§‹ç±»å‹åœ¨ JS ä¸­ä¸€å…± 6 ç§åŸå§‹ç±»å‹ï¼š string number boolean undefined null symbol (ECMAScript 6) å¯¹è±¡ç±»å‹ é™¤äº†åŸå§‹ç±»å‹å…¶ä»–çš„éƒ½æ˜¯å¯¹è±¡ç±»å‹ï¼ˆobjectï¼‰äº†ã€‚ å†…å­˜ç©ºé—´ åœ¨ JS ä¸­ï¼Œæ¯ä¸€ä¸ªæ•°æ®éƒ½éœ€è¦å­˜æ”¾åœ¨å†…å­˜ç©ºé—´ä¸­ã€‚ åŸå§‹ç±»å‹æ•°æ®ç›´æ¥å­˜å‚¨åœ¨ æ ˆå†…å­˜(stack) ä¸­ï¼Œå¯¹è±¡æ•°æ®å­˜å‚¨åœ¨ å †å†…å­˜(heap) ä¸­ï¼Œå¹¶åœ¨ æ ˆå†…å­˜ ä¸­å­˜æ”¾äº†è¯¥å¯¹è±¡æ•°æ®åœ¨ å †å†…å­˜çš„åœ°å€(å¼•ç”¨)ã€‚ var a1 = 0 // æ ˆvar a2 = 'this is string' // æ ˆvar a3 = null // æ ˆvar b = &#123; m: 20 &#125; // å †var c = [1,2,3] // å † ä¸Šè¿°å˜é‡çš„å†…å­˜å›¾è§£ï¼š åˆ¤æ–­å˜é‡çš„ç±»å‹ typeof æ˜¯å¦èƒ½æ­£ç¡®åˆ¤æ–­ç±»å‹ï¼Ÿinstanceof èƒ½æ­£ç¡®åˆ¤æ–­å¯¹è±¡çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ typeof typeof è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæœªç»è®¡ç®—çš„æ“ä½œæ•°çš„ç±»å‹ã€‚ å¯¹äºåŸå§‹ç±»å‹ï¼Œé™¤äº† null ç±»å‹éƒ½æ˜¾ç¤ºæ­£ç¡®ç±»å‹ã€‚ typeof '1' // 'string'typeof true // 'boolean'typeof 1 // 'number'typeof undefined // 'undefined'typeof Symbol() // 'symbol'typeof null // 'object' è¿™æ˜¯ä¸€ä¸ª Bug typeof 1 === 'number' // truetypeof (typeof 1) === 'string' // true å¯¹äºå¯¹è±¡æ¥è¯´ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º object ã€‚ typeof [] // 'object'typeof &#123;&#125; // 'object'typeof console.log // `function` instanceof instanceof è¿ç®—ç¬¦è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºæµ‹è¯•æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å­˜åœ¨äºå¯¹è±¡åŸå‹é“¾ä¸Šã€‚æ‰€ä»¥åœ¨åˆ¤æ–­å¯¹è±¡çš„æ­£ç¡®ç±»å‹æ—¶å¯ä»¥è€ƒè™‘ä½¿ç”¨ instanceof ã€‚ // å®šä¹‰æ„é€ å‡½æ•°function A() &#123;&#125;function B() &#123;&#125;var a = new A()var b = new B()a instanceof A // true ï¼Œå› ä¸º Object.getPrototypeOf(a) === A.prototypea instanceof B // false ï¼ŒB.prototype ä¸åœ¨ a çš„åŸå‹é“¾ä¸Š ä½†æ˜¯åœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬çš„è„šæœ¬å¯èƒ½è¦åœ¨å¤šä¸ªçª—å£ï¼ˆä¸åŒ iframeï¼‰ä¹‹é—´è¿›è¡Œäº¤äº’ã€‚å¤šä¸ªçª—å£æ„å‘³ç€å¤šä¸ªå…¨å±€ç¯å¢ƒï¼Œä¸åŒå…¨å±€ç¯å¢ƒæ‹¥æœ‰ä¸åŒçš„å…¨å±€å¯¹è±¡ï¼Œä»è€Œæ‹¥æœ‰ä¸åŒçš„å†…ç½®æ„é€ å‡½æ•°ã€‚è¿™ä¼šä½¿å¾— instanceof ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚ var iframe = document.createElement('iframe') document.body.appendChild(iframe) xArray = window.frames[window.frames.length-1].Array var arr = new xArray(\"1\",\"2\",\"3\",\"4\",\"5\") //è¿™ä¸ªå†™æ³•IEå¤§å“¥ä¸‹æ˜¯ä¸æ”¯æŒçš„ï¼ŒFFä¸‹æ‰æœ‰ alert(arr instanceof Array) // false alert(arr.constructor === Array) // false Object.prototype.toString.call(å˜é‡) å¯ä»¥æ­£ç¡®åˆ¤æ–­ null ï¼ŒArray ï¼Œå…¶ä»–çš„å’Œ typeof å·®ä¸å¤š Object.prototype.toString.call([]) === '[object Array]' // trueObject.prototype.toString.call(&#123;&#125;) === '[object Object]' // trueObject.prototype.toString.call(Symbol()) === '[object Symbol]'// trueObject.prototype.toString.call(true) === '[object Boolean]'// truefunction Person() &#123;&#125;Object.prototype.toString.call(new Person()) // '[object Object]' ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œå°±æ˜¯ç”¨æˆ·è‡ªå®šä¹‰çš„ç±»å‹è¿”å›æ˜¯ â€˜[object Object]â€™ ç±»å‹è½¬æ¢ ä»»æ„æ•°æ®ç±»å‹ä¹‹é—´å¯ä»¥ç›¸äº’è½¬æ¢ï¼Œä½†æ˜¯ symbol ç‰¹æ®Šã€‚symbol ç±»å‹åªèƒ½è½¬æ¢æˆ string æˆ– boolean ç±»å‹ï¼Œå…¶ä»–çš„è½¬æ¢ä¼šæŠ¥é”™ã€‚ å¼ºåˆ¶è½¬æ¢Number() åŸå§‹ç±»å‹ â€”&gt; æ•°å­— // 1. å­—ç¬¦ä¸² ---&gt; æ•°å­— // 1) å¯ä»¥è¢«è§£ææˆæ•°å€¼çš„å­—ç¬¦ä¸² è¿”å› æ•°å€¼ Number('123') // 123 // 2) ä¸èƒ½è§£ææˆæ•°å€¼çš„å­—ç¬¦ä¸² è¿”å› NaN Number('123aaa') // NaN // 3) ç©ºä¸² ---&gt; 0 Number('') // 0// 2. å¸ƒå°”å€¼ ---&gt; æ•°å­— // 1) true ---&gt; 1 Number(true) // 1 // 2) false ---&gt; 0 Number(false) // 0// 3. undefined ---&gt; NaN Number(undefined) // NaN // 4. null ---&gt; 0Number(null) // 0 å…¨å±€å‡½æ•° parseInt() å’Œ parseFloat() å¯ä»¥å°†ä¸€äº›å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å­—,ä½†æ²¡ Number() ä¸¥æ ¼ ã€‚æŠŠå…¶ä»–åŸå§‹ç±»å‹éƒ½ä¼šè½¬æ¢æˆ NaN ã€‚ parseInt('123aaa') // 123parseFloat('1.23aaa') // 1.23parseInt(true) // NaN å¯¹è±¡ â€”&gt; æ•°å­— Number() æ–¹æ³•çš„å‚æ•°æ˜¯å¯¹è±¡æ—¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œé™¤éæ˜¯åŒ…å«å•ä¸ªæ•°å­—çš„æ•°ç»„ä¼šè¿”å›æ•°å­—ï¼Œå¦åˆ™è¿”å› NaN ã€‚Number(&#123;a: 1&#125;) // NaNNumber([1,2]) // NaNNumber([1]) // 1 åœ¨æ‰§è¡Œ Number(å¯¹è±¡) æ–¹æ³•æ—¶ï¼Œä¼šå…ˆè¿›è¡Œå‚æ•°å¤„ç†ï¼Œå°†å¯¹è±¡è½¬æ¢æˆåŸå§‹ç±»å‹ï¼Œå†è¿›è¡Œè½¬æ¢æˆæ•°å­—çš„æ“ä½œã€‚ ç¬¬ä¸€æ­¥ï¼Œè°ƒç”¨å¯¹è±¡è‡ªèº«çš„ valueOf() æ–¹æ³•ï¼ˆ var a = new String(123); a.valueOf() â€“&gt; â€˜123â€™ ï¼‰ã€‚å¦‚æœè¿”å›çš„å€¼æ˜¯åŸå§‹ç±»å‹ï¼Œåˆ™ç›´æ¥å°†è¯¥å€¼è½¬æ¢æˆæ•°å­—å¹¶è¿”å›ã€‚ä¸å†è¿›è¡Œåç»­æ­¥éª¤ã€‚ ç¬¬äºŒæ­¥ï¼Œå¦‚æœ valueOf() æ–¹æ³•è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåˆ™è°ƒç”¨åŸå¯¹è±¡è‡ªèº«çš„ toString() æ–¹æ³•ï¼Œå¦‚æœæ­¤æ—¶è¿”å›çš„å€¼æ˜¯åŸå§‹ç±»å‹ï¼Œåˆ™å°†è¯¥å€¼è½¬æ¢æˆæ•°å­—å¹¶è¿”å›ï¼Œä¸å†è¿›è¡Œåç»­æ“ä½œã€‚ å¦‚æœ toString() æ–¹æ³•è¿”å›çš„è¿˜æ˜¯å¯¹è±¡ï¼Œå°±æŠ¥é”™ã€‚ Number(&#123;a: 1&#125;) // NaN// è¿‡ç¨‹å¦‚ä¸‹ï¼švar t = &#123;a: 1&#125;// ç¬¬ä¸€æ­¥t.valueOf() // &#123;a: 1&#125;// ç¬¬äºŒæ­¥t.toString() // '[object Object]'Number('[object Object]') // NaN Number([1,2])//è¿‡ç¨‹å¦‚ä¸‹ï¼š// ç¬¬ä¸€æ­¥[1,2].valueOf() // [1,2]// ç¬¬äºŒæ­¥[1].toString() // '1,2'Number('1,2') // NaN // å†æ¥çœ‹çœ‹å‚æ•°æ˜¯å•ä¸ªæ•°å­—çš„æ•°ç»„æ—¶çš„æƒ…å†µ Number([1]) // 1 //è¿‡ç¨‹å¦‚ä¸‹ï¼š// ç¬¬ä¸€æ­¥[1].valueOf() // [1]// ç¬¬äºŒæ­¥[1].toString() // '1'Number('1') // 1 String() String() å‡½æ•°å¯ä»¥å°†ä»»æ„ç±»å‹çš„å€¼è½¬æ¢æˆå­—ç¬¦ä¸²ã€‚ åŸå§‹ç±»å‹ â€”&gt; å­—ç¬¦ä¸² var a = Symbol(&#123;&#125;)String(a) // 'Symbol([object Object])'String(Symbol([])) // 'Symbol()' å¯¹è±¡ â€”&gt; å­—ç¬¦ä¸²æ•°ç»„ä¼šè¿”å›è¯¥æ•°ç»„çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œå‡½æ•°è¿”å›å®Œæ•´å‡½æ•°çš„å­—ç¬¦ä¸²ï¼Œå…¶ä»–çš„è¿”å›ä¸€ä¸ªç±»å‹å­—ç¬¦ä¸²ã€‚ String([1,2]) // '1,2'String([]) // ''function foo(x)&#123; return x*x &#125;String(foo) // 'function foo(x)&#123; return x*x &#125;'String(&#123;a: 1&#125;) // '[object Object]'[1,2,3].toString() // '1,2,3'Object.prototype.toString.call([1,2,3]) // '[object Array]' String(å¯¹è±¡) æ–¹æ³•çš„è½¬æ¢è§„åˆ™ä¸ Number(å¯¹è±¡) åŸºæœ¬ç›¸åŒï¼Œåªæ˜¯äº’æ¢äº† valueOf() ä¸ toString() çš„æ‰§è¡Œé¡ºåºã€‚ å…ˆè°ƒç”¨å¯¹è±¡çš„ toString() æ–¹æ³•ã€‚å¦‚æœè¿”å›çš„å€¼æ˜¯åŸå§‹ç±»å‹ï¼Œåˆ™å°†è¯¥å€¼è½¬æ¢æˆå­—ç¬¦ä¸²å¹¶è¿”å›ã€‚ä¸å†æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ã€‚ å¦‚æœ toString() è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåˆ™è°ƒç”¨åŸå¯¹è±¡çš„ valueOf() æ–¹æ³•ã€‚å¦‚æœè¿”å›çš„å€¼æ˜¯åŸå§‹ç±»å‹ï¼Œå°†è¯¥å€¼è½¬æ¢æˆå­—ç¬¦ä¸²å¹¶è¿”å›ã€‚ä¸å†æ‰§è¡Œåç»­æ“ä½œã€‚ å¦‚æœ valueOf() æ–¹æ³•è¿”å›çš„è¿˜æ˜¯å¯¹è±¡ï¼Œå°±æŠ¥é”™ã€‚ è‡ªå®šä¹‰å¯¹è±¡çš„ toString() æ–¹æ³•å’Œ valueOf() æ–¹æ³•ï¼švar obj = &#123; valueOf: function() &#123; return 1 &#125;, toString: function() &#123; return 2 &#125;&#125;String(obj) // '2'Number(obj) // 1 Boolean() Boolean() å‡½æ•°å¯ä»¥å°†ä»»æ„ç±»å‹è½¬æ¢æˆå¸ƒå°”å€¼é™¤äº†ä»¥ä¸‹äº”ä¸ªå€¼è½¬æ¢ç»“æœä¸º false ï¼Œå…¶ä»–å€¼å…¨éƒ¨è½¬æ¢ä¸º true undefined null &#39;&#39; (ç©ºå­—ç¬¦ä¸²) -0 æˆ– 0 NaN !!æ•°æ® ä¸ Boolean(æ•°æ®) æ•ˆæœä¸€æ ·ã€‚ Boolean(undefined) // falseBoolean(null) // falseBoolean('') // falseBoolean(0) // falseBoolean(NaN) // false! NaN // true!! NaN // false è‡ªåŠ¨è½¬æ¢ è‡ªåŠ¨è½¬æ¢å°±æ˜¯æ²¡æœ‰æ˜¾å¼åœ°ä½¿ç”¨å‡½æ•°å¯¹æ•°æ®è¿›è¡Œç±»å‹è½¬æ¢ã€‚ä½†å®ƒæ˜¯ä»¥å¼ºåˆ¶è½¬æ¢ä¸ºåŸºç¡€çš„ã€‚ å½“é¢„æœŸæ•°å€¼ä¸å®é™…æ•°å€¼ä¸åŒ¹é…æ—¶ï¼ŒJavaScript å°±ä¼šè‡ªåŠ¨è°ƒç”¨é¢„æœŸç±»å‹çš„è½¬æ¢å‡½æ•°å¯¹å®é™…å€¼è¿›è¡Œè½¬æ¢ã€‚ è¿›è¡Œç®—æœ¯è¿ç®— è¿ç®—å­éƒ½æ˜¯åŸå§‹ç±»å‹ åœ¨åŠ æ³•è¿ç®—ä¸­ åªè¦ä¸€æ–¹æ—¶å­—ç¬¦ä¸²ï¼Œå¦ä¸€æ–¹å°±ä¼šè½¬æ¢æˆå­—ç¬¦ä¸²ã€‚è¿™æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥ã€‚ å…¶ä»– - * / ** % ++ -- +(ä¸€å…ƒè¿ç®—ç¬¦ è¡¨ç¤ºæ­£æ•°) -(ä¸€å…ƒè¿ç®—ç¬¦ è¡¨è´Ÿæ•°) éƒ½ä¼šå°†è¿ç®—å­è½¬æ¢æˆæ•°å­—ã€‚1 + '1' // '11'2 * '3' // 61 - 'a' // NaN 3 + - '1' // 2 è¿ç®—å­æ˜¯å¯¹è±¡ ä¼šå…ˆæŠŠå¯¹è±¡è½¬æ¢æˆåŸå§‹ç±»å‹å†æŒ‰é¢„æœŸå€¼è½¬æ¢ã€‚å…·ä½“æ–¹æ³•æ˜¯ï¼šå…ˆè°ƒç”¨å¯¹è±¡çš„ valueOf() æ–¹æ³•è¯•å›¾å°†å¯¹è±¡è½¬æ¢æˆåŸå§‹ç±»å‹ï¼Œå¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ï¼Œå°±å†è°ƒç”¨åŸå¯¹è±¡çš„ toString() æ–¹æ³•ï¼Œå¦‚æœè¿”å›çš„è¿˜æ˜¯å¯¹è±¡å°±æŠ¥é”™ã€‚ var obj = &#123; valueOf: function() &#123; return '1' &#125;, toString: function() &#123; return '10' &#125;&#125;10 - obj // 91 + [1,2] // '11,2'// [1,2].toString() ---&gt; '1,2' è¿›è¡Œæ¯”è¾ƒè¿ç®— === å’Œ !== ä¸ä¼šå‘ç”Ÿç±»å‹è½¬æ¢ï¼Œåªè¦ç±»å‹ä¸åŒå°±è¿”å› false. ä¸¤è¾¹åŒæ—¶ä¸ºå­—ç¬¦ä¸²ä¼šæ¯”è¾ƒ Unicode ç ï¼Œå¦åˆ™éƒ½ä¼šè½¬æ¢æˆæ•°å­—è¿›è¡Œæ¯”è¾ƒ(nullã€undefined é™¤å¤–)ã€‚ NaN ä¸ä»»æ„å€¼(åŒ…æ‹¬æœ¬èº«NaN)æ¯”è¾ƒéƒ½è¿”å› false null undefined é™¤äº† null(undefined) == undefined(null) è¿”å› trueï¼Œå…¶ä»– &gt; &lt; == æœ‰ null æˆ– undefined å‚ä¸çš„éƒ½è¿”å› false ã€‚'abc' &gt; 'abd' // falsetrue &gt; false // true ---&gt; Number(true) &gt; Number(false)true &gt; '-1' // true ---&gt; Number(true) &gt; Number('-1')var obj = &#123;valueOf: function() &#123;return '1'&#125;&#125;[3] &gt; obj // true// è¿‡ç¨‹å¦‚ä¸‹ï¼š// Number([3]) &gt; Number(obj)// Number('3') &gt; Number('1')// 3 &gt; 10 == null // false == å¸¸ç”¨äºåˆ¤æ–­å‡½æ•°çš„å‚æ•°æ˜¯å¦ç­‰äº null æˆ–è€… undefined ï¼Œå› ä¸º null == undefinded è¿”å› true function fun(x) &#123; if(x == null) &#123;Â·Â·Â·&#125;&#125; é€»è¾‘è¿ç®— !å‚æ•° å‚æ•°&amp;&amp; å‚æ•°|| å‚æ•°? :(ä¸‰å…ƒè¿ç®—ç¬¦) if(å‚æ•°) éƒ½ä¼šå°†éå¸ƒå°”çš„å‚æ•°è½¬æ¢æˆå¸ƒå°”ç±»å‹(ä½¿ç”¨ Boolean(å‚æ•°) å‡½æ•°)ã€‚","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"}]},{"title":"ç½‘ç»œåè®®æ€»ç»“","slug":"ç½‘ç»œåè®®","date":"2019-03-03T01:38:53.000Z","updated":"2019-05-23T02:33:38.252Z","comments":true,"path":"2019/03/03/ç½‘ç»œåè®®/","link":"","permalink":"inknight.cn/2019/03/03/ç½‘ç»œåè®®/","excerpt":"å‰ç«¯ä¸»è¦å…³æ³¨äºåº”ç”¨å±‚ HTTP åè®®ï¼Œä¼ è¾“å±‚ TCP åè®®,æ–­èˆç¦»ä¸€ä¸‹ï¼Œå°±ä¸»è¦æ€»ç»“è¿™ä¸¤ç§åè®®äº†ã€‚","text":"å‰ç«¯ä¸»è¦å…³æ³¨äºåº”ç”¨å±‚ HTTP åè®®ï¼Œä¼ è¾“å±‚ TCP åè®®,æ–­èˆç¦»ä¸€ä¸‹ï¼Œå°±ä¸»è¦æ€»ç»“è¿™ä¸¤ç§åè®®äº†ã€‚ å‰ç«¯ä¸»è¦å…³æ³¨äºåº”ç”¨å±‚çš„ HTTP åè®®ï¼Œä¼ è¾“å±‚çš„ TCP åè®®,æ–­èˆç¦»ä¸€ä¸‹ï¼Œå°±ä¸»è¦æ€»ç»“è¿™ä¸¤ç§åè®®äº†ã€‚ OSI å‚è€ƒæ¨¡å‹ ä¸ TCP/IP äº”å±‚æ¨¡å‹ æˆ‘ä»¬ä¸»è¦å…³æ³¨äº TCP/IP äº”å±‚æ¨¡å‹ çš„ åº”ç”¨å±‚ å’Œ ä¼ è¾“å±‚ å°±è¶³å¤Ÿäº†ã€‚ åº”ç”¨å±‚: ä½œç”¨ï¼šä¸ºåº”ç”¨ç¨‹åºæä¾›æœåŠ¡ã€‚ å¸¸è§åè®®ï¼šHTTPã€HTTPSã€FTPã€POP3ã€SMTPç­‰ã€‚ ä¼ è¾“å±‚: ä½œç”¨ï¼šå®ç°åº”ç”¨ç¨‹åºä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚ åè®®ï¼šUDPã€TCP UDP ä¸ TCPUDP UDP æ˜¯é¢å‘æ— è¿æ¥çš„åè®®ï¼Œå®ƒåªä¼šæŠŠæ•°æ®ä¼ é€’ç»™æ¥æ”¶ç«¯ï¼Œä½†ä¸ä¼šå…³æ³¨æ¥æ”¶ç«¯æ˜¯å¦å·²ç»æ­£ç¡®æ¥æ”¶äº†æ•°æ®ï¼Œæ‰€ä»¥æœ‰æ—¶å€™ UDP ä¼šè¢«è®¤ä¸ºæ˜¯ä¸å¯é çš„æ•°æ®æŠ¥åè®®ã€‚ä½†è¿™ç§ç‰¹æ€§åè€Œé€‚åˆå¤šæ’­ï¼Œå®æ—¶çš„è§†é¢‘å’ŒéŸ³é¢‘ä¼ è¾“ã€‚ ä¼˜ç‚¹ï¼š æ— éœ€å»ºç«‹è¿æ¥ï¼ˆå‡å°‘äº†å»¶è¿Ÿï¼‰ å®ç°ç®€å•ï¼ˆæ•ˆç‡é«˜ï¼‰ å¤´éƒ¨å¼€é”€å°ï¼ˆ 8 å­—èŠ‚ï¼‰ æ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼ˆæ›´å¥½çš„æ§åˆ¶å‘é€æ—¶é—´å’Œé€Ÿç‡ï¼‰ ç¼ºç‚¹ï¼š æ²¡æœ‰å»ºç«‹è¿æ¥ï¼ˆæ•°æ®æƒ³å‘å°±å‘ï¼Œä¸å¯é ï¼‰ æ²¡æœ‰æ‹¥å¡æ§åˆ¶ï¼ˆç½‘ç»œæ¡ä»¶ä¸å¥½æ—¶ä¼šå¯¼è‡´ä¸¢åŒ…ï¼‰ TCP TCP æ˜¯é¢å‘æœ‰è¿æ¥çš„åè®®ï¼Œåœ¨ä½¿ç”¨ TCP åè®® ä¼ è¾“æ•°æ®ä¹‹å‰ä¸€å®šéœ€è¦åœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¹‹é—´å»ºç«‹è¿æ¥ã€‚å»ºç«‹è¿æ¥ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ–­å¼€è¿æ¥å››æ¬¡æŒ¥æ‰‹~ TCP å»ºç«‹è¿æ¥ä¸‰æ¬¡æ¡æ‰‹ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ª SYNï¼ˆSeq=Xï¼‰ åŒ…ï¼Œå®¢æˆ·ç«¯è¿›å…¥ SYN-SENT çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡ç«¯çš„ ACKï¼ˆAck=X+1ï¼‰å›å¤ã€‚ps: Seq æ˜¯åºå·ï¼ŒAck æ˜¯ç¡®è®¤åºå·ã€‚ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼š æœåŠ¡ç«¯æ ¹æ®æ¥æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ SYNï¼ˆSeq=Xï¼‰ åŒ…åè¿”å›ä¸€ä¸ª ACKï¼ˆAck=X+1ï¼‰ ä»¥åŠ SYNï¼ˆSeq=Yï¼‰ åŒ…ç»™å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯è¿›å…¥ SYN-RECIVED çŠ¶æ€ï¼Œç­‰å¾…å®¢æˆ·ç«¯çš„ ACKï¼ˆAck=Y+1ï¼‰ å›å¤ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼š å®¢æˆ·ç«¯æ¥æ”¶åˆ° ACKï¼ˆX+1ï¼‰ åï¼Œè¿›å…¥ ESTABLISHED çŠ¶æ€ã€‚æ ¹æ®æœåŠ¡ç«¯å‘æ¥çš„ SYNï¼ˆYï¼‰ è¿”å›ä¸€ä¸ª ACKï¼ˆY+1ï¼‰ åŒ…ç»™æœåŠ¡ç«¯ã€‚æœåŠ¡ç«¯ æ¥æ”¶ ACKï¼ˆY+1ï¼‰åè¿›å…¥ ESTABLISHED çŠ¶æ€ã€‚æ­¤æ—¶è¿æ¥å»ºç«‹æˆåŠŸã€‚ è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä»¥ä¸‹ä¸‰å¥å½¢è±¡è¡¨ç¤ºï¼š (å®¢æˆ·ç«¯)ï¼šæˆ‘æƒ³å»ºç«‹è¿æ¥äº†ï¼ŒæœåŠ¡ç«¯ä½ èƒ½å¬åˆ°å—ï¼Ÿ (æœåŠ¡ç«¯)ï¼šæˆ‘å¬å¾—åˆ°ï¼Œä½ è¿™è¾¹å¬å¾—åˆ°å—ï¼Ÿ (å®¢æˆ·ç«¯)ï¼šæˆ‘ä¹Ÿå¬å¾—åˆ°ã€‚ TCP å…³é—­è¿æ¥å››æ¬¡æŒ¥æ‰‹ è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç”¨ä»¥ä¸‹å››å¥å¥å½¢è±¡è¡¨ç¤ºï¼š (å®¢æˆ·ç«¯)ï¼šæˆ‘æƒ³å…³é—­è¿æ¥äº†ï¼Œä½ å·¥ä½œå®Œäº†å—ï¼Ÿ (æœåŠ¡ç«¯)ï¼šæˆ‘çŸ¥é“äº†ï¼Œç­‰ç­‰ã€‚ (æœåŠ¡ç«¯)ï¼šæˆ‘ç°åœ¨å‡†å¤‡å…³é—­è¿æ¥äº†ï¼Œok å—ï¼Ÿ (å®¢æˆ·ç«¯)ï¼šokï¼Œä½ å…³é—­å§ã€‚ UDP ä¸ TCP çš„åŒºåˆ« UDP åè®®æ˜¯é¢å‘æ— è¿æ¥çš„ï¼Œå®ƒä¸èƒ½ä¿è¯æ•°æ®æœ‰åºä¸”ä¸ä¸¢å¤±çš„ä¼ åˆ°å¯¹ç«¯ï¼Œä½†æ˜¯ UDP æ¯” TCP æ›´é«˜æ•ˆã€‚ TCP åè®®æ˜¯é¢å‘æœ‰è¿æ¥çš„ï¼Œå»ºç«‹å’Œæ–­å¼€è¿æ¥éƒ½éœ€è¦æ¡æ‰‹ï¼Œåœ¨ä¼ è¾“æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡æ»‘åŠ¨çª—å£ï¼ˆæµé‡æ§åˆ¶ï¼‰ã€æ‹¥å¡å¤„ç†ï¼ˆæ…¢å¼€å§‹ï¼Œæ‹¥å¡é¿å…ï¼Œå¿«é€Ÿé‡ä¼ ï¼Œå¿«é€Ÿæ¢å¤ï¼‰ï¼Œèƒ½å¤Ÿæ­£ç¡®å¤„ç†ä¸¢åŒ…é—®é¢˜ï¼Œä¿è¯æ¥æ”¶æ–¹èƒ½å¤Ÿæ”¶åˆ°æ•°æ®ï¼Œä¸æ­¤åŒæ—¶è¿˜èƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨ç½‘ç»œå¸¦å®½ã€‚ HTTP HTTP (HyperText Transfer Protocol) è¶…æ–‡æœ¬ä¼ è¾“åè®® æ˜¯ä¸€ä¸ªåŸºäº TCP (ä¼ è¾“å±‚) çš„åº”ç”¨å±‚åè®®ï¼Œæ˜¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯ä¹‹é—´è¯·æ±‚å’Œå“åº”çš„æ ‡å‡†ã€‚ ä¸»è¦ç‰¹ç‚¹ ç®€å•å¿«é€Ÿ å®¢æˆ·ç«¯å‘æœåŠ¡å™¨è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€è¯·æ±‚æ–¹æ³•å’Œè¯·æ±‚è·¯å¾„ã€‚ æ— çŠ¶æ€ å®¢æˆ·ç«¯å†æ¬¡å‘æœåŠ¡å™¨è¯·æ±‚æœåŠ¡æ—¶ï¼ŒæœåŠ¡å™¨å¹¶ä¸çŸ¥é“å®¢æˆ·ç«¯ä¹‹å‰æ˜¯å¦è¯·æ±‚è¿‡ã€‚ æ— è¿æ¥ æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå»ºç«‹ä¸€ä¸ª TCP è¿æ¥ï¼Œè¯·æ±‚å¤„ç†å®Œæˆåè¿æ¥æ–­å¼€ã€‚ HTTP æŠ¥æ–‡ è¯·æ±‚è¡Œï¼š GET https://www.baidu.com/ HTTP/1.1 ç”±è¯·æ±‚æ–¹æ³•ã€URLã€åè®®ç‰ˆæœ¬ç»„æˆ å“åº”è¡Œï¼š HTTP/1.1 200 OKåè®®ç‰ˆæœ¬ã€çŠ¶æ€ç ã€çŠ¶æ€ä¿¡æ¯ç»„æˆ HTTP è¯·æ±‚æ–¹æ³•è¯·æ±‚æ–¹æ³•åˆ†ä¸ºå¾ˆå¤šç§ï¼Œæœ€å¸¸ç”¨çš„ä¹Ÿå°±æ˜¯ GET å’Œ POST äº†ã€‚è™½ç„¶è¯·æ±‚æ–¹æ³•å¾ˆå¤šï¼Œä½†æ›´å¤šçš„æ˜¯ä¸ºäº†ä¼ è¾¾è¯­ä¹‰ã€‚æ›´å¤šçš„æ–¹æ³•çš„è¯­ä¹‰æè¿°å¯ä»¥é˜…è¯» æ–‡æ¡£ ã€‚ GET å’Œ POST çš„åŒºåˆ« GET èƒ½ç¼“å­˜ã€è¯·æ±‚é•¿åº¦é™åˆ¶ã€ æœ‰å†å²è®°å½• GET å¤šç”¨äº æ— å‰¯ä½œç”¨(ä¸ä¿®æ”¹èµ„æº)ã€å¹‚ç­‰(è¯·æ±‚æ¬¡æ•°ä¸èµ„æºæ— å…³)çš„åœºæ™¯ã€‚ POST POST ç›¸å¯¹ GET å®‰å…¨ä¸€ç‚¹ç‚¹ï¼Œå› ä¸º GET è¯·æ±‚å‘é€çš„æ•°æ®åŒ…å«åœ¨ URL é‡Œã€‚ ä¸¤è€…è¯¦ç»†å¯¹æ¯”ï¼š çŠ¶æ€ç  çŠ¶æ€ç è¡¨ç¤ºäº†å“åº”çš„çŠ¶æ€ï¼Œå¯ä»¥è®©æˆ‘ä»¬çŸ¥é“è¿™ä¸€æ¬¡çš„è¯·æ±‚æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå¦‚æœå¤±è´¥ï¼Œæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ã€‚ 2XX æˆåŠŸ 200 OK ï¼Œè¯·æ±‚æˆåŠŸå¹¶è¿”å›æ•°æ® 204 No Content ï¼ŒæˆåŠŸä½†æ— å†…å®¹ 206 Partial Content ,èŒƒå›´è¯·æ±‚ 3XX é‡å®šå‘ 301 æ°¸ä¹…é‡å®šå‘ï¼Œè¡¨ç¤ºèµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URL 302 ä¸´æ—¶é‡å®šå‘ï¼Œèµ„æºä¸´æ—¶è¢«åˆ†é…æ–°çš„ URL 304 èµ„æºæœªä¿®æ”¹ï¼Œå¯ä½¿ç”¨ç¼“å­˜ 4XX å®¢æˆ·ç«¯é”™è¯¯ 400 è¯·æ±‚è¯­æ³•é”™è¯¯ 401 è¦æ±‚èº«ä»½è®¤è¯ 403 è¯·æ±‚è¢«æœåŠ¡å™¨æ‹’ç» 404 èµ„æºä¸å­˜åœ¨ 5XX æœåŠ¡å™¨é”™è¯¯ 500 æœåŠ¡å™¨é”™è¯¯ 503 æœåŠ¡å™¨è¶…è´Ÿè½½æˆ–åœæœºç»´æŠ¤ HTTPS æ›´å®‰å…¨çš„ç½‘ç»œä¼ è¾“åè®® éœ€è¦å®‰è£…è¯ä¹¦ï¼ˆå…¬é’¥ï¼‰ ç»è¿‡ SSL/TLS åè®® åŠ å¯†ï¼Œä¼ è¾“çš„å†…å®¹æ˜¯ç»è¿‡åŠ å¯†çš„ ä½¿ç”¨ 443 ç«¯å£ HTTP/2 å¤šè·¯å¤ç”¨ åœ¨åŒä¸€ä¸ª TCP è¿æ¥ä¸Šä¼ è¾“æ‰€æœ‰çš„è¯·æ±‚æ•°æ®ï¼Œé¿å… é˜Ÿå¤´é˜»å¡(æµè§ˆå™¨é™åˆ¶åŒä¸€ä¸ªåŸŸåä¸‹çš„è¿æ¥æ•°)é—®é¢˜ Header å‹ç¼© ä½¿ç”¨äº† HPACK å‹ç¼©æ ¼å¼å¯¹ä¼ è¾“çš„ header è¿›è¡Œç¼–ç ï¼Œå‡å°‘äº† header çš„å¤§å°ã€‚å¹¶åœ¨ä¸¤ç«¯ç»´æŠ¤äº†ç´¢å¼•è¡¨ï¼Œç”¨äºè®°å½•å‡ºç°è¿‡çš„ header ï¼Œé¿å… header é‡å¤ä¼ è¾“ã€‚ äºŒè¿›åˆ¶ä¼ è¾“ åœ¨ä¹‹å‰çš„ HTTP ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡æ–‡æœ¬çš„æ–¹å¼ä¼ è¾“æ•°æ®ã€‚åœ¨ HTTP/2 ä¸­å¼•å…¥äº†æ–°çš„ç¼–ç æœºåˆ¶ï¼Œæ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½ä¼šè¢«åˆ†å‰²ï¼Œå¹¶é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ã€‚ æœåŠ¡ç«¯æ¨é€ æœåŠ¡ç«¯å¯ä»¥åœ¨å®¢æˆ·ç«¯çš„æŸä¸ªè¯·æ±‚åï¼Œä¸»åŠ¨æ¨é€å…¶ä»–å®¢æˆ·ç«¯åœ¨ä¹‹åä¼šç”¨åˆ°çš„èµ„æºã€‚çœå»äº†å®¢æˆ·ç«¯é‡å¤è¯·æ±‚çš„æ­¥éª¤ï¼Œé™ä½äº†å»¶è¿Ÿã€‚ åœ¨æµè§ˆå™¨è¾“å…¥ url åä¼šå‘ç”Ÿä»€ä¹ˆ æµè§ˆå™¨ä¼šé€šè¿‡ url æ‹¿åˆ°åŸŸåã€‚ é€šè¿‡è¿™ä¸ªåŸŸåæƒ³æ‹¿åˆ°å¯¹åº”çš„æœåŠ¡å™¨çš„ ip åœ°å€ å…ˆåœ¨æµè§ˆå™¨ç¼“å­˜ä¸­æ‰¾ æ²¡æ‰¾åˆ°å°±åˆ°æ“ä½œç³»ç»Ÿç¼“å­˜é‡Œæ‰¾ åœ¨ host æ–‡ä»¶æ‰¾ å‘ DNS æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œæ‹¿åˆ°å¯¹åº”çš„ ip åœ°å€ æœ¬åœ°éšæœºå¼€ä¸ªæ²¡å ç”¨çš„ç«¯å£é€šè¿‡æ‹¿åˆ°çš„ ip åœ°å€åŠ url ä¸­çš„ç«¯å£å·ä¸æœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥ æµè§ˆå™¨é€šè¿‡è¿™ä¸ªè¿æ¥é€šé“å‘æœåŠ¡å™¨å‘é€ http è¯·æ±‚ æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å› HTTP å“åº”æŠ¥æ–‡ æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢ æ–­å¼€ TCP è¿æ¥","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"inknight.cn/tags/è®¡ç®—æœºç½‘ç»œ/"}]},{"title":"DOM äº‹ä»¶è¯¦è§£","slug":"DOM-äº‹ä»¶æ€»ç»“","date":"2019-01-23T14:13:32.000Z","updated":"2019-03-30T00:50:37.143Z","comments":true,"path":"2019/01/23/DOM-äº‹ä»¶æ€»ç»“/","link":"","permalink":"inknight.cn/2019/01/23/DOM-äº‹ä»¶æ€»ç»“/","excerpt":"äº‹ä»¶æ˜¯ JavaScript ä¸ HTML äº¤äº’çš„åŸºç¡€ã€‚è¦å®ç°ç”¨æˆ·ä¸é¡µé¢çš„äº¤äº’ï¼Œå…ˆè¦å¯¹ç›®æ ‡å…ƒç´ ç»‘å®šç‰¹å®šçš„äº‹ä»¶ã€è®¾ç½®äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç„¶åç”¨æˆ·è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œï¼Œäº§ç”Ÿäº¤äº’æ•ˆæœã€‚","text":"äº‹ä»¶æ˜¯ JavaScript ä¸ HTML äº¤äº’çš„åŸºç¡€ã€‚è¦å®ç°ç”¨æˆ·ä¸é¡µé¢çš„äº¤äº’ï¼Œå…ˆè¦å¯¹ç›®æ ‡å…ƒç´ ç»‘å®šç‰¹å®šçš„äº‹ä»¶ã€è®¾ç½®äº‹ä»¶å¤„ç†å‡½æ•°ï¼Œç„¶åç”¨æˆ·è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰§è¡Œï¼Œäº§ç”Ÿäº¤äº’æ•ˆæœã€‚ DOM äº‹ä»¶çº§åˆ«DOM çº§åˆ«åˆ†ä¸ºå››ä¸ªçº§åˆ«ï¼šDOM0 çº§ã€DOM1 çº§ã€DOM2 çº§ã€DOM3 çº§ï¼›DOM äº‹ä»¶çº§åˆ«åˆ†ä¸ºä¸‰ä¸ªçº§åˆ«ï¼š DOM0 çº§äº‹ä»¶ &lt;button id=\"btn\" type=\"button\"&gt;&lt;/button&gt;&lt;script&gt; var btn = document.getElementById('btn') btn.onclick = function() &#123; console.log('Hello World') &#125; // btn.onclick = null // è§£ç»‘äº‹ä»¶&lt;/script&gt; ç¼ºç‚¹ï¼šæ— æ³•è®¾ç½®å¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•° DOM2 çº§äº‹ä»¶ &lt;button id=\"btn\" type=\"button\"&gt;&lt;/button&gt;&lt;script&gt; var btn = document.getElementById('btn'); btn.addEventListener('click', showFn, false) btn.addEventListener('click', showFn2, false) // btn.removeEventListener('click', showFn, false) // è§£ç»‘äº‹ä»¶ function showFn() &#123; alert('Hello World'); &#125; function showFn2() &#123; alert('Hello World2'); &#125; &lt;/script&gt; å¯ä»¥ä¸ºäº‹ä»¶è®¾ç½®å¤šä¸ªäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•° ( useCapture ) è®¾ç½®åœ¨ä»€ä¹ˆé˜¶æ®µæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œé»˜è®¤æ˜¯ falseï¼Œ å³åœ¨äº‹ä»¶å†’æ³¡é˜¶æ®µæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ IE8 åŠä»¥ä¸‹ç‰ˆæœ¬éœ€è¦ç”¨ attachEvent å’Œ detachEvent å®ç°ï¼Œåªæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œäº‹ä»¶åéœ€è¦ä»¥ on å¼€å¤´ï¼Œåªæ”¯æŒåœ¨äº‹ä»¶å†’æ³¡é˜¶æ®µæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°ã€‚ DOM3 çº§äº‹ä»¶ DOM3 çº§äº‹ä»¶æ˜¯åœ¨ DOM2 çº§äº‹ä»¶çš„åŸºç¡€ä¸Šæ·»åŠ äº†æ›´å¤šçš„äº‹ä»¶ç±»å‹ï¼Œå…è®¸è‡ªå®šä¹‰äº‹ä»¶ã€‚ UIäº‹ä»¶ï¼Œå½“ç”¨æˆ·ä¸é¡µé¢ä¸Šçš„å…ƒç´ äº¤äº’æ—¶è§¦å‘ï¼Œå¦‚ï¼šloadã€scroll ç„¦ç‚¹äº‹ä»¶ï¼Œå½“å…ƒç´ è·å¾—æˆ–å¤±å»ç„¦ç‚¹æ—¶è§¦å‘ï¼Œå¦‚ï¼šblurã€focus é¼ æ ‡äº‹ä»¶ï¼Œå½“ç”¨æˆ·é€šè¿‡é¼ æ ‡åœ¨é¡µé¢æ‰§è¡Œæ“ä½œæ—¶è§¦å‘å¦‚ï¼šdbclickã€mouseup æ»šè½®äº‹ä»¶ï¼Œå½“ä½¿ç”¨é¼ æ ‡æ»šè½®æˆ–ç±»ä¼¼è®¾å¤‡æ—¶è§¦å‘ï¼Œå¦‚ï¼šmousewheel æ–‡æœ¬äº‹ä»¶ï¼Œå½“åœ¨æ–‡æ¡£ä¸­è¾“å…¥æ–‡æœ¬æ—¶è§¦å‘ï¼Œå¦‚ï¼štextInput é”®ç›˜äº‹ä»¶ï¼Œå½“ç”¨æˆ·é€šè¿‡é”®ç›˜åœ¨é¡µé¢ä¸Šæ‰§è¡Œæ“ä½œæ—¶è§¦å‘ï¼Œå¦‚ï¼škeydownã€keypress åˆæˆäº‹ä»¶ï¼Œå½“ä¸ºIMEï¼ˆè¾“å…¥æ³•ç¼–è¾‘å™¨ï¼‰è¾“å…¥å­—ç¬¦æ—¶è§¦å‘ï¼Œå¦‚ï¼šcompositionstart å˜åŠ¨äº‹ä»¶ï¼Œå½“åº•å±‚DOMç»“æ„å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œå¦‚ï¼šDOMsubtreeModified // è‡ªå®šä¹‰äº‹ä»¶var event = new Event('test')// ç»™å…ƒç´ ç»‘å®šäº‹ä»¶domElement.addEventListener('test', function() &#123; console.log('event test')&#125;,)// è§¦å‘äº‹ä»¶setTimeout(function() &#123; domElement.dispatchEvent(event)&#125;, 1000) DOM äº‹ä»¶æµ æƒ³è±¡ç”»åœ¨ä¸€å¼ çº¸ä¸Šçš„ä¸€ç»„åŒå¿ƒåœ†ã€‚å¦‚æœæŠŠæ‰‹æŒ‡æ”¾åœ¨åœ†å¿ƒä¸Šï¼Œé‚£ä¹ˆæ‰‹æŒ‡æŒ‡å‘çš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªåœ†ï¼Œè€Œæ˜¯çº¸ä¸Šçš„æ‰€æœ‰åœ†ã€‚æ‰€ä»¥å¦‚æœç‚¹å‡»äº†æŸä¸ªæŒ‰é’®ï¼Œç‚¹å‡»äº‹ä»¶ä¸ä»…ä»…å‘ç”Ÿåœ¨è¿™ä¸ªæŒ‰é’®ä¸Šï¼Œæ•´ä¸ªé¡µé¢ä¹Ÿè¢«ç‚¹å‡»äº†ã€‚ äº‹ä»¶æµåˆç§°ä¸ºäº‹ä»¶ä¼ æ’­ï¼Œæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚DOM2 çº§äº‹ä»¶è§„å®šäº‹ä»¶æµåŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µ: äº‹ä»¶æ•è·(capturing phase)ã€ç›®æ ‡äº‹ä»¶(target phase)ã€äº‹ä»¶å†’æ³¡(bubbling phase)ã€‚å‘ç”Ÿçš„é¡ºåºæ˜¯ï¼šäº‹ä»¶æ•è·é˜¶æ®µ â€“&gt; ç›®æ ‡äº‹ä»¶é˜¶æ®µ â€“&gt; äº‹ä»¶å†’æ³¡é˜¶æ®µ äº‹ä»¶å†’æ³¡ äº‹ä»¶å¼€å§‹æ—¶ç”±æœ€å…·ä½“çš„å…ƒç´ (ç›®æ ‡å…ƒç´ )æ¥æ”¶ï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­ã€‚ &lt;style&gt; #parent &#123; width: 200px; height: 200px; background-color: green; &#125; #child &#123; width: 100px; height: 100px; background-color: yellow; &#125;&lt;/style&gt;&lt;div id=\"parent\"&gt; &lt;div id=\"child\"&gt;ç›®æ ‡å…ƒç´ &lt;/div&gt; çˆ¶çº§å…ƒç´ &lt;/div&gt;&lt;script&gt; var parent = document.getElementById('parent') var child = document.getElementById('child') parent.addEventListener('click', function(e) &#123; console.log('parent bubbling') &#125;, false) child.addEventListener('click', function() &#123; console.log('target bubbling') &#125;, false) document.body.addEventListener('click', function() &#123; console.log('body bubbling') &#125;, false) document.documentElement.addEventListener('click', function() &#123; console.log('html bubbling') &#125;, false) document.addEventListener('click', function() &#123; console.log('document bubbling') &#125;, false) window.addEventListener('click', function() &#123; console.log('window bubbling') &#125;, false)&lt;/script&gt; è¿è¡Œç»“æœï¼š äº‹ä»¶æ•è· äº‹ä»¶æŒ‰ window -&gt; document -&gt; html -&gt; body -&gt; â€¦ -&gt; ç›®æ ‡å…ƒç´  çš„æ–¹å‘å‘ä¸‹å±‚å…ƒç´ ä¼ é€’ã€‚ &lt;style&gt; #parent &#123; width: 200px; height: 200px; background-color: green; &#125; #child &#123; width: 100px; height: 100px; background-color: yellow; &#125;&lt;/style&gt;&lt;div id=\"parent\"&gt; &lt;div id=\"child\"&gt;ç›®æ ‡å…ƒç´ &lt;/div&gt; çˆ¶çº§å…ƒç´ &lt;/div&gt;&lt;script&gt; var parent = document.getElementById('parent') var child = document.getElementById('child') parent.addEventListener('click', function(e) &#123; console.log('parent capture') &#125;, true) child.addEventListener('click', function() &#123; console.log('target capture') &#125;, true) document.body.addEventListener('click', function() &#123; console.log('body capture') &#125;, true) document.documentElement.addEventListener('click', function() &#123; console.log('html capture') &#125;, true) document.addEventListener('click', function() &#123; console.log('document capture') &#125;, true) window.addEventListener('click', function() &#123; console.log('window capture') &#125;, true)&lt;/script&gt; è¿è¡Œç»“æœï¼š äº‹ä»¶å¯¹è±¡å‚æ•° event åœ¨ç”¨æˆ·è§¦å‘äº‹ä»¶ï¼Œæ‰§è¡Œäº‹ä»¶å¤„ç†å‡½æ•°çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šå‘äº‹ä»¶å¤„ç†å‡½æ•°ä¼ å…¥ä¸€ä¸ª event å¯¹è±¡ï¼Œå®ƒè®°å½•äº†è¯¥äº‹ä»¶çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚ event å¸¸ç”¨å±æ€§å’Œæ–¹æ³• type äº‹ä»¶ç±»å‹ target äº‹ä»¶å‘å‡ºè€…(è§¦å‘äº‹ä»¶çš„å…ƒç´ ) currentTarget äº‹ä»¶ç›‘å¬è€…(è¢«ç»‘å®šäº‹ä»¶çš„å…ƒç´ ) stopPropagation() é˜»æ­¢äº‹ä»¶å†’æ³¡æˆ–æ•è· preventDefault() é˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º target ã€currentTarget ä¸ this&lt;div id=\"parent\"&gt; &lt;div id=\"child\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;script&gt; var parent = document.getElementById('parent') function handler(e) &#123; console.log(e.target) console.log(e.currentTarget) console.log(this) &#125; // ç»™çˆ¶ç›’å­æ³¨å†Œç‚¹å‡»äº‹ä»¶ parent.addEventListener('click', handler, false)&lt;/script&gt; å½“ç‚¹å‡» parent æ—¶ï¼Œè¾“å‡ºï¼š 1 &lt;div id=\"parent\"&gt;...&lt;/div&gt;2 &lt;div id=\"parent\"&gt;...&lt;/div&gt;3 &lt;div id=\"parent\"&gt;...&lt;/div&gt; å½“ç‚¹å‡» child æ—¶ï¼Œè¾“å‡ºï¼š 1 &lt;div id=\"child\"&gt;...&lt;/div&gt;2 &lt;div id=\"parent\"&gt;...&lt;/div&gt;3 &lt;div id=\"parent\"&gt;...&lt;/div&gt; æ‰€ä»¥ target æ˜¯äº‹ä»¶å‘å‡ºè€…ï¼ŒcurentTarget æ˜¯äº‹ä»¶ç›‘å¬è€…ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„ this ç­‰åŒäº e.currentTarget event å¯¹è±¡çš„ä¸€äº›å…¼å®¹æ€§å†™æ³• è·å¾— event // äº‹ä»¶å¤„ç†å‡½æ•°function handleClick(event) &#123; var e = event || window.event Â·Â·Â·&#125; è·å¾— target Â·Â·Â·var target = e.target || e.srcElementÂ·Â·Â· é˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º Â·Â·Â·e.preventDefault ? e.preventDefault() : (e.returnValue = false)Â·Â·Â· é˜»æ­¢å†’æ³¡ Â·Â·Â·e.stopPropagation ? e.stopPropagation() : (e.cancelBubble = true)Â·Â·Â· äº‹ä»¶ç»‘å®šä¸è§£ç»‘ function addEvent(element, type, fn) &#123; element.addEventListener ? element.addEventListener(type, fn, false) : element.attachEvent('on'+ type, fn)&#125;function removeEvent(element, type, fn) &#123; element.removeEventListener ? element.removeEventListener(type, fn, false) : element.detachEvent('on'+ type, fn)&#125; å±æ€§è¡¨ åŸºç¡€å±æ€§ å±æ€§ æè¿° altKey è¿”å›å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œâ€ALTâ€ æ˜¯å¦è¢«æŒ‰ä¸‹ã€‚ button è¿”å›å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå“ªä¸ªé¼ æ ‡æŒ‰é’®è¢«ç‚¹å‡»ã€‚ clientX è¿”å›å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œé¼ æ ‡æŒ‡é’ˆçš„æ°´å¹³åæ ‡ã€‚ clientY è¿”å›å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œé¼ æ ‡æŒ‡é’ˆçš„å‚ç›´åæ ‡ã€‚ ctrlKey è¿”å›å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œâ€CTRLâ€ é”®æ˜¯å¦è¢«æŒ‰ä¸‹ã€‚ metaKey è¿”å›å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œâ€metaâ€ é”®æ˜¯å¦è¢«æŒ‰ä¸‹ã€‚ relatedTarget è¿”å›ä¸äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ç›¸å…³çš„èŠ‚ç‚¹ã€‚ screenX è¿”å›å½“æŸä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œé¼ æ ‡æŒ‡é’ˆçš„æ°´å¹³åæ ‡ã€‚ screenY è¿”å›å½“æŸä¸ªäº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œé¼ æ ‡æŒ‡é’ˆçš„å‚ç›´åæ ‡ã€‚ shiftKey è¿”å›å½“äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œâ€SHIFTâ€ é”®æ˜¯å¦è¢«æŒ‰ä¸‹ã€‚ IE å±æ€§ å±æ€§ æè¿° cancelBubble å¦‚æœäº‹ä»¶å¥æŸ„æƒ³é˜»æ­¢äº‹ä»¶ä¼ æ’­åˆ°åŒ…å®¹å¯¹è±¡ï¼Œå¿…é¡»æŠŠè¯¥å±æ€§è®¾ä¸º trueã€‚ fromElement å¯¹äº mouseover å’Œ mouseout äº‹ä»¶ï¼ŒfromElement å¼•ç”¨ç§»å‡ºé¼ æ ‡çš„å…ƒç´ ã€‚ keyCode å¯¹äº keypress äº‹ä»¶ï¼Œè¯¥å±æ€§å£°æ˜äº†è¢«æ•²å‡»çš„é”®ç”Ÿæˆçš„ Unicode å­—ç¬¦ç ã€‚å¯¹äº keydown å’Œ keyup offsetX,offsetY å‘ç”Ÿäº‹ä»¶çš„åœ°ç‚¹åœ¨äº‹ä»¶æºå…ƒç´ çš„åæ ‡ç³»ç»Ÿä¸­çš„ x åæ ‡å’Œ y åæ ‡ã€‚ returnValue å¦‚æœè®¾ç½®äº†è¯¥å±æ€§ï¼Œå®ƒçš„å€¼æ¯”äº‹ä»¶å¥æŸ„çš„è¿”å›å€¼ä¼˜å…ˆçº§é«˜ã€‚æŠŠè¿™ä¸ªå±æ€§è®¾ç½®ä¸º false å¯ä»¥é˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º srcElement å¯¹äºç”Ÿæˆäº‹ä»¶çš„ Window å¯¹è±¡ã€Document å¯¹è±¡æˆ– Element å¯¹è±¡çš„å¼•ç”¨ã€‚ toElement å¯¹äº mouseover å’Œ mouseout äº‹ä»¶ï¼Œè¯¥å±æ€§å¼•ç”¨ç§»å…¥é¼ æ ‡çš„å…ƒç´ ã€‚ x,y äº‹ä»¶å‘ç”Ÿçš„ä½ç½®çš„ x åæ ‡å’Œ y åæ ‡ï¼Œå®ƒä»¬ç›¸å¯¹äºç”¨CSSåŠ¨æ€å®šä½çš„æœ€å†…å±‚åŒ…å®¹å…ƒç´ ã€‚ æ ‡å‡† event å±æ€§ï¼ˆ2çº§ DOM äº‹ä»¶æ ‡å‡†å®šä¹‰çš„å±æ€§ï¼‰ å±æ€§æˆ–æ–¹æ³• æè¿° bubbles è¿”å›å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºäº‹ä»¶æ˜¯å¦æ˜¯å†’æ³¡äº‹ä»¶ç±»å‹ã€‚ cancelable è¿”å›å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºäº‹ä»¶æ˜¯å¦å¯æ‹¥å¯å–æ¶ˆçš„é»˜è®¤åŠ¨ä½œã€‚ currentTarget è¿”å›å…¶äº‹ä»¶ç›‘å¬å™¨è§¦å‘è¯¥äº‹ä»¶çš„å…ƒç´ ã€‚ eventPhase è¿”å›äº‹ä»¶ä¼ æ’­çš„å½“å‰é˜¶æ®µã€‚ target è¿”å›è§¦å‘æ­¤äº‹ä»¶çš„å…ƒç´ ï¼ˆäº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ï¼‰ã€‚ timeStamp è¿”å›äº‹ä»¶ç”Ÿæˆçš„æ—¥æœŸå’Œæ—¶é—´ã€‚ type è¿”å›å½“å‰ Event å¯¹è±¡è¡¨ç¤ºçš„äº‹ä»¶çš„åç§°ã€‚ initEvent() åˆå§‹åŒ–æ–°åˆ›å»ºçš„ Event å¯¹è±¡çš„å±æ€§ã€‚ preventDefault() é€šçŸ¥æµè§ˆå™¨ä¸è¦æ‰§è¡Œä¸äº‹ä»¶å…³è”çš„é»˜è®¤åŠ¨ä½œã€‚ stopPropagation() ä¸å†æ´¾å‘äº‹ä»¶ï¼ˆå¸¸ç”¨äºé˜»æ­¢äº‹ä»¶å†’æ³¡ï¼‰ã€‚","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"inknight.cn/tags/HTML/"},{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"},{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"}]},{"title":"CSSç›’æ¨¡å‹åˆ†æ","slug":"CSSç›’æ¨¡å‹åˆ†æ","date":"2019-01-22T12:15:38.000Z","updated":"2019-03-30T00:50:38.271Z","comments":true,"path":"2019/01/22/CSSç›’æ¨¡å‹åˆ†æ/","link":"","permalink":"inknight.cn/2019/01/22/CSSç›’æ¨¡å‹åˆ†æ/","excerpt":"CSS ç›’æ¨¡å‹æ˜¯å‰ç«¯å­¦ä¹ ä¸­çš„åŸºç¡€ï¼Œæ€»ç»“ä¸€ä¸‹~","text":"CSS ç›’æ¨¡å‹æ˜¯å‰ç«¯å­¦ä¹ ä¸­çš„åŸºç¡€ï¼Œæ€»ç»“ä¸€ä¸‹~ åŸºæœ¬æ¦‚å¿µé¡µé¢ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å¯ä»¥çœ‹æˆä¸€ä¸ªç›’å­ï¼Œç›’å­é‡Œé¢å¯ä»¥è£…å…¶ä»–ç›’å­ï¼Œå±‚å±‚åµŒå¥—ã€‚html æ ‡ç­¾å°±æ˜¯æœ€å¤–é¢çš„å¤§ç›’å­ã€‚æ¯ä¸ªç›’å­ç”±å†…å‘å¤–åˆ†åˆ«æ˜¯ content, padding, border, margin ã€‚ åˆ†ç±»ç›’æ¨¡å‹æœ‰ä¸¤ç§ï¼Œæ ‡å‡†ç›’æ¨¡å‹ å’Œ IEç›’æ¨¡å‹ ã€‚ä¸»è¦åŒºåˆ«æ˜¯å®ƒä»¬çš„ width å’Œ height ä¸åŒ æ ‡å‡†ç›’æ¨¡å‹ ç›’å­å®½é«˜æ˜¯ content(å†…å®¹) çš„å®½é«˜ IEç›’æ¨¡å‹ ç›’å­å®½é«˜æ˜¯ border + padding + content çš„å®½é«˜ æµè§ˆå™¨é»˜è®¤ä½¿ç”¨æ ‡å‡†ç›’æ¨¡å‹ï¼Œåœ¨ ie8+ ä¸­ å¯ä»¥é€šè¿‡è®¾ç½® box-sizing æ ·å¼å±æ€§æ”¹å˜ç›’æ¨¡å‹box-sizing: content-box â€”&gt; æ ‡å‡†ç›’æ¨¡å‹ï¼ˆé»˜è®¤ï¼‰ border-box â€”&gt; IE ç›’æ¨¡å‹é€šè¿‡ js è·å–ç›’å­å®½é«˜ ä»¥ä¸‹ domElement æ˜¯è¡¨ç¤º HTML å…ƒç´ çš„ä¼ªä»£ç  domElement.style.width/height åªèƒ½è·å–å†…è”æ ·å¼ä¸­çš„å®½é«˜ domElement.currentStyle.width/height è·å–çš„æ˜¯æµè§ˆä¸­æ¸²æŸ“å®Œæˆåå…ƒç´ çš„å®½é«˜ï¼Œåªæœ‰ IE æµè§ˆå™¨æ”¯æŒ window.getComputedStyle(domElement).width/height å’Œæ–¹å¼2ä¸€æ ·ï¼Œä½†å¯ä»¥å…¼å®¹æ›´å¤šæµè§ˆå™¨ domElement.offsetWidth/offsetHeight ä¸ç®¡ä½¿ç”¨çš„ä»€ä¹ˆç›’æ¨¡å‹ï¼Œè·å–çš„éƒ½æ˜¯ IEç›’æ¨¡å‹ çš„å®½é«˜ å¤–è¾¹è·æŠ˜å é—®é¢˜ ç›¸é‚»å…ƒç´ åœ¨ç«–ç›´æ–¹å‘ä¸Šçš„å¤–è¾¹è·åœ¨ç›¸é‡æ—¶ä¼šå‘ç”Ÿåˆå¹¶ï¼Œåˆå¹¶åçš„å¤–è¾¹è·çš„é«˜åº¦ç­‰äºä¸¤ä¸ªå¤–è¾¹è·ä¸­è¾ƒå¤§çš„é‚£ä¸ªå€¼ã€‚ å…„å¼Ÿå…ƒç´ é—´ çˆ¶å­å…ƒç´ é—´ å¤–è¾¹è·æŠ˜å è§£å†³æ–¹æ¡ˆï¼ˆBFCï¼‰ Block Formatting Context ï¼ˆå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰ BFC å¯ä»¥ç®€å•åœ°ç†è§£ä¸ºæŸä¸ªå…ƒç´ çš„ä¸€ä¸ª CSS å±æ€§ï¼Œåªä¸è¿‡è¿™ä¸ªå±æ€§ä¸èƒ½è¢«å¼€å‘è€…æ˜¾å¼çš„ä¿®æ”¹ï¼Œæ‹¥æœ‰è¿™ä¸ªå±æ€§çš„å…ƒç´ å¯¹å†…éƒ¨å…ƒç´ å’Œå¤–éƒ¨å…ƒç´ ä¼šè¡¨ç°å‡ºä¸€äº›ç‰¹æ€§ï¼Œè¿™å°±æ˜¯BFCã€‚ æ€æ ·è®©å…ƒç´ åˆ›å»º BFC float çš„å€¼ä¸ä¸º none ï¼ˆæµ®åŠ¨å…ƒç´ ï¼‰ overflow çš„å€¼ä¸ä¸º visible display çš„å€¼ä¸º inline-block ã€table-caption ã€ table-cell ã€flex ã€inline-flex positon çš„å€¼ä¸º absolute æˆ– fixed &lt;html&gt;(æ ¹å…ƒç´ ) BFC çš„å¸ƒå±€è§„åˆ™ å†…éƒ¨çš„ box ä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½® ï¼ˆå¹³æ—¶è¯´çš„å—çº§å…ƒç´ ä¸€è¡Œè¡Œæ”¾ï¼‰ box é—´å‚ç›´æ–¹å‘çš„è·ç¦»ç”± margin å†³å®š ã€‚åŒä¸€ä¸ªBFCä¸­çš„ä¸¤ä¸ªç›¸é‚»çš„ box è¿˜æ˜¯ä¼šäº§ç”Ÿå¤–è¾¹è·é‡å é—®é¢˜ BFC çš„åŒºåŸŸä¸ä¼šä¸ æµ®åŠ¨çš„ box é‡å  BFC æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ï¼Œé‡Œé¢çš„å…ƒç´ ä¸ä¼šå½±å“å¤–é¢çš„å…ƒç´ ï¼Œåä¹‹äº¦ç„¶ã€‚ åŒ…å«æµ®åŠ¨å…ƒç´ ï¼Œè®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨çš„å…ƒç´ ä¹Ÿä¼šå‚ä¸è®¡ç®— BFC çš„åº”ç”¨åœºæ™¯ åˆ†å±äºä¸åŒ BFC çš„å…ƒç´ å¯ä»¥é˜²æ­¢å‚ç›´å¤–è¾¹è·æŠ˜å  æ¸…é™¤å†…éƒ¨æµ®åŠ¨ï¼ˆä½¿æµ®åŠ¨å…ƒç´ å¯ä»¥æ’‘èµ·çˆ¶ç›’å­ï¼‰ è‡ªé€‚åº”ä¸¤æ å¸ƒå±€ï¼ˆBFC åŒºåŸŸä¸ä¼šä¸æµ®åŠ¨å…ƒç´ é‡å ï¼‰ é˜²æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›– float + BFC ä¸¤æ å¸ƒå±€:&lt;div class=\"parent\"&gt; &lt;div class=\"left\"&gt;left&lt;/div&gt; &lt;div class=\"right\"&gt;right&lt;/div&gt;&lt;/div&gt;&lt;style&gt; .left &#123; float: left; width: 100px; background-color: blue; &#125; .right &#123; overflow: hidden; /* è§¦å‘ BFC */ background-color: green; &#125;&lt;/style&gt;","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"inknight.cn/tags/HTML/"},{"name":"åŸºç¡€æ€»ç»“","slug":"åŸºç¡€æ€»ç»“","permalink":"inknight.cn/tags/åŸºç¡€æ€»ç»“/"}]},{"title":"åˆè¯†Three.js","slug":"åˆè¯†Three-js","date":"2018-12-28T14:08:15.000Z","updated":"2019-03-30T00:50:25.307Z","comments":true,"path":"2018/12/28/åˆè¯†Three-js/","link":"","permalink":"inknight.cn/2018/12/28/åˆè¯†Three-js/","excerpt":"ä»€ä¹ˆæ˜¯ Three.js ? ç®€å•æ¥çœ‹, Three æ˜¯ 3D çš„æ„æ€, js æ˜¯ JavaScript , ä¹Ÿå°±æ˜¯ç”¨ JavaScript å¼€å‘ 3D çš„åº”ç”¨ç¨‹åºã€‚","text":"ä»€ä¹ˆæ˜¯ Three.js ? ç®€å•æ¥çœ‹, Three æ˜¯ 3D çš„æ„æ€, js æ˜¯ JavaScript , ä¹Ÿå°±æ˜¯ç”¨ JavaScript å¼€å‘ 3D çš„åº”ç”¨ç¨‹åºã€‚ HelloWorldÂ·Â·Â·&lt;head&gt; &lt;meta charset=\"UTF-8\"&gt; &lt;title&gt; HelloWorld &lt;/title&gt; &lt;!-- 0. å¼•å…¥three.js æ–‡ä»¶ --&gt; &lt;script src=\"./js/three.js\" &gt;&lt;/script&gt;&lt;/head&gt;Â·Â·Â· // 1. åˆ›å»ºåœºæ™¯var scene = new THREE.Scene()// 2. åˆ›å»ºç›¸æœºvar camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000)camera.position.z = 5 //è®¾ç½®ç›¸æœºä½ç½®// 3. åˆ›å»ºå¹¶è®¾ç½®æ¸²æŸ“å™¨var renderer = new THREE.WebGLRenderer(&#123;antialias: true&#125;)renderer.setSize(window.innerWidth, window.innerHeight)document.body.appendChild(renderer.domElement)// 4. åˆ›å»ºç½‘æ ¼æ¨¡å‹æ·»åŠ åˆ°åœºæ™¯ä¸­var cube = new THREE.Mesh(new THREE.CubeGeometry(1, 2, 1), new THREE.MeshBasicMaterial(&#123;color: 0x00ffff&#125;))scene.add(cube)// 5. æ¸²æŸ“// è®¾ç½®ä¸€ä¸ªåŠ¨ç”»å‡½æ•°var animate = function () &#123; // åœ¨æµè§ˆå™¨ä¸‹æ¬¡é‡ç»˜å‰æ‰§è¡Œå›è°ƒå‡½æ•° å›è°ƒçš„æ¬¡æ•°é€šå¸¸æ˜¯æ¯ç§’60æ¬¡ ä¹Ÿå°±æ˜¯å¸¸è¯´çš„FPS æ˜¯60 requestAnimationFrame(animate) // æ¨¡å‹æ—‹è½¬ cube.rotation.x += 0.01 cube.rotation.y += 0.01 //æ¸²æŸ“æ‘„åƒæœºçœ‹è§çš„åœºæ™¯ renderer.render(scene, camera)&#125;animate() æ¸²æŸ“ç»“æœï¼š å¿…è¦çš„ä¸‰ä¸ªç»„ä»¶åœºæ™¯åˆ›å»ºåœºæ™¯ï¼š var scene = new THREE.Scene() åœºæ™¯æ˜¯æ‰€æœ‰ç‰©ä½“çš„å®¹å™¨ã€‚ ç›¸æœºåˆ›å»ºç›¸æœºï¼š var camera = new THREE.PerspectiveCamera(è§†å£è§’åº¦, width/height, è§†é‡æœ€è¿‘è·ç¦», è§†é‡æœ€è¿œè·ç¦») ç›¸æœºå°±åƒäººçš„çœ¼ç›ã€‚ æ¸²æŸ“å™¨ åˆ›å»ºæ¸²æŸ“å™¨ï¼š var renderer = new THREE.WebGLRenderer() è®¾ç½®æ¸²æŸ“åŒºåŸŸå°ºå¯¸ï¼š renderer.setSize(width, height) ç”»å¸ƒæ·»åŠ åˆ°é¡µé¢ä¸­ï¼š documment.body.appendChild(render.domElement) æ¸²æŸ“å™¨å°±åƒè§†è§‰ç¥ç»ï¼Œç¼ºå°‘å®ƒï¼Œæˆ‘ä»¬ä»€ä¹ˆä¹Ÿçœ‹ä¸è§ã€‚ åæ ‡ç³»ä¸‰ç»´åæ ‡ç³»åˆ†ä¸ºä¸¤ç§ï¼š å·¦æ‰‹åæ ‡ç³» å³æ‰‹åæ ‡ç³» åœ¨ There.js ä¸­é‡‡ç”¨çš„æ˜¯å³æ‰‹åæ ‡ç³»ã€‚ ç‰©ä½“æ—‹è½¬çš„æ–¹å‘ mesh.rotation.y += 0.1 æ­£æ–¹å‘æ˜¯å››æŒ‡æŒ‡å‘çš„æ–¹å‘","categories":[{"name":"Three.js","slug":"Three-js","permalink":"inknight.cn/categories/Three-js/"}],"tags":[{"name":"JavaScript","slug":"JavaScript","permalink":"inknight.cn/tags/JavaScript/"},{"name":"WebGL","slug":"WebGL","permalink":"inknight.cn/tags/WebGL/"}]},{"title":"HTMLç¬”è®°","slug":"HTMLç¬”è®°","date":"2018-10-02T09:48:20.000Z","updated":"2019-03-30T00:50:34.501Z","comments":true,"path":"2018/10/02/HTMLç¬”è®°/","link":"","permalink":"inknight.cn/2018/10/02/HTMLç¬”è®°/","excerpt":"HTMLåˆè¯†","text":"HTMLåˆè¯† Hyper Text Markup Languageï¼ˆè¶…æ–‡æœ¬æ ‡è®°è¯­è¨€ï¼‰ ç”¨æ ‡ç­¾æ¥æè¿°ç½‘é¡µçš„ç»“æ„å†…å®¹HTMLè¯­æ³•éª¨æ¶ï¼š &lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;é¡µé¢æ ‡é¢˜&lt;/title&gt; &lt;!-- è¿˜å¯ä»¥æ’å…¥å…¶ä»–metaã€æ ·å¼å•ç­‰ä¿¡æ¯ --&gt;&lt;/head&gt;&lt;body&gt;é¡µé¢å†…å®¹éƒ¨åˆ†&lt;/body&gt;&lt;/html&gt;&lt;!-- æ³¨æ„ï¼šä¸è¦åœ¨&lt;html&gt;å’Œ&lt;head&gt;ä¹‹é—´æ’å…¥ä»»ä½•å†…å®¹ &lt;/head&gt;å’Œ&lt;body&gt; &lt;/body&gt;å’Œ&lt;/html&gt; ä¹‹é—´æ’å…¥å†…å®¹--&gt; HTML æ ‡ç­¾HTML å…ƒç´ &lt;p&gt;This is a paragraph&lt;/p&gt;&lt;a href=\"#\"&gt;This is a link&lt;/a&gt;&lt;br /&gt; å¼€å§‹æ ‡ç­¾ å…ƒç´ å†…å®¹ ç»“æŸæ ‡ç­¾ &lt;p&gt; This is a paragraph &lt;/p&gt; &lt;a href=&quot;#&quot;&gt; This is a link &lt;/a&gt; &lt;br /&gt; HTML å…ƒç´ æŒ‡çš„æ˜¯ä»å¼€å§‹æ ‡ç­¾åˆ°ç»“æŸæ ‡ç­¾çš„æ‰€æœ‰ä»£ç  HTML å…ƒç´ è¯­æ³• HTML å…ƒç´ ä»¥å¼€å§‹æ ‡ç­¾èµ·å§‹ HTML å…ƒç´ ä»¥ç»“æŸæ ‡ç­¾ç»ˆæ­¢ å…ƒç´ çš„å†…å®¹æ˜¯å¼€å§‹æ ‡ç­¾ä¸ç»“æŸæ ‡ç­¾ä¹‹é—´çš„å†…å®¹ ç©ºå…ƒç´ åœ¨å¼€å§‹æ ‡ç­¾ä¸­è¿›è¡Œå…³é—­ï¼ˆä»¥å¼€å§‹æ ‡ç­¾çš„ç»“æŸè€Œç»“æŸï¼‰ å¤§å¤šæ•°HTMLå…ƒç´ å¯æ‹¥æœ‰å±æ€§ æ’ç‰ˆæ ‡ç­¾ æ ‡é¢˜æ ‡ç­¾ &lt;h1&gt;&lt;/h1&gt; &lt;h2&gt;&lt;/h2&gt; &lt;h3&gt;&lt;/h3&gt; &lt;h4&gt;&lt;/h4&gt; &lt;h5&gt;&lt;/h5&gt; &lt;h6&gt;&lt;/h6&gt; æ³¨æ„ï¼š h1 æ ‡ç­¾å› ä¸ºé‡è¦ï¼Œå°½é‡å°‘ç”¨ï¼Œä¸è¦åŠ¨ä¸åŠ¨å°±å‘ä½ æ‰”äº†ä¸€ä¸ªh1ã€‚ä¸€èˆ¬h1éƒ½æ˜¯ç»™logoä½¿ç”¨ï¼Œæˆ–è€…é¡µé¢ä¸­æœ€é‡è¦æ ‡é¢˜ä¿¡æ¯ã€‚ æ®µè½æ ‡ç­¾ &lt;p&gt;æ–‡æœ¬å†…å®¹&lt;/p&gt; æ°´å¹³çº¿æ ‡ç­¾ï¼ˆhorizontalï¼‰ &lt;hr /&gt; &lt;!-- åœ¨html5é‡Œå¯ä»¥å†™æˆ&lt;hr&gt; å•æ ‡ç­¾(ç©ºå…ƒç´ )å¯ä»¥çœç•¥ç»“æŸæ ‡ç­¾--&gt; æ¢è¡Œæ ‡ç­¾ï¼ˆbreakï¼‰ &lt;br /&gt; åœ¨HTMLä¸­ï¼Œä¸€ä¸ªæ®µè½ä¸­çš„æ–‡å­—ä¼šä»å·¦åˆ°å³ä¾æ¬¡æ’åˆ—ï¼Œç›´åˆ°æµè§ˆå™¨çª—å£çš„å³ç«¯ï¼Œç„¶åè‡ªåŠ¨æ¢è¡Œã€‚å¦‚æœå¸Œæœ›æŸæ®µæ–‡æœ¬å¼ºåˆ¶æ¢è¡Œæ˜¾ç¤ºï¼Œå°±éœ€è¦ä½¿ç”¨æ¢è¡Œæ ‡ç­¾ div spanæ ‡ç­¾ &lt;div&gt;&lt;/div&gt;&lt;div&gt;&lt;/div&gt; &lt;!-- ä¸åœ¨åŒä¸€è¡Œ --&gt;&lt;span&gt;&lt;/span&gt;&lt;span&gt;&lt;/span&gt; &lt;!-- åœ¨åŒä¸€è¡Œ --&gt; &lt;div&gt;å…ƒç´ æ˜¯å—çº§å…ƒç´ ï¼Œå®ƒæ˜¯å¯ç”¨äºç»„åˆå…¶ä»– HTML å…ƒç´ çš„å®¹å™¨ã€‚&lt;div&gt;å…ƒç´ æ²¡æœ‰ç‰¹å®šçš„å«ä¹‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºå®ƒå±äºå—çº§å…ƒç´ ï¼Œæµè§ˆå™¨ä¼šåœ¨å…¶å‰åæ˜¾ç¤ºæŠ˜è¡Œã€‚&lt;span&gt;å…ƒç´ æ˜¯å†…è”å…ƒç´ ï¼Œå¯ç”¨ä½œæ–‡æœ¬çš„å®¹å™¨&lt;span&gt;å…ƒç´ ä¹Ÿæ²¡æœ‰ç‰¹å®šå«ä¹‰ã€‚å†…è”å…ƒç´ åœ¨æ˜¾ç¤ºæ—¶é€šå¸¸ä¸ä¼šä»¥æ–°è¡Œå¼€å§‹ã€‚ æ–‡æœ¬æ ¼å¼åŒ–æ ‡ç­¾ æ ‡ç­¾ ä½œç”¨ &lt;b&gt;&lt;/b&gt; &lt;strong&gt;&lt;/strong&gt; ç²—ä½“ &lt;i&gt;&lt;/i&gt; &lt;em&gt;&lt;/em&gt; æ–œä½“ &lt;s&gt;&lt;/s&gt; &lt;del&gt;&lt;/del&gt; åˆ é™¤çº¿ &lt;u&gt;&lt;/u&gt; &lt;ins&gt;&lt;/ins&gt; ä¸‹åˆ’çº¿ strong em del ins è¯­ä¹‰æ›´å¼ºçƒˆ å›¾åƒæ ‡ç­¾&lt;img src=\"å›¾åƒçš„URL\" alt=\"å›¾åƒä¸èƒ½æ˜¾ç¤ºæ—¶çš„æ›¿æ¢æ–‡å­—\" title=\"é¼ æ ‡æ‚¬åœçš„æ˜¾ç¤ºå†…å®¹\" width=\"\" height=\"\" border=\"\"/&gt; é“¾æ¥æ ‡ç­¾&lt;a href=\"è·³è½¬ç›®æ ‡\" target=\"å®šä¹‰è¢«é“¾æ¥çš„æ–‡æ¡£åœ¨ä½•å¤„æ˜¾ç¤º\"&gt;æ–‡æœ¬æˆ–å›¾ç‰‡&lt;/a&gt; é”šç‚¹å®šä½ 1.ä½¿ç”¨&lt;a href=&quot;#(idå)&quot;&gt;é“¾æ¥&lt;/a&gt;åˆ›å»ºä¸€ä¸ªé“¾æ¥ã€‚&lt;a href=&quot;#two&quot;&gt;ç¬¬äºŒé›†&lt;/a&gt;2.ä½¿ç”¨ç›¸åº”çš„idåæ ‡æ³¨è·³è½¬çš„ç›®æ ‡ä½ç½®ã€‚&lt;h3 id=&quot;two&quot;&gt;ç¬¬äºŒé›†&lt;/h3&gt; å°† # idåæ·»åŠ åˆ°URLçš„æœ«ç«¯ï¼Œå°±å¯ä»¥ç›´æ¥è·³è½¬åˆ°æŒ‡å®šé¡µé¢çš„æŒ‡å®šä½ç½®ã€‚ base æ ‡ç­¾Â·Â·Â·&lt;head&gt;Â·Â·Â·&lt;base target=\"_blank\" /&gt;&lt;base href=\"http://www.w3school.com.cn\" /&gt;Â·Â·Â·&lt;/head&gt;Â·Â·Â· &lt;base&gt;æ ‡ç­¾ä¸ºé¡µé¢ä¸Šæ‰€æœ‰é“¾æ¥è§„å®šé»˜è®¤åœ°å€æˆ–ç›®æ ‡ æ ‡ç­¾å¿…é¡»ä½äº head å…ƒç´ å†…éƒ¨ åˆ—è¡¨æ ‡ç­¾ æ— åºåˆ—è¡¨ &lt;ul&gt; &lt;li&gt;åˆ—è¡¨é¡¹1&lt;/li&gt; &lt;li&gt;åˆ—è¡¨é¡¹2&lt;/li&gt; Â·Â·Â·&lt;/ul&gt; æœ‰åºåˆ—è¡¨ &lt;ol&gt; &lt;li&gt;åˆ—è¡¨é¡¹1&lt;/li&gt; &lt;li&gt;åˆ—è¡¨é¡¹2&lt;/li&gt; Â·Â·Â·&lt;/ol&gt; è‡ªå®šä¹‰åˆ—è¡¨ &lt;dl&gt; &lt;dt&gt;åè¯1&lt;/dt&gt; &lt;dd&gt;åè¯1è§£é‡Š1&lt;/dd&gt; &lt;dd&gt;åè¯1è§£é‡Š2&lt;/dd&gt; Â·Â·Â· &lt;dt&gt;åè¯2&lt;/dt&gt; &lt;dd&gt;åè¯2è§£é‡Š1&lt;/dd&gt; &lt;dd&gt;åè¯2è§£é‡Š2&lt;/dd&gt; Â·Â·Â· Â·Â·Â·&lt;/dl&gt; è¡¨æ ¼æ ‡ç­¾&lt;table&gt; &lt;tr&gt; &lt;td&gt;&lt;td&gt; Â·Â·Â· &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;/td&gt; Â·Â·Â· &lt;/tr&gt; Â·Â·Â·&lt;/table&gt; è¡¨æ ¼å±æ€§ å±æ€§å å«ä¹‰ é»˜è®¤å€¼ border è¡¨æ ¼è¾¹æ¡† 0px cellspacing å•å…ƒæ ¼ä¸å•å…ƒæ ¼è¾¹æ¡†ä¹‹é—´çš„è·ç¦» 2px cellpadding å•å…ƒæ ¼å†…å®¹ä¸è¾¹æ¡†çš„è·ç¦» 1px width è¡¨æ ¼å®½åº¦ height è¡¨æ ¼é«˜åº¦ align è¡¨æ ¼åœ¨ç½‘é¡µæ°´å¹³å¯¹é½æ–¹å¼ left(/center/right) è¡¨å¤´æ ‡ç­¾ è¡¨å¤´å•å…ƒæ ¼ä¸€èˆ¬ä½äºè¡¨æ ¼çš„ç¬¬ä¸€è¡Œæˆ–ç¬¬ä¸€åˆ—ï¼Œå…¶æ–‡æœ¬é»˜è®¤åŠ ç²—å±…ä¸­ã€‚ç”¨&lt;th&gt;&lt;/th&gt;æ›¿æ¢&lt;td&gt;&lt;/td&gt;å³å¯å°†æ™®é€šå•å…ƒæ ¼æ¢æˆè¡¨å¤´å•å…ƒæ ¼ è¡¨æ ¼ç»“æ„&lt;table&gt; &lt;caption&gt;è¡¨æ ¼æ ‡é¢˜&lt;/caption&gt; &lt;thead&gt; &lt;/thead&gt; &lt;tbody&gt; &lt;tr&gt; &lt;td&gt;&lt;/td&gt; Â·Â·Â· &lt;/tr&gt; Â·Â·Â· &lt;/tbody&gt;&lt;/table&gt; åˆå¹¶å•å…ƒæ ¼ è·¨è¡Œåˆå¹¶ï¼šrowspan è·¨åˆ—åˆå¹¶ï¼šcolspan 1.å…ˆç¡®å®šæ˜¯è·¨è¡Œè¿˜æ˜¯è·¨åˆ— 2.æ ¹æ®å…ˆä¸Šåä¸‹ï¼Œå…ˆå·¦åå³æ‰¾åˆ°ç›®æ ‡å•å…ƒæ ¼ 3.åˆå¹¶ååˆ é™¤å¤šä½™å•å…ƒæ ¼ è¡¨å•æ ‡ç­¾ä¸€ä¸ªå®Œæ•´çš„è¡¨å•é€šå¸¸ç”±è¡¨å•æ§ä»¶ï¼ˆä¹Ÿç§°ä¸ºè¡¨å•å…ƒç´ ï¼‰ã€æç¤ºä¿¡æ¯å’Œè¡¨å•åŸŸ3ä¸ªéƒ¨åˆ†æ„æˆã€‚ è¡¨å•æ§ä»¶ï¼š åŒ…å«äº†å…·ä½“çš„è¡¨å•åŠŸèƒ½é¡¹ï¼Œå¦‚å•è¡Œæ–‡æœ¬è¾“å…¥æ¡†ã€å¯†ç è¾“å…¥æ¡†ã€å•é€‰æ¡†ã€å¤é€‰æ¡†ã€æäº¤æŒ‰é’®ã€é‡ç½®æŒ‰é’®ç­‰ã€‚ æç¤ºä¿¡æ¯ï¼šç»™ç”¨æˆ·çœ‹çš„ä¿¡æ¯ è¡¨å•åŸŸï¼šä¸€ä¸ªå®¹çº³è¡¨å•ä¿¡æ¯å’Œè¡¨å•æ§ä»¶çš„å®¹å™¨ï¼Œå¯ä»¥å®šä¹‰å¤„ç†è¡¨å•æ•°æ®æ‰€ç”¨ç¨‹åºçš„URLåœ°å€ï¼Œä»¥åŠæ•°æ®æäº¤åˆ°æœåŠ¡å™¨çš„æ–¹æ³•ã€‚æ²¡æœ‰è¡¨å•åŸŸï¼Œè¡¨å•ä¸­çš„æ•°æ®å°±æ— æ³•é€è¾¾åˆ°æœåŠ¡å™¨ã€‚ è¡¨å•åŸŸ&lt;form action=\"urlåœ°å€\" method=\"æäº¤æ–¹å¼\" name=\"è¡¨å•åç§°\"&gt;&lt;!-- å„ç§è¡¨å•æ§ä»¶ --&gt;&lt;/form&gt; inputæ ‡ç­¾å±æ€§ï¼š labelæ ‡ç­¾&lt;form&gt; &lt;label for=\"male\"&gt;Male&lt;/label&gt; &lt;input type=\"radio\" name=\"sex\" id=\"male\" /&gt; &lt;br /&gt; &lt;label for=\"female\"&gt;Female&lt;/label&gt; &lt;input type=\"radio\" name=\"sex\" id=\"female\" /&gt;&lt;/form&gt; ä½œç”¨ï¼šåœ¨labelå…ƒç´ é‡Œç‚¹å‡»åä¼šè§¦å‘æ­¤æ§ä»¶ï¼Œè®©æµè§ˆå™¨å°†ç„¦ç‚¹è½¬åˆ°labelä¸­forç»‘å®šçš„idçš„è¡¨å•æ§ä»¶ä¸Š textareaæ ‡ç­¾ï¼ˆæ–‡æœ¬åŸŸï¼‰&lt;textarea cols=\"æ¯è¡Œä¸­çš„å­—ç¬¦æ•°\" row=\"æ˜¾ç¤ºçš„è¡Œæ•°\"&gt;æ–‡æœ¬å†…å®¹&lt;textarea&gt; selectæ ‡ç­¾ï¼ˆä¸‹æ‹‰èœå•ï¼‰&lt;select&gt; &lt;option&gt;é€‰é¡¹1&lt;/option&gt; &lt;option&gt;é€‰é¡¹2&lt;/option&gt; &lt;option&gt;é€‰é¡¹3&lt;/option&gt; Â·Â·Â·&lt;/select&gt; 1.selectå…ƒç´ ä¸­è‡³å°‘åº”åŒ…å«ä¸€ä¸ª&lt;option&gt;&lt;/option&gt; 2.åœ¨option ä¸­å®šä¹‰select=â€selectedâ€å±æ€§æ—¶ï¼Œå½“å‰é€‰é¡¹ä¸ºé»˜è®¤å€¼ã€‚","categories":[{"name":"Webå‰ç«¯","slug":"Webå‰ç«¯","permalink":"inknight.cn/categories/Webå‰ç«¯/"}],"tags":[{"name":"HTML","slug":"HTML","permalink":"inknight.cn/tags/HTML/"}]}]}